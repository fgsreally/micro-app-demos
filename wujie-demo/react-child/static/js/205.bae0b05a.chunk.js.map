{"version":3,"file":"static/js/205.bae0b05a.chunk.js","mappings":"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","sources":["stores/storeHooks.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/constant.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/utils.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/template.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/plugin.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/entry.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/common.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/effect.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/shadow.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/sync.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/iframe.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/proxy.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/event.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/sandbox.ts","../../../../node_modules/.pnpm/wujie@1.0.18/node_modules/wujie/src/index.ts","../../../../node_modules/.pnpm/wujie-react@1.0.0-rc.20_react@18.2.0/node_modules/wujie-react/index.js","views/MicroAppView/index.tsx","../../../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/lib/asn/LeftOutlined.js","../../../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/lib/asn/RightOutlined.js","../../../../node_modules/.pnpm/@ant-design+icons@4.8.1_biqbaboplfbrettd7655fr4n2y/node_modules/@ant-design/icons/LeftOutlined.js","../../../../node_modules/.pnpm/@ant-design+icons@4.8.1_biqbaboplfbrettd7655fr4n2y/node_modules/@ant-design/icons/RightOutlined.js","../../../../node_modules/.pnpm/@ant-design+icons@4.8.1_biqbaboplfbrettd7655fr4n2y/node_modules/@ant-design/icons/lib/icons/LeftOutlined.js","../../../../node_modules/.pnpm/@ant-design+icons@4.8.1_biqbaboplfbrettd7655fr4n2y/node_modules/@ant-design/icons/lib/icons/RightOutlined.js","../../../../node_modules/.pnpm/antd@4.24.13_biqbaboplfbrettd7655fr4n2y/node_modules/antd/lib/_util/getDataOrAriaProps.js","../../../../node_modules/.pnpm/antd@4.24.13_biqbaboplfbrettd7655fr4n2y/node_modules/antd/lib/alert/ErrorBoundary.js","../../../../node_modules/.pnpm/antd@4.24.13_biqbaboplfbrettd7655fr4n2y/node_modules/antd/lib/alert/index.js","../../../../node_modules/.pnpm/antd@4.24.13_biqbaboplfbrettd7655fr4n2y/node_modules/antd/lib/alert/style/index.js","../../../../node_modules/.pnpm/antd@4.24.13_biqbaboplfbrettd7655fr4n2y/node_modules/antd/lib/cascader/index.js","../../../../node_modules/.pnpm/antd@4.24.13_biqbaboplfbrettd7655fr4n2y/node_modules/antd/lib/cascader/style/index.js","../../../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/factoryWithThrowingShims.js","../../../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/index.js","../../../../node_modules/.pnpm/prop-types@15.8.1/node_modules/prop-types/lib/ReactPropTypesSecret.js","../../../../node_modules/.pnpm/rc-tree@5.7.10_biqbaboplfbrettd7655fr4n2y/node_modules/rc-tree/es/utils/conductUtil.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/context.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/utils/commonUtil.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/utils/treeUtil.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/hooks/useDisplayValues.js","../../../../node_modules/.pnpm/rc-tree@5.7.10_biqbaboplfbrettd7655fr4n2y/node_modules/rc-tree/es/utils/treeUtil.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/hooks/useRefFunc.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/hooks/useSearchOptions.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/OptionList/Checkbox.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/OptionList/Column.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/OptionList/useActive.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/OptionList/useKeyboard.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/OptionList/index.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/utils/warningPropsUtil.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/Cascader.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/hooks/useEntities.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/hooks/useSearchConfig.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/hooks/useMissingValues.js","../../../../node_modules/.pnpm/rc-cascader@3.7.3_biqbaboplfbrettd7655fr4n2y/node_modules/rc-cascader/es/index.js","../../../../node_modules/.pnpm/@babel+runtime@7.22.11/node_modules/@babel/runtime/regenerator/index.js"],"sourcesContent":["import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'\nimport type { RootState, AppDispatch } from './store'\n\nexport const useAppDispatch: () => AppDispatch = useDispatch\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\n","// 私有元素属性\nexport const WUJIE_APP_ID = \"data-wujie-id\";\nexport const WUJIE_SCRIPT_ID = \"data-wujie-script-id\";\nexport const WUJIE_DATA_FLAG = \"data-wujie-Flag\";\nexport const CONTAINER_POSITION_DATA_FLAG = \"data-container-position-flag\";\nexport const CONTAINER_OVERFLOW_DATA_FLAG = \"data-container-overflow-flag\";\nexport const LOADING_DATA_FLAG = \"data-loading-flag\";\nexport const WUJIE_DATA_ATTACH_CSS_FLAG = \"data-wujie-attach-css-flag\";\n\n// 需要使用的某些固定变量\nexport const WUJIE_IFRAME_CLASS = \"wujie_iframe\";\nexport const WUJIE_ALL_EVENT = \"_wujie_all_event\";\nexport const WUJIE_SHADE_STYLE =\n  \"position: fixed; z-index: 2147483647; visibility: hidden; inset: 0px; backface-visibility: hidden;\";\nexport const WUJIE_LOADING_STYLE =\n  \"position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index:1;\";\n\nexport const WUJIE_LOADING_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"30px\" viewBox=\"0 0 24 30\">\n<rect x=\"0\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n<rect x=\"10\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n<rect x=\"20\" y=\"13\" width=\"4\" height=\"5\" fill=\"#909090\">\n  <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n  <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n</rect>\n</svg>`;\n\n// 提醒类\nexport const WUJIE_TIPS_NO_URL = \"url参数为空\";\nexport const WUJIE_TIPS_RELOAD_DISABLED = \"子应用调用reload无法生效\";\nexport const WUJIE_TIPS_STOP_APP = \"此报错可以忽略，iframe主动中断主应用代码在子应用运行\";\nexport const WUJIE_TIPS_STOP_APP_DETAIL = WUJIE_TIPS_STOP_APP + \"，详见：https://github.com/Tencent/wujie/issues/54\";\nexport const WUJIE_TIPS_NO_SUBJECT = \"事件订阅数量为空\";\nexport const WUJIE_TIPS_NO_FETCH = \"window上不存在fetch属性，需要自行polyfill\";\nexport const WUJIE_TIPS_NOT_SUPPORTED = \"当前浏览器不支持无界，子应用将采用iframe方式渲染\";\nexport const WUJIE_TIPS_SCRIPT_ERROR_REQUESTED = \"脚本请求出现错误\";\nexport const WUJIE_TIPS_CSS_ERROR_REQUESTED = \"样式请求出现错误\";\nexport const WUJIE_TIPS_HTML_ERROR_REQUESTED = \"html请求出现错误\";\nexport const WUJIE_TIPS_REPEAT_RENDER = \"无界组件短时间重复渲染了两次，可能存在性能问题请检查代码\";\nexport const WUJIE_TIPS_NO_SCRIPT = \"目标Script尚未准备好或已经被移除\";\n","import {\n  WUJIE_SCRIPT_ID,\n  WUJIE_TIPS_NO_URL,\n  WUJIE_APP_ID,\n  WUJIE_TIPS_STOP_APP,\n  WUJIE_TIPS_STOP_APP_DETAIL,\n} from \"./constant\";\nimport { plugin, cacheOptions } from \"./index\";\n\nexport function toArray<T>(array: T | T[]): T[] {\n  return Array.isArray(array) ? array : [array];\n}\n\nexport function isFunction(value: any): boolean {\n  return typeof value === \"function\";\n}\n\nexport function isHijackingTag(tagName?: string) {\n  return (\n    tagName?.toUpperCase() === \"LINK\" ||\n    tagName?.toUpperCase() === \"STYLE\" ||\n    tagName?.toUpperCase() === \"SCRIPT\" ||\n    tagName?.toUpperCase() === \"IFRAME\"\n  );\n}\n\nexport const wujieSupport = window.Proxy && window.CustomElementRegistry;\n\n/**\n * in safari\n * typeof document.all === 'undefined' // true\n * typeof document.all === 'function' // true\n * We need to discriminate safari for better performance\n */\nconst naughtySafari = typeof document.all === \"function\" && typeof document.all === \"undefined\";\nconst callableFnCacheMap = new WeakMap<CallableFunction, boolean>();\nexport const isCallable = (fn: any) => {\n  if (callableFnCacheMap.has(fn)) {\n    return true;\n  }\n\n  const callable = naughtySafari ? typeof fn === \"function\" && typeof fn !== \"undefined\" : typeof fn === \"function\";\n  if (callable) {\n    callableFnCacheMap.set(fn, callable);\n  }\n  return callable;\n};\n\nconst boundedMap = new WeakMap<CallableFunction, boolean>();\nexport function isBoundedFunction(fn: CallableFunction) {\n  if (boundedMap.has(fn)) {\n    return boundedMap.get(fn);\n  }\n  const bounded = fn.name.indexOf(\"bound \") === 0 && !fn.hasOwnProperty(\"prototype\");\n  boundedMap.set(fn, bounded);\n  return bounded;\n}\n\nconst fnRegexCheckCacheMap = new WeakMap<any | FunctionConstructor, boolean>();\nexport function isConstructable(fn: () => any | FunctionConstructor) {\n  const hasPrototypeMethods =\n    fn.prototype && fn.prototype.constructor === fn && Object.getOwnPropertyNames(fn.prototype).length > 1;\n\n  if (hasPrototypeMethods) return true;\n\n  if (fnRegexCheckCacheMap.has(fn)) {\n    return fnRegexCheckCacheMap.get(fn);\n  }\n\n  let constructable = hasPrototypeMethods;\n  if (!constructable) {\n    const fnString = fn.toString();\n    const constructableFunctionRegex = /^function\\b\\s[A-Z].*/;\n    const classRegex = /^class\\b/;\n    constructable = constructableFunctionRegex.test(fnString) || classRegex.test(fnString);\n  }\n\n  fnRegexCheckCacheMap.set(fn, constructable);\n  return constructable;\n}\n\nconst setFnCacheMap = new WeakMap<CallableFunction, CallableFunction>();\nexport function checkProxyFunction(value: any) {\n  if (isCallable(value) && !isBoundedFunction(value) && !isConstructable(value)) {\n    if (!setFnCacheMap.has(value)) {\n      setFnCacheMap.set(value, value);\n    }\n  }\n}\n\nexport function getTargetValue(target: any, p: any): any {\n  const value = target[p];\n  if (setFnCacheMap.has(value)) {\n    return setFnCacheMap.get(value);\n  }\n  if (isCallable(value) && !isBoundedFunction(value) && !isConstructable(value)) {\n    const boundValue = Function.prototype.bind.call(value, target);\n    setFnCacheMap.set(value, boundValue);\n\n    for (const key in value) {\n      boundValue[key] = value[key];\n    }\n    if (value.hasOwnProperty(\"prototype\") && !boundValue.hasOwnProperty(\"prototype\")) {\n      // https://github.com/kuitos/kuitos.github.io/issues/47\n      Object.defineProperty(boundValue, \"prototype\", { value: value.prototype, enumerable: false, writable: true });\n    }\n    return boundValue;\n  }\n  return value;\n}\n\nexport function getDegradeIframe(id: string): HTMLIFrameElement {\n  return window.document.querySelector(`iframe[${WUJIE_APP_ID}=\"${id}\"]`);\n}\n\nexport function setAttrsToElement(element: HTMLElement, attrs: { [key: string]: any }) {\n  Object.keys(attrs).forEach((name) => {\n    element.setAttribute(name, attrs[name]);\n  });\n}\n\nexport function appRouteParse(url: string): {\n  urlElement: HTMLAnchorElement;\n  appHostPath: string;\n  appRoutePath: string;\n} {\n  if (!url) {\n    error(WUJIE_TIPS_NO_URL);\n    throw new Error();\n  }\n  const urlElement = anchorElementGenerator(url);\n  const appHostPath = urlElement.protocol + \"//\" + urlElement.host;\n  let appRoutePath = urlElement.pathname + urlElement.search + urlElement.hash;\n  if (!appRoutePath.startsWith(\"/\")) appRoutePath = \"/\" + appRoutePath; // hack ie\n  return { urlElement, appHostPath, appRoutePath };\n}\n\nexport function anchorElementGenerator(url: string): HTMLAnchorElement {\n  const element = window.document.createElement(\"a\");\n  element.href = url;\n  element.href = element.href; // hack ie\n  return element;\n}\n\nexport function getAnchorElementQueryMap(anchorElement: HTMLAnchorElement): { [key: string]: string } {\n  const queryList = anchorElement.search.replace(\"?\", \"\").split(\"&\");\n  const queryMap = {};\n  queryList.forEach((query) => {\n    const [key, value] = query.split(\"=\");\n    if (key && value) queryMap[key] = value;\n  });\n  return queryMap;\n}\n\n/**\n * 当前url的查询参数中是否有给定的id\n */\nexport function isMatchSyncQueryById(id: string): boolean {\n  const queryMap = getAnchorElementQueryMap(anchorElementGenerator(window.location.href));\n  return Object.keys(queryMap).includes(id);\n}\n\n/**\n * 劫持元素原型对相对地址的赋值转绝对地址\n * @param iframeWindow\n */\nexport function fixElementCtrSrcOrHref(\n  iframeWindow: Window,\n  elementCtr:\n    | typeof HTMLImageElement\n    | typeof HTMLAnchorElement\n    | typeof HTMLSourceElement\n    | typeof HTMLLinkElement\n    | typeof HTMLScriptElement\n    | typeof HTMLMediaElement,\n  attr\n): void {\n  // patch setAttribute\n  const rawElementSetAttribute = iframeWindow.Element.prototype.setAttribute;\n  elementCtr.prototype.setAttribute = function (name: string, value: string): void {\n    let targetValue = value;\n    if (name === attr) targetValue = getAbsolutePath(value, this.baseURI || \"\", true);\n    rawElementSetAttribute.call(this, name, targetValue);\n  };\n  // patch href get and set\n  const rawAnchorElementHrefDescriptor = Object.getOwnPropertyDescriptor(elementCtr.prototype, attr);\n  const { enumerable, configurable, get, set } = rawAnchorElementHrefDescriptor;\n  Object.defineProperty(elementCtr.prototype, attr, {\n    enumerable,\n    configurable,\n    get: function () {\n      return get.call(this);\n    },\n    set: function (href) {\n      set.call(this, getAbsolutePath(href, this.baseURI, true));\n    },\n  });\n  // TODO: innerHTML的处理\n}\n\nexport function getCurUrl(proxyLocation: Object): string {\n  const location = proxyLocation as Location;\n  return location.protocol + \"//\" + location.host + location.pathname;\n}\n\nexport function getAbsolutePath(url: string, base: string, hash?: boolean): string {\n  try {\n    // 为空值无需处理\n    if (url) {\n      // 需要处理hash的场景\n      if (hash && url.startsWith(\"#\")) return url;\n      return new URL(url, base).href;\n    } else return url;\n  } catch {\n    return url;\n  }\n}\n/**\n * 获取需要同步的url\n */\nexport function getSyncUrl(id: string, prefix: { [key: string]: string }): string {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  winUrlElement = null;\n  const syncUrl = window.decodeURIComponent(queryMap[id] || \"\");\n  const validShortPath = syncUrl.match(/^{([^}]*)}/)?.[1];\n  if (prefix && validShortPath) {\n    return syncUrl.replace(`{${validShortPath}}`, prefix[validShortPath]);\n  }\n  return syncUrl;\n}\n// @ts-ignore\nexport const requestIdleCallback = window.requestIdleCallback || ((cb: Function) => setTimeout(cb, 1));\n\nexport function getContainer(container: string | HTMLElement): HTMLElement {\n  return typeof container === \"string\" ? (document.querySelector(container) as HTMLElement) : container;\n}\n\nexport function warn(msg: string, data?: any): void {\n  console?.warn(`[wujie warn]: ${msg}`, data);\n}\n\nexport function error(msg: string, data?: any): void {\n  console?.error(`[wujie error]: ${msg}`, data);\n}\n\nexport function getInlineCode(match) {\n  const start = match.indexOf(\">\") + 1;\n  const end = match.lastIndexOf(\"<\");\n  return match.substring(start, end);\n}\n\nexport function defaultGetPublicPath(entry) {\n  if (typeof entry === \"object\") {\n    return \"/\";\n  }\n  try {\n    const { origin, pathname } = new URL(entry, location.href);\n    const paths = pathname.split(\"/\");\n    // 移除最后一个元素\n    paths.pop();\n    return `${origin}${paths.join(\"/\")}/`;\n  } catch (e) {\n    console.warn(e);\n    return \"\";\n  }\n}\n\n/** [f1, f2, f3, f4] => f4(f3(f2(f1))) 函数柯里化 */\nexport function compose(fnList: Array<Function>): (...args: Array<string>) => string {\n  return function (code: string, ...args: Array<any>) {\n    return fnList.reduce((newCode, fn) => (isFunction(fn) ? fn(newCode, ...args) : newCode), code || \"\");\n  };\n}\n\n// 微任务\nexport function nextTick(cb: () => any): void {\n  Promise.resolve().then(cb);\n}\n\n//执行钩子函数\nexport function execHooks(plugins: Array<plugin>, hookName: string, ...args: Array<any>): void {\n  try {\n    if (plugins && plugins.length > 0) {\n      plugins\n        .map((plugin) => plugin[hookName])\n        .filter((hook) => isFunction(hook))\n        .forEach((hook) => hook(...args));\n    }\n  } catch (e) {\n    error(e);\n  }\n}\n\nexport function isScriptElement(element: HTMLElement): boolean {\n  return element.tagName?.toUpperCase() === \"SCRIPT\";\n}\n\nlet count = 1;\nexport function setTagToScript(element: HTMLScriptElement, tag?: string): void {\n  if (isScriptElement(element)) {\n    const scriptTag = tag || String(count++);\n    element.setAttribute(WUJIE_SCRIPT_ID, scriptTag);\n  }\n}\n\nexport function getTagFromScript(element: HTMLScriptElement): string | null {\n  if (isScriptElement(element)) {\n    return element.getAttribute(WUJIE_SCRIPT_ID);\n  }\n  return null;\n}\n\n// 合并缓存\nexport function mergeOptions(options: cacheOptions, cacheOptions: cacheOptions) {\n  return {\n    name: options.name,\n    el: options.el || cacheOptions?.el,\n    url: options.url || cacheOptions?.url,\n    html: options.html || cacheOptions?.html,\n    exec: options.exec !== undefined ? options.exec : cacheOptions?.exec,\n    replace: options.replace || cacheOptions?.replace,\n    fetch: options.fetch || cacheOptions?.fetch,\n    props: options.props || cacheOptions?.props,\n    sync: options.sync !== undefined ? options.sync : cacheOptions?.sync,\n    prefix: options.prefix || cacheOptions?.prefix,\n    loading: options.loading || cacheOptions?.loading,\n    // 默认 {}\n    attrs: options.attrs !== undefined ? options.attrs : cacheOptions?.attrs || {},\n    degradeAttrs: options.degradeAttrs !== undefined ? options.degradeAttrs : cacheOptions?.degradeAttrs || {},\n    // 默认 true\n    fiber: options.fiber !== undefined ? options.fiber : cacheOptions?.fiber !== undefined ? cacheOptions?.fiber : true,\n    alive: options.alive !== undefined ? options.alive : cacheOptions?.alive,\n    degrade: options.degrade !== undefined ? options.degrade : cacheOptions?.degrade,\n    plugins: options.plugins || cacheOptions?.plugins,\n    lifecycles: {\n      beforeLoad: options.beforeLoad || cacheOptions?.beforeLoad,\n      beforeMount: options.beforeMount || cacheOptions?.beforeMount,\n      afterMount: options.afterMount || cacheOptions?.afterMount,\n      beforeUnmount: options.beforeUnmount || cacheOptions?.beforeUnmount,\n      afterUnmount: options.afterUnmount || cacheOptions?.afterUnmount,\n      activated: options.activated || cacheOptions?.activated,\n      deactivated: options.deactivated || cacheOptions?.deactivated,\n      loadError: options.loadError || cacheOptions?.loadError,\n    },\n  };\n}\n\n/**\n * 事件触发器\n */\nexport function eventTrigger(el: HTMLElement | Window | Document, eventName: string, detail?: any) {\n  let event;\n  if (typeof window.CustomEvent === \"function\") {\n    event = new CustomEvent(eventName, { detail });\n  } else {\n    event = document.createEvent(\"CustomEvent\");\n    event.initCustomEvent(eventName, true, false, detail);\n  }\n  el.dispatchEvent(event);\n}\n\nexport function stopMainAppRun() {\n  warn(WUJIE_TIPS_STOP_APP_DETAIL);\n  throw new Error(WUJIE_TIPS_STOP_APP);\n}\n","import { getInlineCode } from \"./utils\";\n\nconst ALL_SCRIPT_REGEX = /(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gi;\nconst SCRIPT_TAG_REGEX = /<(script)\\s+((?!type=('|\")text\\/ng-template\\3).)*?>.*?<\\/\\1>/is;\nconst SCRIPT_SRC_REGEX = /.*\\ssrc=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_TYPE_REGEX = /.*\\stype=('|\")?([^>'\"\\s]+)/;\nconst SCRIPT_ENTRY_REGEX = /.*\\sentry\\s*.*/;\nconst SCRIPT_ASYNC_REGEX = /.*\\sasync\\s*.*/;\nconst DEFER_ASYNC_REGEX = /.*\\sdefer\\s*.*/;\nconst SCRIPT_NO_MODULE_REGEX = /.*\\snomodule\\s*.*/;\nconst SCRIPT_MODULE_REGEX = /.*\\stype=('|\")?module('|\")?\\s*.*/;\nconst LINK_TAG_REGEX = /<(link)\\s+.*?>/gis;\nconst LINK_PRELOAD_OR_PREFETCH_REGEX = /\\srel=('|\")?(preload|prefetch|modulepreload)\\1/;\nconst LINK_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst LINK_AS_FONT = /.*\\sas=('|\")?font\\1.*/;\nconst STYLE_TAG_REGEX = /<style[^>]*>[\\s\\S]*?<\\/style>/gi;\nconst STYLE_TYPE_REGEX = /\\s+rel=('|\")?stylesheet\\1.*/;\nconst STYLE_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nconst HTML_COMMENT_REGEX = /<!--([\\s\\S]*?)-->/g;\nconst LINK_IGNORE_REGEX = /<link(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst STYLE_IGNORE_REGEX = /<style(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst SCRIPT_IGNORE_REGEX = /<script(\\s+|\\s+.+\\s+)ignore(\\s*|\\s+.*|=.*)>/is;\nconst CROSS_ORIGIN_REGEX = /.*\\scrossorigin=?('|\")?(use-credentials|anonymous)?('|\")?/i;\n\nexport type ScriptAttributes = {\n  [key: string]: string | boolean; // 所有属性都可以是字符串或布尔值类型\n};\n/** 脚本对象 */\nexport interface ScriptBaseObject {\n  /** 脚本地址，内联为空 */\n  src?: string;\n  /** 脚本是否为async执行 */\n  async?: boolean;\n  /** 脚本是否为defer执行 */\n  defer?: boolean;\n  /** 脚本是否为module模块 */\n  module?: boolean;\n  /** 脚本是否设置crossorigin */\n  crossorigin?: boolean;\n  /** 脚本crossorigin的类型 */\n  crossoriginType?: \"anonymous\" | \"use-credentials\" | \"\";\n  /** 脚本正则匹配属性 */\n  attrs?: ScriptAttributes;\n}\nexport type ScriptObject = ScriptBaseObject & {\n  /** 内联script的代码 */\n  content?: string;\n  /** 忽略，子应用自行请求 */\n  ignore?: boolean;\n  /** 子应用加载完毕事件 */\n  onload?: Function;\n};\n\n/** 样式对象 */\nexport interface StyleObject {\n  /** 样式地址， 内联为空 */\n  src?: string;\n  /** 样式代码 */\n  content?: string;\n  /** 忽略，子应用自行请求 */\n  ignore?: boolean;\n}\n\nexport interface TemplateResult {\n  template: string;\n  scripts: ScriptObject[];\n  styles: StyleObject[];\n  entry: string | ScriptObject;\n}\n\nfunction hasProtocol(url) {\n  return url.startsWith(\"//\") || url.startsWith(\"http://\") || url.startsWith(\"https://\");\n}\n\nfunction getEntirePath(path, baseURI) {\n  return new URL(path, baseURI).toString();\n}\n\nfunction isValidJavaScriptType(type) {\n  const handleTypes = [\n    \"text/javascript\",\n    \"module\",\n    \"application/javascript\",\n    \"text/ecmascript\",\n    \"application/ecmascript\",\n  ];\n  return !type || handleTypes.indexOf(type) !== -1;\n}\n\n/**\n * 解析标签的属性\n * @param scriptOuterHTML script 标签的 outerHTML\n * @returns 返回一个对象，包含 script 标签的所有属性\n */\nexport function parseTagAttributes(TagOuterHTML) {\n  const pattern = /<[-\\w]+\\s+([^>]*)>/i;\n  const matches = pattern.exec(TagOuterHTML);\n\n  if (!matches) {\n    return {};\n  }\n\n  const attributesString = matches[1];\n  const attributesPattern = /([^\\s=]+)\\s*=\\s*(['\"])(.*?)\\2/g;\n  const attributesObject = {};\n\n  let attributeMatches;\n  while ((attributeMatches = attributesPattern.exec(attributesString)) !== null) {\n    const attributeName = attributeMatches[1];\n    const attributeValue = attributeMatches[3];\n    attributesObject[attributeName] = attributeValue;\n  }\n\n  return attributesObject;\n}\n\nfunction isModuleScriptSupported() {\n  const s = window.document.createElement(\"script\");\n  return \"noModule\" in s;\n}\n\nexport const genLinkReplaceSymbol = (linkHref, preloadOrPrefetch = false) =>\n  `<!-- ${preloadOrPrefetch ? \"prefetch/preload/modulepreload\" : \"\"} link ${linkHref} replaced by wujie -->`;\nexport const getInlineStyleReplaceSymbol = (index) => `<!-- inline-style-${index} replaced by wujie -->`;\nexport const genScriptReplaceSymbol = (scriptSrc, type = \"\") =>\n  `<!-- ${type} script ${scriptSrc} replaced by wujie -->`;\nexport const inlineScriptReplaceSymbol = \"<!-- inline scripts replaced by wujie -->\";\nexport const genIgnoreAssetReplaceSymbol = (url) => `<!-- ignore asset ${url || \"file\"} replaced by wujie -->`;\nexport const genModuleScriptReplaceSymbol = (scriptSrc, moduleSupport) =>\n  `<!-- ${moduleSupport ? \"nomodule\" : \"module\"} script ${scriptSrc} ignored by wujie -->`;\n\n/**\n * parse the script link from the template\n * 1. collect stylesheets\n * 2. use global eval to evaluate the inline scripts\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function#Difference_between_Function_constructor_and_function_declaration\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Do_not_ever_use_eval!\n * @param tpl\n * @param baseURI\n * @stripStyles whether to strip the css links\n * @returns {{template: void | string | *, scripts: *[], entry: *}}\n */\nexport default function processTpl(tpl: String, baseURI: String, postProcessTemplate?: Function): TemplateResult {\n  const scripts: ScriptObject[] = [];\n  const styles: StyleObject[] = [];\n  let entry = null;\n  const moduleSupport = isModuleScriptSupported();\n  const template = tpl\n\n    /*\n     remove html comment first\n     */\n    .replace(HTML_COMMENT_REGEX, \"\")\n\n    .replace(LINK_TAG_REGEX, (match) => {\n      /*\n       change the css link\n       */\n      const styleType = !!match.match(STYLE_TYPE_REGEX);\n      if (styleType) {\n        const styleHref = match.match(STYLE_HREF_REGEX);\n        const styleIgnore = match.match(LINK_IGNORE_REGEX);\n\n        if (styleHref) {\n          const href = styleHref && styleHref[2];\n          let newHref = href;\n\n          if (href && !hasProtocol(href)) {\n            newHref = getEntirePath(href, baseURI);\n          }\n          if (styleIgnore) {\n            return genIgnoreAssetReplaceSymbol(newHref);\n          }\n\n          styles.push({ src: newHref });\n          return genLinkReplaceSymbol(newHref);\n        }\n      }\n\n      const preloadOrPrefetchType =\n        match.match(LINK_PRELOAD_OR_PREFETCH_REGEX) && match.match(LINK_HREF_REGEX) && !match.match(LINK_AS_FONT);\n      if (preloadOrPrefetchType) {\n        const [, , linkHref] = match.match(LINK_HREF_REGEX);\n        return genLinkReplaceSymbol(linkHref, true);\n      }\n\n      return match;\n    })\n    .replace(STYLE_TAG_REGEX, (match) => {\n      if (STYLE_IGNORE_REGEX.test(match)) {\n        return genIgnoreAssetReplaceSymbol(\"style file\");\n      } else {\n        const code = getInlineCode(match);\n        styles.push({ src: \"\", content: code });\n        return getInlineStyleReplaceSymbol(styles.length - 1);\n      }\n    })\n    .replace(ALL_SCRIPT_REGEX, (match, scriptTag) => {\n      const scriptIgnore = scriptTag.match(SCRIPT_IGNORE_REGEX);\n      const isModuleScript = !!scriptTag.match(SCRIPT_MODULE_REGEX);\n      const isCrossOriginScript = scriptTag.match(CROSS_ORIGIN_REGEX);\n      const crossOriginType = isCrossOriginScript?.[2] || \"\";\n      const moduleScriptIgnore =\n        (moduleSupport && !!scriptTag.match(SCRIPT_NO_MODULE_REGEX)) || (!moduleSupport && isModuleScript);\n      // in order to keep the exec order of all javascripts\n\n      const matchedScriptTypeMatch = scriptTag.match(SCRIPT_TYPE_REGEX);\n      const matchedScriptType = matchedScriptTypeMatch && matchedScriptTypeMatch[2];\n      if (!isValidJavaScriptType(matchedScriptType)) {\n        return match;\n      }\n\n      // if it is a external script\n      if (SCRIPT_TAG_REGEX.test(match) && scriptTag.match(SCRIPT_SRC_REGEX)) {\n        /*\n         collect scripts and replace the ref\n         */\n\n        const matchedScriptEntry = scriptTag.match(SCRIPT_ENTRY_REGEX);\n        const matchedScriptSrcMatch = scriptTag.match(SCRIPT_SRC_REGEX);\n        let matchedScriptSrc = matchedScriptSrcMatch && matchedScriptSrcMatch[2];\n\n        if (entry && matchedScriptEntry) {\n          throw new SyntaxError(\"You should not set multiply entry script!\");\n        } else {\n          // append the domain while the script not have an protocol prefix\n          if (matchedScriptSrc && !hasProtocol(matchedScriptSrc)) {\n            matchedScriptSrc = getEntirePath(matchedScriptSrc, baseURI);\n          }\n\n          entry = entry || (matchedScriptEntry && matchedScriptSrc);\n        }\n\n        if (scriptIgnore) {\n          return genIgnoreAssetReplaceSymbol(matchedScriptSrc || \"js file\");\n        }\n\n        if (moduleScriptIgnore) {\n          return genModuleScriptReplaceSymbol(matchedScriptSrc || \"js file\", moduleSupport);\n        }\n\n        if (matchedScriptSrc) {\n          const isAsyncScript = !!scriptTag.match(SCRIPT_ASYNC_REGEX);\n          const isDeferScript = !!scriptTag.match(DEFER_ASYNC_REGEX);\n          scripts.push(\n            isAsyncScript || isDeferScript\n              ? {\n                  async: isAsyncScript,\n                  defer: isDeferScript,\n                  src: matchedScriptSrc,\n                  module: isModuleScript,\n                  crossorigin: !!isCrossOriginScript,\n                  crossoriginType: crossOriginType,\n                  attrs: parseTagAttributes(match),\n                }\n              : {\n                  src: matchedScriptSrc,\n                  module: isModuleScript,\n                  crossorigin: !!isCrossOriginScript,\n                  crossoriginType: crossOriginType,\n                  attrs: parseTagAttributes(match),\n                }\n          );\n          return genScriptReplaceSymbol(\n            matchedScriptSrc,\n            (isAsyncScript && \"async\") || (isDeferScript && \"defer\") || \"\"\n          );\n        }\n\n        return match;\n      } else {\n        if (scriptIgnore) {\n          return genIgnoreAssetReplaceSymbol(\"js file\");\n        }\n\n        if (moduleScriptIgnore) {\n          return genModuleScriptReplaceSymbol(\"js file\", moduleSupport);\n        }\n\n        // if it is an inline script\n        const code = getInlineCode(match);\n\n        // remove script blocks when all of these lines are comments.\n        const isPureCommentBlock = code.split(/[\\r\\n]+/).every((line) => !line.trim() || line.trim().startsWith(\"//\"));\n\n        if (!isPureCommentBlock && code) {\n          scripts.push({\n            src: \"\",\n            content: code,\n            module: isModuleScript,\n            crossorigin: !!isCrossOriginScript,\n            crossoriginType: crossOriginType,\n            attrs: parseTagAttributes(match),\n          });\n        }\n\n        return inlineScriptReplaceSymbol;\n      }\n    });\n\n  let tplResult = {\n    template,\n    scripts,\n    styles,\n    // set the last script as entry if have not set\n    entry: entry || scripts[scripts.length - 1],\n  };\n  if (typeof postProcessTemplate === \"function\") {\n    tplResult = postProcessTemplate(tplResult);\n  }\n\n  return tplResult;\n}\n","import { plugin, ScriptObjectLoader } from \"./index\";\nimport { StyleObject } from \"./template\";\nimport { compose, getAbsolutePath } from \"./utils\";\n\ninterface loaderOption {\n  plugins: Array<plugin>;\n  replace: (code: string) => string;\n}\n\n/**\n * 获取柯里化 cssLoader\n */\nexport function getCssLoader({ plugins, replace }: loaderOption) {\n  return (code: string, src: string = \"\", base: string): string =>\n    compose(plugins.map((plugin) => plugin.cssLoader))(replace ? replace(code) : code, src, base);\n}\n\n/**\n * 获取柯里化 jsLoader\n */\nexport function getJsLoader({ plugins, replace }: loaderOption) {\n  return (code: string, src: string = \"\", base: string): string =>\n    compose(plugins.map((plugin) => plugin.jsLoader))(replace ? replace(code) : code, src, base);\n}\n\n/**\n * 获取预置插件\n */\ntype presetLoadersType = \"cssBeforeLoaders\" | \"cssAfterLoaders\" | \"jsBeforeLoaders\" | \"jsAfterLoaders\";\nexport function getPresetLoaders(loaderType: presetLoadersType, plugins: Array<plugin>): plugin[presetLoadersType] {\n  const loaders: (StyleObject | ScriptObjectLoader)[][] = plugins\n    .map((plugin) => plugin[loaderType])\n    .filter((loaders) => loaders?.length);\n  const res = loaders.reduce((preLoaders, curLoaders) => preLoaders.concat(curLoaders), []);\n  return loaderType === \"cssBeforeLoaders\" ? res.reverse() : res;\n}\n\n/**\n * 获取影响插件\n */\ntype effectLoadersType = \"jsExcludes\" | \"cssExcludes\" | \"jsIgnores\" | \"cssIgnores\";\nexport function getEffectLoaders(loaderType: effectLoadersType, plugins: Array<plugin>): plugin[effectLoadersType] {\n  return plugins\n    .map((plugin) => plugin[loaderType])\n    .filter((loaders) => loaders?.length)\n    .reduce((preLoaders, curLoaders) => preLoaders.concat(curLoaders), []);\n}\n\n// 判断 url 是否符合loader的规则\nexport function isMatchUrl(url: string, effectLoaders: plugin[effectLoadersType]): boolean {\n  return effectLoaders.some((loader) => (typeof loader === \"string\" ? url === loader : loader.test(url)));\n}\n\n/**\n * 转换子应用css内的相对地址成绝对地址\n */\nfunction cssRelativePathResolve(code: string, src: string, base: string) {\n  const baseUrl = src ? getAbsolutePath(src, base) : base;\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/url\n  const urlReg = /(url\\((?!['\"]?(?:data):)['\"]?)([^'\")]*)(['\"]?\\))/g;\n  return code.replace(urlReg, (_m, pre, url, post) => {\n    const absoluteUrl = getAbsolutePath(url, baseUrl);\n    return pre + absoluteUrl + post;\n  });\n}\n\nconst defaultPlugin = {\n  cssLoader: cssRelativePathResolve,\n  // fix https://github.com/Tencent/wujie/issues/455\n  cssBeforeLoaders: [{ content: \"html {view-transition-name: none;}\" }],\n};\n\nexport function getPlugins(plugins: Array<plugin>): Array<plugin> {\n  return Array.isArray(plugins) ? [defaultPlugin, ...plugins] : [defaultPlugin];\n}\n\nexport default defaultPlugin;\n","import processTpl, {\n  genLinkReplaceSymbol,\n  getInlineStyleReplaceSymbol,\n  ScriptObject,\n  ScriptBaseObject,\n  StyleObject,\n} from \"./template\";\nimport { defaultGetPublicPath, getInlineCode, requestIdleCallback, error, compose, getCurUrl } from \"./utils\";\nimport {\n  WUJIE_TIPS_NO_FETCH,\n  WUJIE_TIPS_SCRIPT_ERROR_REQUESTED,\n  WUJIE_TIPS_CSS_ERROR_REQUESTED,\n  WUJIE_TIPS_HTML_ERROR_REQUESTED,\n} from \"./constant\";\nimport { getEffectLoaders, isMatchUrl } from \"./plugin\";\nimport Wujie from \"./sandbox\";\nimport { plugin, loadErrorHandler } from \"./index\";\n\nexport type ScriptResultList = (ScriptBaseObject & { contentPromise: Promise<string> })[];\nexport type StyleResultList = { src: string; contentPromise: Promise<string>; ignore?: boolean }[];\n\ninterface htmlParseResult {\n  template: string;\n\n  assetPublicPath: string;\n\n  getExternalScripts(): ScriptResultList;\n\n  getExternalStyleSheets(): StyleResultList;\n}\n\ntype ImportEntryOpts = {\n  fetch?: typeof window.fetch;\n  fiber?: boolean;\n  plugins?: Array<plugin>;\n  loadError?: loadErrorHandler;\n};\n\nconst styleCache = {};\nconst scriptCache = {};\nconst embedHTMLCache = {};\n\nif (!window.fetch) {\n  error(WUJIE_TIPS_NO_FETCH);\n  throw new Error();\n}\nconst defaultFetch = window.fetch.bind(window);\n\nfunction defaultGetTemplate(tpl) {\n  return tpl;\n}\n\n/**\n * 处理css-loader\n */\nexport async function processCssLoader(\n  sandbox: Wujie,\n  template: string,\n  getExternalStyleSheets: () => StyleResultList\n): Promise<string> {\n  const curUrl = getCurUrl(sandbox.proxyLocation);\n  /** css-loader */\n  const composeCssLoader = compose(sandbox.plugins.map((plugin) => plugin.cssLoader));\n  const processedCssList: StyleResultList = getExternalStyleSheets().map(({ src, ignore, contentPromise }) => ({\n    src,\n    ignore,\n    contentPromise: contentPromise.then((content) => composeCssLoader(content, src, curUrl)),\n  }));\n  const embedHTML = await getEmbedHTML(template, processedCssList);\n  return sandbox.replace ? sandbox.replace(embedHTML) : embedHTML;\n}\n\n/**\n * convert external css link to inline style for performance optimization\n * @return embedHTML\n */\nasync function getEmbedHTML(template, styleResultList: StyleResultList): Promise<string> {\n  let embedHTML = template;\n\n  return Promise.all(\n    styleResultList.map((styleResult, index) =>\n      styleResult.contentPromise.then((content) => {\n        if (styleResult.src) {\n          embedHTML = embedHTML.replace(\n            genLinkReplaceSymbol(styleResult.src),\n            styleResult.ignore\n              ? `<link href=\"${styleResult.src}\" rel=\"stylesheet\" type=\"text/css\">`\n              : `<style>/* ${styleResult.src} */${content}</style>`\n          );\n        } else if (content) {\n          embedHTML = embedHTML.replace(\n            getInlineStyleReplaceSymbol(index),\n            `<style>/* inline-style-${index} */${content}</style>`\n          );\n        }\n      })\n    )\n  ).then(() => embedHTML);\n}\n\nconst isInlineCode = (code) => code.startsWith(\"<\");\n\nconst fetchAssets = (\n  src: string,\n  cache: Object,\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response>,\n  cssFlag?: boolean,\n  loadError?: loadErrorHandler\n) =>\n  cache[src] ||\n  (cache[src] = fetch(src)\n    .then((response) => {\n      // usually browser treats 4xx and 5xx response of script loading as an error and will fire a script error event\n      // https://stackoverflow.com/questions/5625420/what-http-headers-responses-trigger-the-onerror-handler-on-a-script-tag/5625603\n      if (response.status >= 400) {\n        cache[src] = null;\n        if (cssFlag) {\n          error(WUJIE_TIPS_CSS_ERROR_REQUESTED, { src, response });\n          loadError?.(src, new Error(WUJIE_TIPS_CSS_ERROR_REQUESTED));\n          return \"\";\n        } else {\n          error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, { src, response });\n          loadError?.(src, new Error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED));\n          throw new Error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED);\n        }\n      }\n      return response.text();\n    })\n    .catch((e) => {\n      cache[src] = null;\n      if (cssFlag) {\n        error(WUJIE_TIPS_CSS_ERROR_REQUESTED, src);\n        loadError?.(src, e);\n        return \"\";\n      } else {\n        error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, src);\n        loadError?.(src, e);\n        return \"\";\n      }\n    }));\n\n// for prefetch\nexport function getExternalStyleSheets(\n  styles: StyleObject[],\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response> = defaultFetch,\n  loadError: loadErrorHandler\n): StyleResultList {\n  return styles.map(({ src, content, ignore }) => {\n    // 内联\n    if (content) {\n      return { src: \"\", contentPromise: Promise.resolve(content) };\n    } else if (isInlineCode(src)) {\n      // if it is inline style\n      return { src: \"\", contentPromise: Promise.resolve(getInlineCode(src)) };\n    } else {\n      // external styles\n      return {\n        src,\n        ignore,\n        contentPromise: ignore ? Promise.resolve(\"\") : fetchAssets(src, styleCache, fetch, true, loadError),\n      };\n    }\n  });\n}\n\n// for prefetch\nexport function getExternalScripts(\n  scripts: ScriptObject[],\n  fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response> = defaultFetch,\n  loadError: loadErrorHandler,\n  fiber: boolean\n): ScriptResultList {\n  // module should be requested in iframe\n  return scripts.map((script) => {\n    const { src, async, defer, module, ignore } = script;\n    let contentPromise = null;\n    // async\n    if ((async || defer) && src && !module) {\n      contentPromise = new Promise((resolve, reject) =>\n        fiber\n          ? requestIdleCallback(() => fetchAssets(src, scriptCache, fetch, false, loadError).then(resolve, reject))\n          : fetchAssets(src, scriptCache, fetch, false, loadError).then(resolve, reject)\n      );\n      // module || ignore\n    } else if ((module && src) || ignore) {\n      contentPromise = Promise.resolve(\"\");\n      // inline\n    } else if (!src) {\n      contentPromise = Promise.resolve(script.content);\n      // outline\n    } else {\n      contentPromise = fetchAssets(src, scriptCache, fetch, false, loadError);\n    }\n    // refer https://html.spec.whatwg.org/multipage/scripting.html#attr-script-defer\n    if (module && !async) script.defer = true;\n    return { ...script, contentPromise };\n  });\n}\n\nexport default function importHTML(params: {\n  url: string;\n  html?: string;\n  opts: ImportEntryOpts;\n}): Promise<htmlParseResult> {\n  const { url, opts, html } = params;\n  const fetch = opts.fetch ?? defaultFetch;\n  const fiber = opts.fiber ?? true;\n  const { plugins, loadError } = opts;\n  const htmlLoader = plugins ? compose(plugins.map((plugin) => plugin.htmlLoader)) : defaultGetTemplate;\n  const jsExcludes = getEffectLoaders(\"jsExcludes\", plugins);\n  const cssExcludes = getEffectLoaders(\"cssExcludes\", plugins);\n  const jsIgnores = getEffectLoaders(\"jsIgnores\", plugins);\n  const cssIgnores = getEffectLoaders(\"cssIgnores\", plugins);\n  const getPublicPath = defaultGetPublicPath;\n\n  const getHtmlParseResult = (url, html, htmlLoader) =>\n    (html\n      ? Promise.resolve(html)\n      : fetch(url)\n          .then((response) => {\n            if (response.status >= 400) {\n              error(WUJIE_TIPS_HTML_ERROR_REQUESTED, { url, response });\n              loadError?.(url, new Error(WUJIE_TIPS_HTML_ERROR_REQUESTED));\n              return \"\";\n            }\n            return response.text();\n          })\n          .catch((e) => {\n            embedHTMLCache[url] = null;\n            loadError?.(url, e);\n            return Promise.reject(e);\n          })\n    ).then((html) => {\n      const assetPublicPath = getPublicPath(url);\n      const { template, scripts, styles } = processTpl(htmlLoader(html), assetPublicPath);\n      return {\n        template: template,\n        assetPublicPath,\n        getExternalScripts: () =>\n          getExternalScripts(\n            scripts\n              .filter((script) => !script.src || !isMatchUrl(script.src, jsExcludes))\n              .map((script) => ({ ...script, ignore: script.src && isMatchUrl(script.src, jsIgnores) })),\n            fetch,\n            loadError,\n            fiber\n          ),\n        getExternalStyleSheets: () =>\n          getExternalStyleSheets(\n            styles\n              .filter((style) => !style.src || !isMatchUrl(style.src, cssExcludes))\n              .map((style) => ({ ...style, ignore: style.src && isMatchUrl(style.src, cssIgnores) })),\n            fetch,\n            loadError\n          ),\n      };\n    });\n\n  if (opts?.plugins.some((plugin) => plugin.htmlLoader)) {\n    return getHtmlParseResult(url, html, htmlLoader);\n    // 没有html-loader可以做缓存\n  } else {\n    return embedHTMLCache[url] || (embedHTMLCache[url] = getHtmlParseResult(url, html, htmlLoader));\n  }\n}\n","import Wujie from \"./sandbox\";\nimport { cacheOptions } from \"./index\";\nexport interface SandboxCache {\n  wujie?: Wujie;\n  options?: cacheOptions;\n}\n\nexport type appAddEventListenerOptions = AddEventListenerOptions & { targetWindow?: Window };\n\n// 全部无界实例和配置存储map\nexport const idToSandboxCacheMap = window.__POWERED_BY_WUJIE__\n  ? window.__WUJIE.inject.idToSandboxMap\n  : new Map<String, SandboxCache>();\n\nexport function getWujieById(id: String): Wujie | null {\n  return idToSandboxCacheMap.get(id)?.wujie || null;\n}\n\nexport function getOptionsById(id: String): cacheOptions | null {\n  return idToSandboxCacheMap.get(id)?.options || null;\n}\n\nexport function addSandboxCacheWithWujie(id: string, sandbox: Wujie): void {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache) idToSandboxCacheMap.set(id, { ...wujieCache, wujie: sandbox });\n  else idToSandboxCacheMap.set(id, { wujie: sandbox });\n}\n\nexport function deleteWujieById(id: string) {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache?.options) idToSandboxCacheMap.set(id, { options: wujieCache.options });\n  idToSandboxCacheMap.delete(id);\n}\n\nexport function addSandboxCacheWithOptions(id: string, options: cacheOptions): void {\n  const wujieCache = idToSandboxCacheMap.get(id);\n  if (wujieCache) idToSandboxCacheMap.set(id, { ...wujieCache, options });\n  else idToSandboxCacheMap.set(id, { options });\n}\n\n// 分类document上需要处理的属性，不同类型会进入不同的处理逻辑\nexport const documentProxyProperties = {\n  // 降级场景下需要本地特殊处理的属性\n  modifyLocalProperties: [\"createElement\", \"createTextNode\", \"documentURI\", \"URL\", \"getElementsByTagName\"],\n\n  // 子应用需要手动修正的属性方法\n  modifyProperties: [\n    \"createElement\",\n    \"createTextNode\",\n    \"documentURI\",\n    \"URL\",\n    \"getElementsByTagName\",\n    \"getElementsByClassName\",\n    \"getElementsByName\",\n    \"getElementById\",\n    \"querySelector\",\n    \"querySelectorAll\",\n    \"documentElement\",\n    \"scrollingElement\",\n    \"forms\",\n    \"images\",\n    \"links\",\n  ],\n\n  // 需要从shadowRoot中获取的属性\n  shadowProperties: [\n    \"activeElement\",\n    \"childElementCount\",\n    \"children\",\n    \"firstElementChild\",\n    \"firstChild\",\n    \"fullscreenElement\",\n    \"lastElementChild\",\n    \"pictureInPictureElement\",\n    \"pointerLockElement\",\n    \"styleSheets\",\n  ],\n\n  // 需要从shadowRoot中获取的方法\n  shadowMethods: [\n    \"append\",\n    \"contains\",\n    \"getSelection\",\n    \"elementFromPoint\",\n    \"elementsFromPoint\",\n    \"getAnimations\",\n    \"replaceChildren\",\n  ],\n\n  // 需要从主应用document中获取的属性\n  documentProperties: [\n    \"characterSet\",\n    \"compatMode\",\n    \"contentType\",\n    \"designMode\",\n    \"dir\",\n    \"doctype\",\n    \"embeds\",\n    \"fullscreenEnabled\",\n    \"hidden\",\n    \"implementation\",\n    \"lastModified\",\n    \"pictureInPictureEnabled\",\n    \"plugins\",\n    \"readyState\",\n    \"referrer\",\n    \"visibilityState\",\n    \"fonts\",\n  ],\n\n  // 需要从主应用document中获取的方法\n  documentMethods: [\n    \"execCommand\",\n    \"caretPositionFromPoint\",\n    \"createRange\",\n    \"exitFullscreen\",\n    \"exitPictureInPicture\",\n    \"getElementsByTagNameNS\",\n    \"hasFocus\",\n    \"prepend\",\n  ],\n\n  // 需要从主应用document中获取的事件\n  documentEvents: [\n    \"onpointerlockchange\",\n    \"onpointerlockerror\",\n    \"onbeforecopy\",\n    \"onbeforecut\",\n    \"onbeforepaste\",\n    \"onfreeze\",\n    \"onresume\",\n    \"onsearch\",\n    \"onfullscreenchange\",\n    \"onfullscreenerror\",\n    \"onsecuritypolicyviolation\",\n    \"onvisibilitychange\",\n  ],\n\n  // 无需修改原型的属性\n  ownerProperties: [\"head\", \"body\"],\n};\n\n// 需要挂载到子应用iframe document上的事件\nexport const appDocumentAddEventListenerEvents = [\"DOMContentLoaded\", \"readystatechange\"];\nexport const appDocumentOnEvents = [\"onreadystatechange\"];\n// 需要挂载到主应用document上的事件\nexport const mainDocumentAddEventListenerEvents = [\n  \"fullscreenchange\",\n  \"fullscreenerror\",\n  \"selectionchange\",\n  \"visibilitychange\",\n  \"wheel\",\n  \"keydown\",\n  \"keypress\",\n  \"keyup\",\n];\n\n// 需要同时挂载到主应用document和shadow上的事件（互斥）\nexport const mainAndAppAddEventListenerEvents = [\"gotpointercapture\", \"lostpointercapture\"];\n\n// 子应用window监听需要挂载到iframe沙箱上的事件\nexport const appWindowAddEventListenerEvents = [\n  \"hashchange\",\n  \"popstate\",\n  \"DOMContentLoaded\",\n  \"load\",\n  \"beforeunload\",\n  \"unload\",\n  \"message\",\n  \"error\",\n  \"unhandledrejection\",\n];\n\n// 子应用window.onXXX需要挂载到iframe沙箱上的事件\nexport const appWindowOnEvent = [\"onload\", \"onbeforeunload\", \"onunload\"];\n\n// 相对路径问题元素的tag和attr的map\nexport const relativeElementTagAttrMap = {\n  IMG: \"src\",\n  A: \"href\",\n  SOURCE: \"src\",\n};\n\n// 需要单独处理的window属性\nexport const windowProxyProperties = [\"getComputedStyle\", \"visualViewport\", \"matchMedia\", \"DOMParser\"];\n\n// window白名单\nexport const windowRegWhiteList = [\n  /animationFrame$/i,\n  /resizeObserver$|mutationObserver$|intersectionObserver$/i,\n  /height$|width$|left$/i,\n  /^screen/i,\n  /X$|Y$/,\n];\n\n// 保存原型方法\n// 子应用的Document.prototype已经被改写了\nexport const rawElementAppendChild = HTMLElement.prototype.appendChild;\nexport const rawElementRemoveChild = HTMLElement.prototype.removeChild;\nexport const rawElementContains = HTMLElement.prototype.contains;\nexport const rawHeadInsertBefore = HTMLHeadElement.prototype.insertBefore;\nexport const rawBodyInsertBefore = HTMLBodyElement.prototype.insertBefore;\nexport const rawAddEventListener = Node.prototype.addEventListener;\nexport const rawRemoveEventListener = Node.prototype.removeEventListener;\nexport const rawWindowAddEventListener = window.addEventListener;\nexport const rawWindowRemoveEventListener = window.removeEventListener;\nexport const rawAppendChild = Node.prototype.appendChild;\nexport const rawDocumentQuerySelector = window.__POWERED_BY_WUJIE__\n  ? window.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\n  : Document.prototype.querySelector;\n","import { getExternalStyleSheets, getExternalScripts } from \"./entry\";\nimport {\n  getWujieById,\n  rawAppendChild,\n  rawElementContains,\n  rawElementRemoveChild,\n  rawHeadInsertBefore,\n  rawBodyInsertBefore,\n  rawDocumentQuerySelector,\n  rawAddEventListener,\n  rawRemoveEventListener,\n} from \"./common\";\nimport {\n  isFunction,\n  isHijackingTag,\n  requestIdleCallback,\n  warn,\n  nextTick,\n  getCurUrl,\n  execHooks,\n  isScriptElement,\n  setTagToScript,\n  getTagFromScript,\n  setAttrsToElement,\n} from \"./utils\";\nimport { insertScriptToIframe, patchElementEffect } from \"./iframe\";\nimport Wujie from \"./sandbox\";\nimport { getPatchStyleElements } from \"./shadow\";\nimport { getCssLoader, getEffectLoaders, isMatchUrl } from \"./plugin\";\nimport { WUJIE_SCRIPT_ID, WUJIE_DATA_FLAG, WUJIE_TIPS_REPEAT_RENDER, WUJIE_TIPS_NO_SCRIPT } from \"./constant\";\nimport { ScriptObject, parseTagAttributes } from \"./template\";\n\nfunction patchCustomEvent(\n  e: CustomEvent,\n  elementGetter: () => HTMLScriptElement | HTMLLinkElement | null\n): CustomEvent {\n  Object.defineProperties(e, {\n    srcElement: {\n      get: elementGetter,\n    },\n    target: {\n      get: elementGetter,\n    },\n  });\n\n  return e;\n}\n\n/**\n * 手动触发事件回调\n */\nfunction manualInvokeElementEvent(element: HTMLLinkElement | HTMLScriptElement, event: string): void {\n  const customEvent = new CustomEvent(event);\n  const patchedEvent = patchCustomEvent(customEvent, () => element);\n  if (isFunction(element[`on${event}`])) {\n    element[`on${event}`](patchedEvent);\n  } else {\n    element.dispatchEvent(patchedEvent);\n  }\n}\n\n/**\n * 样式元素的css变量处理，每个stylesheetElement单独节流\n */\nfunction handleStylesheetElementPatch(stylesheetElement: HTMLStyleElement & { _patcher?: any }, sandbox: Wujie) {\n  if (!stylesheetElement.innerHTML || sandbox.degrade) return;\n  const patcher = () => {\n    const [hostStyleSheetElement, fontStyleSheetElement] = getPatchStyleElements([stylesheetElement.sheet]);\n    if (hostStyleSheetElement) {\n      sandbox.shadowRoot.head.appendChild(hostStyleSheetElement);\n    }\n    if (fontStyleSheetElement) {\n      sandbox.shadowRoot.host.appendChild(fontStyleSheetElement);\n    }\n    stylesheetElement._patcher = undefined;\n  };\n  if (stylesheetElement._patcher) {\n    clearTimeout(stylesheetElement._patcher);\n  }\n  stylesheetElement._patcher = setTimeout(patcher, 50);\n}\n\n/**\n * 劫持处理样式元素的属性\n */\nfunction patchStylesheetElement(\n  stylesheetElement: HTMLStyleElement & { _hasPatchStyle?: boolean },\n  cssLoader: (code: string, url: string, base: string) => string,\n  sandbox: Wujie,\n  curUrl: string\n) {\n  if (stylesheetElement._hasPatchStyle) return;\n  const innerHTMLDesc = Object.getOwnPropertyDescriptor(Element.prototype, \"innerHTML\");\n  const innerTextDesc = Object.getOwnPropertyDescriptor(HTMLElement.prototype, \"innerText\");\n  const textContentDesc = Object.getOwnPropertyDescriptor(Node.prototype, \"textContent\");\n  const RawInsertRule = stylesheetElement.sheet?.insertRule;\n  // 这个地方将cssRule加到innerHTML中去，防止子应用切换之后丢失\n  function patchSheetInsertRule() {\n    if (!RawInsertRule) return;\n    stylesheetElement.sheet.insertRule = (rule: string, index?: number): number => {\n      innerHTMLDesc ? (stylesheetElement.innerHTML += rule) : (stylesheetElement.innerText += rule);\n      return RawInsertRule.call(stylesheetElement.sheet, rule, index);\n    };\n  }\n  patchSheetInsertRule();\n\n  if (innerHTMLDesc) {\n    Object.defineProperties(stylesheetElement, {\n      innerHTML: {\n        get: function () {\n          return innerHTMLDesc.get.call(stylesheetElement);\n        },\n        set: function (code: string) {\n          innerHTMLDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n          nextTick(() => handleStylesheetElementPatch(this, sandbox));\n        },\n      },\n    });\n  }\n\n  Object.defineProperties(stylesheetElement, {\n    innerText: {\n      get: function () {\n        return innerTextDesc.get.call(stylesheetElement);\n      },\n      set: function (code: string) {\n        innerTextDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n      },\n    },\n    textContent: {\n      get: function () {\n        return textContentDesc.get.call(stylesheetElement);\n      },\n      set: function (code: string) {\n        textContentDesc.set.call(stylesheetElement, cssLoader(code, \"\", curUrl));\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n      },\n    },\n    appendChild: {\n      value: function (node: Node): Node {\n        nextTick(() => handleStylesheetElementPatch(this, sandbox));\n        if (node.nodeType === Node.TEXT_NODE) {\n          const res = rawAppendChild.call(\n            stylesheetElement,\n            stylesheetElement.ownerDocument.createTextNode(cssLoader(node.textContent, \"\", curUrl))\n          );\n          // 当appendChild之后，样式元素的sheet对象发生改变，要重新patch\n          patchSheetInsertRule();\n          return res;\n        } else return rawAppendChild(node);\n      },\n    },\n    _hasPatchStyle: { get: () => true },\n  });\n}\n\nlet dynamicScriptExecStack = Promise.resolve();\nfunction rewriteAppendOrInsertChild(opts: {\n  rawDOMAppendOrInsertBefore: <T extends Node>(newChild: T, refChild?: Node | null) => T;\n  wujieId: string;\n}) {\n  return function appendChildOrInsertBefore<T extends Node>(\n    this: HTMLHeadElement | HTMLBodyElement,\n    newChild: T,\n    refChild?: Node | null\n  ) {\n    let element = newChild as any;\n    const { rawDOMAppendOrInsertBefore, wujieId } = opts;\n    const sandbox = getWujieById(wujieId);\n\n    const { styleSheetElements, replace, fetch, plugins, iframe, lifecycles, proxyLocation, fiber } = sandbox;\n\n    if (!isHijackingTag(element.tagName) || !wujieId) {\n      const res = rawDOMAppendOrInsertBefore.call(this, element, refChild) as T;\n      patchElementEffect(element, iframe.contentWindow);\n      execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n      return res;\n    }\n\n    const iframeDocument = iframe.contentDocument;\n    const curUrl = getCurUrl(proxyLocation);\n\n    // TODO 过滤可以开放\n    if (element.tagName) {\n      switch (element.tagName?.toUpperCase()) {\n        case \"LINK\": {\n          const { href, rel, type } = element as HTMLLinkElement;\n          const styleFlag = rel === \"stylesheet\" || type === \"text/css\" || href.endsWith(\".css\");\n          // 非 stylesheet 不做处理\n          if (!styleFlag) {\n            const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n            execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n            return res;\n          }\n          // 排除css\n          if (href && !isMatchUrl(href, getEffectLoaders(\"cssExcludes\", plugins))) {\n            getExternalStyleSheets(\n              [{ src: href, ignore: isMatchUrl(href, getEffectLoaders(\"cssIgnores\", plugins)) }],\n              fetch,\n              lifecycles.loadError\n            ).forEach(({ src, ignore, contentPromise }) =>\n              contentPromise.then(\n                (content) => {\n                  // 处理 ignore 样式\n                  const rawAttrs = parseTagAttributes(element.outerHTML);\n                  if (ignore && src) {\n                    const stylesheetElement = iframeDocument.createElement(\"link\");\n                    const attrs = {\n                      ...rawAttrs,\n                      type: \"text/css\",\n                      rel: \"stylesheet\",\n                      href: src,\n                    };\n                    setAttrsToElement(stylesheetElement, attrs);\n                    rawDOMAppendOrInsertBefore.call(this, stylesheetElement, refChild);\n                    manualInvokeElementEvent(element, \"load\");\n                  } else {\n                    // 记录js插入样式，子应用重新激活时恢复\n                    const stylesheetElement = iframeDocument.createElement(\"style\");\n                    // 处理css-loader插件\n                    const cssLoader = getCssLoader({ plugins, replace });\n                    stylesheetElement.innerHTML = cssLoader(content, src, curUrl);\n                    styleSheetElements.push(stylesheetElement);\n                    setAttrsToElement(stylesheetElement, rawAttrs);\n                    rawDOMAppendOrInsertBefore.call(this, stylesheetElement, refChild);\n                    // 处理样式补丁\n                    handleStylesheetElementPatch(stylesheetElement, sandbox);\n                    manualInvokeElementEvent(element, \"load\");\n                  }\n                  element = null;\n                },\n                () => {\n                  manualInvokeElementEvent(element, \"error\");\n                  element = null;\n                }\n              )\n            );\n          }\n\n          const comment = iframeDocument.createComment(`dynamic link ${href} replaced by wujie`);\n          return rawDOMAppendOrInsertBefore.call(this, comment, refChild);\n        }\n        case \"STYLE\": {\n          const stylesheetElement: HTMLStyleElement = newChild as any;\n          styleSheetElements.push(stylesheetElement);\n          const content = stylesheetElement.innerHTML;\n          const cssLoader = getCssLoader({ plugins, replace });\n          content && (stylesheetElement.innerHTML = cssLoader(content, \"\", curUrl));\n          const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n          // 处理样式补丁\n          patchStylesheetElement(stylesheetElement, cssLoader, sandbox, curUrl);\n          handleStylesheetElementPatch(stylesheetElement, sandbox);\n          execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n          return res;\n        }\n        case \"SCRIPT\": {\n          setTagToScript(element);\n          const { src, text, type, crossOrigin } = element as HTMLScriptElement;\n          // 排除js\n          if (src && !isMatchUrl(src, getEffectLoaders(\"jsExcludes\", plugins))) {\n            const execScript = (scriptResult: ScriptObject) => {\n              // 假如子应用被连续渲染两次，两次渲染会导致处理流程的交叉污染\n              if (sandbox.iframe === null) return warn(WUJIE_TIPS_REPEAT_RENDER);\n              const onload = () => {\n                manualInvokeElementEvent(element, \"load\");\n                element = null;\n              };\n              insertScriptToIframe({ ...scriptResult, onload }, sandbox.iframe.contentWindow, element);\n            };\n            const scriptOptions = {\n              src,\n              module: type === \"module\",\n              crossorigin: crossOrigin !== null,\n              crossoriginType: crossOrigin || \"\",\n              ignore: isMatchUrl(src, getEffectLoaders(\"jsIgnores\", plugins)),\n              attrs: parseTagAttributes(element.outerHTML),\n            } as ScriptObject;\n            getExternalScripts([scriptOptions], fetch, lifecycles.loadError, fiber).forEach((scriptResult) => {\n              dynamicScriptExecStack = dynamicScriptExecStack.then(() =>\n                scriptResult.contentPromise.then(\n                  (content) => {\n                    if (sandbox.execQueue === null) return warn(WUJIE_TIPS_REPEAT_RENDER);\n                    const execQueueLength = sandbox.execQueue?.length;\n                    sandbox.execQueue.push(() =>\n                      fiber\n                        ? requestIdleCallback(() => {\n                            execScript({ ...scriptResult, content });\n                          })\n                        : execScript({ ...scriptResult, content })\n                    );\n                    // 同步脚本如果都执行完了，需要手动触发执行\n                    if (!execQueueLength) sandbox.execQueue.shift()();\n                  },\n                  () => {\n                    manualInvokeElementEvent(element, \"error\");\n                    element = null;\n                  }\n                )\n              );\n            });\n          } else {\n            const execQueueLength = sandbox.execQueue?.length;\n            sandbox.execQueue.push(() =>\n              fiber\n                ? requestIdleCallback(() => {\n                    insertScriptToIframe(\n                      { src: null, content: text, attrs: parseTagAttributes(element.outerHTML) },\n                      sandbox.iframe.contentWindow,\n                      element\n                    );\n                  })\n                : insertScriptToIframe(\n                    { src: null, content: text, attrs: parseTagAttributes(element.outerHTML) },\n                    sandbox.iframe.contentWindow,\n                    element\n                  )\n            );\n            if (!execQueueLength) sandbox.execQueue.shift()();\n          }\n          // inline script never trigger the onload and onerror event\n          const comment = iframeDocument.createComment(`dynamic script ${src} replaced by wujie`);\n          return rawDOMAppendOrInsertBefore.call(this, comment, refChild);\n        }\n        // 修正子应用内部iframe的window.parent指向\n        case \"IFRAME\": {\n          // 嵌套的子应用的js-iframe需要插入子应用的js-iframe内部\n          if (element.getAttribute(WUJIE_DATA_FLAG) === \"\") {\n            return rawAppendChild.call(rawDocumentQuerySelector.call(this.ownerDocument, \"html\"), element);\n          }\n          const res = rawDOMAppendOrInsertBefore.call(this, element, refChild);\n          execHooks(plugins, \"appendOrInsertElementHook\", element, iframe.contentWindow);\n          return res;\n        }\n        default:\n      }\n    }\n  };\n}\n\nfunction findScriptElementFromIframe(rawElement: HTMLScriptElement, wujieId: string) {\n  const wujieTag = getTagFromScript(rawElement);\n  const sandbox = getWujieById(wujieId);\n  const { iframe } = sandbox;\n  const targetScript = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.querySelector(\n    `script[${WUJIE_SCRIPT_ID}='${wujieTag}']`\n  );\n  if (targetScript === null) {\n    warn(WUJIE_TIPS_NO_SCRIPT, `<script ${WUJIE_SCRIPT_ID}='${wujieTag}'/>`);\n  }\n  return { targetScript, iframe };\n}\n\nfunction rewriteContains(opts: { rawElementContains: (other: Node | null) => boolean; wujieId: string }) {\n  return function contains(other: Node | null) {\n    const element = other as HTMLElement;\n    const { rawElementContains, wujieId } = opts;\n    if (element && isScriptElement(element)) {\n      const { targetScript } = findScriptElementFromIframe(element as HTMLScriptElement, wujieId);\n      return targetScript !== null;\n    }\n    return rawElementContains(element);\n  };\n}\n\nfunction rewriteRemoveChild(opts: { rawElementRemoveChild: <T extends Node>(child: T) => T; wujieId: string }) {\n  return function removeChild(child: Node) {\n    const element = child as HTMLElement;\n    const { rawElementRemoveChild, wujieId } = opts;\n    if (element && isScriptElement(element)) {\n      const { targetScript, iframe } = findScriptElementFromIframe(element as HTMLScriptElement, wujieId);\n      if (targetScript !== null) {\n        return iframe.contentWindow.__WUJIE_RAW_DOCUMENT_HEAD__.removeChild(targetScript);\n      }\n      return null;\n    }\n    return rawElementRemoveChild(element);\n  };\n}\n\n/**\n * 记录head和body的事件，等重新渲染复用head和body时需要清空事件\n */\nfunction patchEventListener(element: HTMLHeadElement | HTMLBodyElement) {\n  const listenerMap = new Map<string, EventListenerOrEventListenerObject[]>();\n  element._cacheListeners = listenerMap;\n\n  element.addEventListener = (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ) => {\n    const listeners = listenerMap.get(type) || [];\n    listenerMap.set(type, [...listeners, listener]);\n    return rawAddEventListener.call(element, type, listener, options);\n  };\n\n  element.removeEventListener = (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ) => {\n    const typeListeners = listenerMap.get(type);\n    const index = typeListeners?.indexOf(listener);\n    if (typeListeners?.length && index !== -1) {\n      typeListeners.splice(index, 1);\n    }\n    return rawRemoveEventListener.call(element, type, listener, options);\n  };\n}\n\n/**\n * 清空head和body的绑定的事件\n */\nexport function removeEventListener(element: HTMLHeadElement | HTMLBodyElement) {\n  const listenerMap = element._cacheListeners;\n  [...listenerMap.entries()].forEach(([type, listeners]) => {\n    listeners.forEach((listener) => rawRemoveEventListener.call(element, type, listener));\n  });\n}\n\n/**\n * patch head and body in render\n * intercept appendChild and insertBefore\n */\nexport function patchRenderEffect(render: ShadowRoot | Document, id: string, degrade: boolean): void {\n  // 降级场景dom渲染在iframe中，iframe移动后事件自动销毁，不需要记录\n  if (!degrade) {\n    patchEventListener(render.head);\n    patchEventListener(render.body as HTMLBodyElement);\n  }\n\n  render.head.appendChild = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawAppendChild,\n    wujieId: id,\n  }) as typeof rawAppendChild;\n  render.head.insertBefore = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawHeadInsertBefore as any,\n    wujieId: id,\n  }) as typeof rawHeadInsertBefore;\n  render.head.removeChild = rewriteRemoveChild({\n    rawElementRemoveChild: rawElementRemoveChild.bind(render.head),\n    wujieId: id,\n  }) as typeof rawElementRemoveChild;\n  render.head.contains = rewriteContains({\n    rawElementContains: rawElementContains.bind(render.head),\n    wujieId: id,\n  }) as typeof rawElementContains;\n  render.contains = rewriteContains({\n    rawElementContains: rawElementContains.bind(render),\n    wujieId: id,\n  }) as typeof rawElementContains;\n  render.body.appendChild = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawAppendChild,\n    wujieId: id,\n  }) as typeof rawAppendChild;\n  render.body.insertBefore = rewriteAppendOrInsertChild({\n    rawDOMAppendOrInsertBefore: rawBodyInsertBefore as any,\n    wujieId: id,\n  }) as typeof rawBodyInsertBefore;\n}\n","import {\n  WUJIE_APP_ID,\n  WUJIE_IFRAME_CLASS,\n  WUJIE_SHADE_STYLE,\n  CONTAINER_POSITION_DATA_FLAG,\n  CONTAINER_OVERFLOW_DATA_FLAG,\n  LOADING_DATA_FLAG,\n  WUJIE_LOADING_STYLE,\n  WUJIE_LOADING_SVG,\n} from \"./constant\";\nimport {\n  getWujieById,\n  rawAppendChild,\n  rawElementAppendChild,\n  rawElementRemoveChild,\n  relativeElementTagAttrMap,\n} from \"./common\";\nimport { getExternalStyleSheets } from \"./entry\";\nimport Wujie from \"./sandbox\";\nimport { patchElementEffect } from \"./iframe\";\nimport { patchRenderEffect } from \"./effect\";\nimport { getCssLoader, getPresetLoaders } from \"./plugin\";\nimport { getAbsolutePath, getContainer, getCurUrl, setAttrsToElement } from \"./utils\";\n\nconst cssSelectorMap = {\n  \":root\": \":host\",\n};\n\ndeclare global {\n  interface ShadowRoot {\n    head: HTMLHeadElement;\n    body: HTMLBodyElement;\n  }\n}\n\n/**\n * 定义 wujie webComponent，将shadow包裹并获得dom装载和卸载的生命周期\n */\nexport function defineWujieWebComponent() {\n  const customElements = window.customElements;\n  if (customElements && !customElements?.get(\"wujie-app\")) {\n    class WujieApp extends HTMLElement {\n      connectedCallback(): void {\n        if (this.shadowRoot) return;\n        const shadowRoot = this.attachShadow({ mode: \"open\" });\n        const sandbox = getWujieById(this.getAttribute(WUJIE_APP_ID));\n        patchElementEffect(shadowRoot, sandbox.iframe.contentWindow);\n        sandbox.shadowRoot = shadowRoot;\n      }\n\n      disconnectedCallback(): void {\n        const sandbox = getWujieById(this.getAttribute(WUJIE_APP_ID));\n        sandbox?.unmount();\n      }\n    }\n    customElements?.define(\"wujie-app\", WujieApp);\n  }\n}\n\nexport function createWujieWebComponent(id: string): HTMLElement {\n  const contentElement = window.document.createElement(\"wujie-app\");\n  contentElement.setAttribute(WUJIE_APP_ID, id);\n  contentElement.classList.add(WUJIE_IFRAME_CLASS);\n  return contentElement;\n}\n\n/**\n * 将准备好的内容插入容器\n */\nexport function renderElementToContainer(\n  element: Element | ChildNode,\n  selectorOrElement: string | HTMLElement\n): HTMLElement {\n  const container = getContainer(selectorOrElement);\n  if (container && !container.contains(element)) {\n    // 有 loading 无需清理，已经清理过了\n    if (!container.querySelector(`div[${LOADING_DATA_FLAG}]`)) {\n      // 清除内容\n      clearChild(container);\n    }\n    // 插入元素\n    if (element) {\n      rawElementAppendChild.call(container, element);\n    }\n  }\n  return container;\n}\n\n/**\n * 将降级的iframe挂在到容器上并进行初始化\n */\nexport function initRenderIframeAndContainer(\n  id: string,\n  parent: string | HTMLElement,\n  degradeAttrs: { [key: string]: any } = {}\n): { iframe: HTMLIFrameElement; container: HTMLElement } {\n  const iframe = createIframeContainer(id, degradeAttrs);\n  const container = renderElementToContainer(iframe, parent);\n  const contentDocument = iframe.contentWindow.document;\n  contentDocument.open();\n  contentDocument.write(\"<!DOCTYPE html><html><head></head><body></body></html>\");\n  contentDocument.close();\n  return { iframe, container };\n}\n\n/**\n * 处理css-before-loader 以及 css-after-loader\n */\nasync function processCssLoaderForTemplate(sandbox: Wujie, html: HTMLHtmlElement): Promise<HTMLHtmlElement> {\n  const document = sandbox.iframe.contentDocument;\n  const { plugins, replace, proxyLocation } = sandbox;\n  const cssLoader = getCssLoader({ plugins, replace });\n  const cssBeforeLoaders = getPresetLoaders(\"cssBeforeLoaders\", plugins);\n  const cssAfterLoaders = getPresetLoaders(\"cssAfterLoaders\", plugins);\n  const curUrl = getCurUrl(proxyLocation);\n\n  return await Promise.all([\n    Promise.all(\n      getExternalStyleSheets(cssBeforeLoaders, sandbox.fetch, sandbox.lifecycles.loadError).map(\n        ({ src, contentPromise }) => contentPromise.then((content) => ({ src, content }))\n      )\n    ).then((contentList) => {\n      contentList.forEach(({ src, content }) => {\n        if (!content) return;\n        const styleElement = document.createElement(\"style\");\n        styleElement.setAttribute(\"type\", \"text/css\");\n        styleElement.appendChild(document.createTextNode(content ? cssLoader(content, src, curUrl) : content));\n        const head = html.querySelector(\"head\");\n        const body = html.querySelector(\"body\");\n        html.insertBefore(styleElement, head || body || html.firstChild);\n      });\n    }),\n    Promise.all(\n      getExternalStyleSheets(cssAfterLoaders, sandbox.fetch, sandbox.lifecycles.loadError).map(\n        ({ src, contentPromise }) => contentPromise.then((content) => ({ src, content }))\n      )\n    ).then((contentList) => {\n      contentList.forEach(({ src, content }) => {\n        if (!content) return;\n        const styleElement = document.createElement(\"style\");\n        styleElement.setAttribute(\"type\", \"text/css\");\n        styleElement.appendChild(document.createTextNode(content ? cssLoader(content, src, curUrl) : content));\n        html.appendChild(styleElement);\n      });\n    }),\n  ]).then(\n    () => html,\n    () => html\n  );\n}\n\n// 替换html的head和body\nfunction replaceHeadAndBody(html: HTMLHtmlElement, head: HTMLHeadElement, body: HTMLBodyElement): HTMLHtmlElement {\n  const headElement = html.querySelector(\"head\");\n  const bodyElement = html.querySelector(\"body\");\n  if (headElement) {\n    while (headElement.firstChild) {\n      rawAppendChild.call(head, headElement.firstChild.cloneNode(true));\n      headElement.removeChild(headElement.firstChild);\n    }\n    headElement.parentNode.replaceChild(head, headElement);\n  }\n  if (bodyElement) {\n    while (bodyElement.firstChild) {\n      rawAppendChild.call(body, bodyElement.firstChild.cloneNode(true));\n      bodyElement.removeChild(bodyElement.firstChild);\n    }\n    bodyElement.parentNode.replaceChild(body, bodyElement);\n  }\n  return html;\n}\n\n/**\n * 将template渲染成html元素\n */\nfunction renderTemplateToHtml(iframeWindow: Window, template: string): HTMLHtmlElement {\n  const sandbox = iframeWindow.__WUJIE;\n  const { head, body, alive, execFlag } = sandbox;\n  const document = iframeWindow.document;\n  let html = document.createElement(\"html\");\n  html.innerHTML = template;\n  // 组件多次渲染，head和body必须一直使用同一个来应对被缓存的场景\n  if (!alive && execFlag) {\n    html = replaceHeadAndBody(html, head, body);\n  } else {\n    sandbox.head = html.querySelector(\"head\");\n    sandbox.body = html.querySelector(\"body\");\n  }\n  const ElementIterator = document.createTreeWalker(html, NodeFilter.SHOW_ELEMENT, null, false);\n  let nextElement = ElementIterator.currentNode as HTMLElement;\n  while (nextElement) {\n    patchElementEffect(nextElement, iframeWindow);\n    const relativeAttr = relativeElementTagAttrMap[nextElement.tagName];\n    const url = nextElement[relativeAttr];\n    if (relativeAttr) nextElement.setAttribute(relativeAttr, getAbsolutePath(url, nextElement.baseURI || \"\"));\n    nextElement = ElementIterator.nextNode() as HTMLElement;\n  }\n  if (!html.querySelector(\"head\")) {\n    const head = document.createElement(\"head\");\n    html.appendChild(head);\n  }\n  if (!html.querySelector(\"body\")) {\n    const body = document.createElement(\"body\");\n    html.appendChild(body);\n  }\n  return html;\n}\n\n/**\n * 将template渲染到shadowRoot\n */\nexport async function renderTemplateToShadowRoot(\n  shadowRoot: ShadowRoot,\n  iframeWindow: Window,\n  template: string\n): Promise<void> {\n  const html = renderTemplateToHtml(iframeWindow, template);\n  // 处理 css-before-loader 和 css-after-loader\n  const processedHtml = await processCssLoaderForTemplate(iframeWindow.__WUJIE, html);\n  // change ownerDocument\n  shadowRoot.appendChild(processedHtml);\n  const shade = document.createElement(\"div\");\n  shade.setAttribute(\"style\", WUJIE_SHADE_STYLE);\n  processedHtml.insertBefore(shade, processedHtml.firstChild);\n  shadowRoot.head = shadowRoot.querySelector(\"head\");\n  shadowRoot.body = shadowRoot.querySelector(\"body\");\n\n  // 修复 html parentNode\n  Object.defineProperty(shadowRoot.firstChild, \"parentNode\", {\n    enumerable: true,\n    configurable: true,\n    get: () => iframeWindow.document,\n  });\n\n  patchRenderEffect(shadowRoot, iframeWindow.__WUJIE.id, false);\n}\n\nexport function createIframeContainer(id: string, degradeAttrs: { [key: string]: any } = {}): HTMLIFrameElement {\n  const iframe = document.createElement(\"iframe\");\n  const defaultStyle = \"height:100%;width:100%\";\n  setAttrsToElement(iframe, {\n    ...degradeAttrs,\n    style: [defaultStyle, degradeAttrs.style].join(\";\"),\n    [WUJIE_APP_ID]: id,\n  });\n  return iframe;\n}\n\n/**\n * 将template渲染到iframe\n */\nexport async function renderTemplateToIframe(\n  renderDocument: Document,\n  iframeWindow: Window,\n  template: string\n): Promise<void> {\n  // 插入template\n  const html = renderTemplateToHtml(iframeWindow, template);\n  // 处理 css-before-loader 和 css-after-loader\n  const processedHtml = await processCssLoaderForTemplate(iframeWindow.__WUJIE, html);\n  renderDocument.replaceChild(processedHtml, renderDocument.documentElement);\n\n  // 修复 html parentNode\n  Object.defineProperty(renderDocument.documentElement, \"parentNode\", {\n    enumerable: true,\n    configurable: true,\n    get: () => iframeWindow.document,\n  });\n\n  patchRenderEffect(renderDocument, iframeWindow.__WUJIE.id, true);\n}\n\n/**\n * 清除Element所有节点\n */\nexport function clearChild(root: ShadowRoot | Node): void {\n  // 清除内容\n  while (root?.firstChild) {\n    rawElementRemoveChild.call(root, root.firstChild);\n  }\n}\n\n/**\n * 给容器添加loading\n */\nexport function addLoading(el: string | HTMLElement, loading: HTMLElement): void {\n  const container = getContainer(el);\n  clearChild(container);\n  // 给容器设置一些样式，防止 loading 抖动\n  let containerStyles = null;\n  try {\n    containerStyles = window.getComputedStyle(container);\n  } catch {\n    return;\n  }\n  if (containerStyles.position === \"static\") {\n    container.setAttribute(CONTAINER_POSITION_DATA_FLAG, containerStyles.position);\n    container.setAttribute(\n      CONTAINER_OVERFLOW_DATA_FLAG,\n      containerStyles.overflow === \"visible\" ? \"\" : containerStyles.overflow\n    );\n    container.style.setProperty(\"position\", \"relative\");\n    container.style.setProperty(\"overflow\", \"hidden\");\n  } else if ([\"relative\", \"sticky\"].includes(containerStyles.position)) {\n    container.setAttribute(\n      CONTAINER_OVERFLOW_DATA_FLAG,\n      containerStyles.overflow === \"visible\" ? \"\" : containerStyles.overflow\n    );\n    container.style.setProperty(\"overflow\", \"hidden\");\n  }\n  const loadingContainer = document.createElement(\"div\");\n  loadingContainer.setAttribute(LOADING_DATA_FLAG, \"\");\n  loadingContainer.setAttribute(\"style\", WUJIE_LOADING_STYLE);\n  if (loading) loadingContainer.appendChild(loading);\n  else loadingContainer.innerHTML = WUJIE_LOADING_SVG;\n  container.appendChild(loadingContainer);\n}\n/**\n * 移除loading\n */\nexport function removeLoading(el: HTMLElement): void {\n  // 去除容器设置的样式\n  const positionFlag = el.getAttribute(CONTAINER_POSITION_DATA_FLAG);\n  const overflowFlag = el.getAttribute(CONTAINER_OVERFLOW_DATA_FLAG);\n  if (positionFlag) el.style.removeProperty(\"position\");\n  if (overflowFlag !== null) {\n    overflowFlag ? el.style.setProperty(\"overflow\", overflowFlag) : el.style.removeProperty(\"overflow\");\n  }\n  el.removeAttribute(CONTAINER_POSITION_DATA_FLAG);\n  el.removeAttribute(CONTAINER_OVERFLOW_DATA_FLAG);\n  const loadingContainer = el.querySelector(`div[${LOADING_DATA_FLAG}]`);\n  loadingContainer && el.removeChild(loadingContainer);\n}\n/**\n * 获取修复好的样式元素\n * 主要是针对对root样式和font-face样式\n */\nexport function getPatchStyleElements(rootStyleSheets: Array<CSSStyleSheet>): Array<HTMLStyleElement | null> {\n  const rootCssRules = [];\n  const fontCssRules = [];\n  const rootStyleReg = /:root/g;\n\n  // 找出root的cssRules\n  for (let i = 0; i < rootStyleSheets.length; i++) {\n    const cssRules = rootStyleSheets[i]?.cssRules ?? [];\n    for (let j = 0; j < cssRules.length; j++) {\n      const cssRuleText = cssRules[j].cssText;\n      // 如果是root的cssRule\n      if (rootStyleReg.test(cssRuleText)) {\n        rootCssRules.push(cssRuleText.replace(rootStyleReg, (match) => cssSelectorMap[match]));\n      }\n      // 如果是font-face的cssRule\n      if (cssRules[j].type === CSSRule.FONT_FACE_RULE) {\n        fontCssRules.push(cssRuleText);\n      }\n    }\n  }\n\n  let rootStyleSheetElement = null;\n  let fontStyleSheetElement = null;\n\n  // 复制到host上\n  if (rootCssRules.length) {\n    rootStyleSheetElement = window.document.createElement(\"style\");\n    rootStyleSheetElement.innerHTML = rootCssRules.join(\"\");\n  }\n\n  if (fontCssRules.length) {\n    fontStyleSheetElement = window.document.createElement(\"style\");\n    fontStyleSheetElement.innerHTML = fontCssRules.join(\"\");\n  }\n\n  return [rootStyleSheetElement, fontStyleSheetElement];\n}\n","import { anchorElementGenerator, getAnchorElementQueryMap, getSyncUrl, appRouteParse, getDegradeIframe } from \"./utils\";\nimport { renderIframeReplaceApp, patchEventTimeStamp } from \"./iframe\";\nimport { renderElementToContainer, initRenderIframeAndContainer } from \"./shadow\";\nimport { getWujieById, rawDocumentQuerySelector } from \"./common\";\n\n/**\n * 同步子应用路由到主应用路由\n */\nexport function syncUrlToWindow(iframeWindow: Window): void {\n  const { sync, id, prefix } = iframeWindow.__WUJIE;\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  // 非同步且url上没有当前id的查询参数，否则就要同步参数或者清理参数\n  if (!sync && !queryMap[id]) return (winUrlElement = null);\n  const curUrl = iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n  let validShortPath = \"\";\n  // 处理短路径\n  if (prefix) {\n    Object.keys(prefix).forEach((shortPath) => {\n      const longPath = prefix[shortPath];\n      // 找出最长匹配路径\n      if (curUrl.startsWith(longPath) && (!validShortPath || longPath.length > prefix[validShortPath].length)) {\n        validShortPath = shortPath;\n      }\n    });\n  }\n  // 同步\n  if (sync) {\n    queryMap[id] = window.encodeURIComponent(\n      validShortPath ? curUrl.replace(prefix[validShortPath], `{${validShortPath}}`) : curUrl\n    );\n    // 清理\n  } else {\n    delete queryMap[id];\n  }\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  if (winUrlElement.href !== window.location.href) {\n    window.history.replaceState(null, \"\", winUrlElement.href);\n  }\n  winUrlElement = null;\n}\n\n/**\n * 同步主应用路由到子应用\n */\nexport function syncUrlToIframe(iframeWindow: Window): void {\n  // 获取当前路由路径\n  const { pathname, search, hash } = iframeWindow.location;\n  const { id, url, sync, execFlag, prefix, inject } = iframeWindow.__WUJIE;\n\n  // 只在浏览器刷新或者第一次渲染时同步\n  const idUrl = sync && !execFlag ? getSyncUrl(id, prefix) : url;\n  // 排除href跳转情况\n  const syncUrl = (/^http/.test(idUrl) ? null : idUrl) || url;\n  const { appRoutePath } = appRouteParse(syncUrl);\n\n  const preAppRoutePath = pathname + search + hash;\n  if (preAppRoutePath !== appRoutePath) {\n    iframeWindow.history.replaceState(null, \"\", inject.mainHostPath + appRoutePath);\n  }\n}\n\n/**\n * 清理非激活态的子应用同步参数\n * 主应用采用hash模式时，切换子应用后已销毁的子应用同步参数还存在需要手动清理\n */\nexport function clearInactiveAppUrl(): void {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  Object.keys(queryMap).forEach((id) => {\n    const sandbox = getWujieById(id);\n    if (!sandbox) return;\n    // 子应用执行过并且已经失活才需要清除\n    if (sandbox.execFlag && sandbox.sync && !sandbox.hrefFlag && !sandbox.activeFlag) {\n      delete queryMap[id];\n    }\n  });\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  if (winUrlElement.href !== window.location.href) {\n    window.history.replaceState(null, \"\", winUrlElement.href);\n  }\n  winUrlElement = null;\n}\n\n/**\n * 推送指定url到主应用路由\n */\nexport function pushUrlToWindow(id: string, url: string): void {\n  let winUrlElement = anchorElementGenerator(window.location.href);\n  const queryMap = getAnchorElementQueryMap(winUrlElement);\n  queryMap[id] = window.encodeURIComponent(url);\n  const newQuery =\n    \"?\" +\n    Object.keys(queryMap)\n      .map((key) => key + \"=\" + queryMap[key])\n      .join(\"&\");\n  winUrlElement.search = newQuery;\n  window.history.pushState(null, \"\", winUrlElement.href);\n  winUrlElement = null;\n}\n\n/**\n * 应用跳转(window.location.href)情况路由处理\n */\nexport function processAppForHrefJump(): void {\n  window.addEventListener(\"popstate\", () => {\n    let winUrlElement = anchorElementGenerator(window.location.href);\n    const queryMap = getAnchorElementQueryMap(winUrlElement);\n    winUrlElement = null;\n    Object.keys(queryMap)\n      .map((id) => getWujieById(id))\n      .filter((sandbox) => sandbox)\n      .forEach((sandbox) => {\n        const url = queryMap[sandbox.id];\n        const iframeBody = rawDocumentQuerySelector.call(sandbox.iframe.contentDocument, \"body\");\n        // 前进href\n        if (/http/.test(url)) {\n          if (sandbox.degrade) {\n            renderElementToContainer(sandbox.document.documentElement, iframeBody);\n            renderIframeReplaceApp(\n              window.decodeURIComponent(url),\n              getDegradeIframe(sandbox.id).parentElement,\n              sandbox.degradeAttrs\n            );\n          } else\n            renderIframeReplaceApp(\n              window.decodeURIComponent(url),\n              sandbox.shadowRoot.host.parentElement,\n              sandbox.degradeAttrs\n            );\n          sandbox.hrefFlag = true;\n          // href后退\n        } else if (sandbox.hrefFlag) {\n          if (sandbox.degrade) {\n            // 走全套流程，但是事件恢复不需要\n            const { iframe } = initRenderIframeAndContainer(sandbox.id, sandbox.el, sandbox.degradeAttrs);\n            patchEventTimeStamp(iframe.contentWindow, sandbox.iframe.contentWindow);\n            iframe.contentWindow.onunload = () => {\n              sandbox.unmount();\n            };\n            iframe.contentDocument.appendChild(iframeBody.firstElementChild);\n            sandbox.document = iframe.contentDocument;\n          } else renderElementToContainer(sandbox.shadowRoot.host, sandbox.el);\n          sandbox.hrefFlag = false;\n        }\n      });\n  });\n}\n","import WuJie from \"./sandbox\";\nimport { ScriptObject } from \"./template\";\nimport { renderElementToContainer } from \"./shadow\";\nimport { syncUrlToWindow } from \"./sync\";\nimport {\n  fixElementCtrSrcOrHref,\n  isConstructable,\n  anchorElementGenerator,\n  isMatchSyncQueryById,\n  warn,\n  error,\n  execHooks,\n  getCurUrl,\n  getAbsolutePath,\n  setAttrsToElement,\n  setTagToScript,\n  getTagFromScript,\n} from \"./utils\";\nimport {\n  documentProxyProperties,\n  rawAddEventListener,\n  rawRemoveEventListener,\n  rawDocumentQuerySelector,\n  mainDocumentAddEventListenerEvents,\n  mainAndAppAddEventListenerEvents,\n  appDocumentAddEventListenerEvents,\n  appDocumentOnEvents,\n  appWindowAddEventListenerEvents,\n  appWindowOnEvent,\n  windowProxyProperties,\n  windowRegWhiteList,\n  rawWindowAddEventListener,\n  rawWindowRemoveEventListener,\n} from \"./common\";\nimport type { appAddEventListenerOptions } from \"./common\";\nimport { getJsLoader } from \"./plugin\";\nimport { WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, WUJIE_DATA_FLAG } from \"./constant\";\nimport { ScriptObjectLoader } from \"./index\";\n\ndeclare global {\n  interface Window {\n    // 是否存在无界\n    __POWERED_BY_WUJIE__?: boolean;\n    // 子应用公共加载路径\n    __WUJIE_PUBLIC_PATH__: string;\n    // 原生的querySelector\n    __WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__: typeof Document.prototype.querySelector;\n\n    // iframe内原生的createElement\n    __WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__: typeof Document.prototype.createElement;\n\n    // iframe内原生的createTextNode\n    __WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__: typeof Document.prototype.createTextNode;\n\n    // iframe内原生的head\n    __WUJIE_RAW_DOCUMENT_HEAD__: typeof Document.prototype.head;\n\n    // 原生的querySelector\n    __WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__: typeof Document.prototype.querySelectorAll;\n    // 原生的window对象\n    __WUJIE_RAW_WINDOW__: Window;\n    // 子应用沙盒实例\n    __WUJIE: WuJie;\n    // 子应用mount函数\n    __WUJIE_MOUNT: () => void;\n    // 子应用unmount函数\n    __WUJIE_UNMOUNT: () => void;\n    // document type\n    Document: typeof Document;\n    // img type\n    HTMLImageElement: typeof HTMLImageElement;\n    // node type\n    Node: typeof Node;\n    // element type\n    Element: typeof Element;\n    // htmlElement typeof\n    HTMLElement: typeof HTMLElement;\n    // anchor type\n    HTMLAnchorElement: typeof HTMLAnchorElement;\n    // source type\n    HTMLSourceElement: typeof HTMLSourceElement;\n    // link type\n    HTMLLinkElement: typeof HTMLLinkElement;\n    // script type\n    HTMLScriptElement: typeof HTMLScriptElement;\n    // media type\n    HTMLMediaElement: typeof HTMLMediaElement;\n    EventTarget: typeof EventTarget;\n    Event: typeof Event;\n    ShadowRoot: typeof ShadowRoot;\n    // 注入对象\n    $wujie: { [key: string]: any };\n  }\n  interface HTMLHeadElement {\n    _cacheListeners: Map<string, EventListenerOrEventListenerObject[]>;\n  }\n  interface HTMLBodyElement {\n    _cacheListeners: Map<string, EventListenerOrEventListenerObject[]>;\n  }\n  interface Document {\n    createTreeWalker(\n      root: Node,\n      whatToShow?: number,\n      filter?: NodeFilter | null,\n      entityReferenceExpansion?: boolean\n    ): TreeWalker;\n  }\n}\n\n/**\n * 修改window对象的事件监听，只有路由事件采用iframe的事件\n */\nfunction patchIframeEvents(iframeWindow: Window) {\n  iframeWindow.addEventListener = function addEventListener<K extends keyof WindowEventMap>(\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    options?: boolean | appAddEventListenerOptions\n  ) {\n    // 运行插件钩子函数\n    execHooks(iframeWindow.__WUJIE.plugins, \"windowAddEventListenerHook\", iframeWindow, type, listener, options);\n\n    if (appWindowAddEventListenerEvents.includes(type) || (typeof options === \"object\" && options.targetWindow)) {\n      const targetWindow = typeof options === \"object\" && options.targetWindow ? options?.targetWindow : iframeWindow;\n      return rawWindowAddEventListener.call(targetWindow, type, listener, options);\n    }\n    // 在子应用嵌套场景使用window.window获取真实window\n    rawWindowAddEventListener.call(window.__WUJIE_RAW_WINDOW__ || window, type, listener, options);\n  };\n\n  iframeWindow.removeEventListener = function removeEventListener<K extends keyof WindowEventMap>(\n    type: K,\n    listener: (this: Window, ev: WindowEventMap[K]) => any,\n    options?: boolean | appAddEventListenerOptions\n  ) {\n    // 运行插件钩子函数\n    execHooks(iframeWindow.__WUJIE.plugins, \"windowRemoveEventListenerHook\", iframeWindow, type, listener, options);\n\n    if (appWindowAddEventListenerEvents.includes(type) || (typeof options === \"object\" && options.targetWindow)) {\n      const targetWindow = typeof options === \"object\" && options.targetWindow ? options?.targetWindow : iframeWindow;\n      return rawWindowRemoveEventListener.call(targetWindow, type, listener, options);\n    }\n    rawWindowRemoveEventListener.call(window.__WUJIE_RAW_WINDOW__ || window, type, listener, options);\n  };\n}\n\nfunction patchIframeVariable(iframeWindow: Window, wujie: WuJie, appHostPath: string): void {\n  iframeWindow.__WUJIE = wujie;\n  iframeWindow.__WUJIE_PUBLIC_PATH__ = appHostPath + \"/\";\n  iframeWindow.$wujie = wujie.provide;\n  iframeWindow.__WUJIE_RAW_WINDOW__ = iframeWindow;\n}\n\n/**\n * 对iframe的history的pushState和replaceState进行修改\n * 将从location劫持后的数据修改回来，防止跨域错误\n * 同步路由到主应用\n * @param iframeWindow\n * @param appHostPath 子应用的 host path\n * @param mainHostPath 主应用的 host path\n */\nfunction patchIframeHistory(iframeWindow: Window, appHostPath: string, mainHostPath: string): void {\n  const history = iframeWindow.history;\n  const rawHistoryPushState = history.pushState;\n  const rawHistoryReplaceState = history.replaceState;\n  history.pushState = function (data: any, title: string, url?: string): void {\n    const baseUrl =\n      mainHostPath + iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n    const mainUrl = getAbsolutePath(url?.replace(appHostPath, \"\"), baseUrl);\n    const ignoreFlag = url === undefined;\n\n    rawHistoryPushState.call(history, data, title, ignoreFlag ? undefined : mainUrl);\n    if (ignoreFlag) return;\n    updateBase(iframeWindow, appHostPath, mainHostPath);\n    syncUrlToWindow(iframeWindow);\n  };\n  history.replaceState = function (data: any, title: string, url?: string): void {\n    const baseUrl =\n      mainHostPath + iframeWindow.location.pathname + iframeWindow.location.search + iframeWindow.location.hash;\n    const mainUrl = getAbsolutePath(url?.replace(appHostPath, \"\"), baseUrl);\n    const ignoreFlag = url === undefined;\n\n    rawHistoryReplaceState.call(history, data, title, ignoreFlag ? undefined : mainUrl);\n    if (ignoreFlag) return;\n    updateBase(iframeWindow, appHostPath, mainHostPath);\n    syncUrlToWindow(iframeWindow);\n  };\n}\n\n/**\n * 动态的修改iframe的base地址\n * @param iframeWindow\n * @param appHostPath\n * @param mainHostPath\n */\nfunction updateBase(iframeWindow: Window, appHostPath: string, mainHostPath: string) {\n  const baseUrl = new URL(iframeWindow.location.href?.replace(mainHostPath, \"\"), appHostPath);\n  const baseElement = rawDocumentQuerySelector.call(iframeWindow.document, \"base\");\n  if (baseElement) baseElement.setAttribute(\"href\", appHostPath + baseUrl.pathname);\n}\n\n/**\n * patch iframe window effect\n * @param iframeWindow\n */\n// TODO 继续改进\nfunction patchWindowEffect(iframeWindow: Window): void {\n  // 属性处理函数\n  function processWindowProperty(key: string): boolean {\n    const value = iframeWindow[key];\n    try {\n      if (typeof value === \"function\" && !isConstructable(value)) {\n        iframeWindow[key] = window[key].bind(window);\n      } else {\n        iframeWindow[key] = window[key];\n      }\n      return true;\n    } catch (e) {\n      warn(e.message);\n      return false;\n    }\n  }\n  Object.getOwnPropertyNames(iframeWindow).forEach((key) => {\n    // 特殊处理\n    if (key === \"getSelection\") {\n      Object.defineProperty(iframeWindow, key, {\n        get: () => iframeWindow.document[key],\n      });\n      return;\n    }\n    // 单独属性\n    if (windowProxyProperties.includes(key)) {\n      processWindowProperty(key);\n      return;\n    }\n    // 正则匹配，可以一次处理多个\n    windowRegWhiteList.some((reg) => {\n      if (reg.test(key) && key in iframeWindow.parent) {\n        return processWindowProperty(key);\n      }\n      return false;\n    });\n  });\n  // onEvent set\n  const windowOnEvents = Object.getOwnPropertyNames(window)\n    .filter((p) => /^on/.test(p))\n    .filter((e) => !appWindowOnEvent.includes(e));\n\n  // 走主应用window\n  windowOnEvents.forEach((e) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow, e) || {\n      enumerable: true,\n      writable: true,\n    };\n    try {\n      Object.defineProperty(iframeWindow, e, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => window[e],\n        set:\n          descriptor.writable || descriptor.set\n            ? (handler) => {\n                window[e] = typeof handler === \"function\" ? handler.bind(iframeWindow) : handler;\n              }\n            : undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // 运行插件钩子函数\n  execHooks(iframeWindow.__WUJIE.plugins, \"windowPropertyOverride\", iframeWindow);\n}\n\n/**\n * 记录节点的监听事件\n */\nfunction recordEventListeners(iframeWindow: Window) {\n  const sandbox = iframeWindow.__WUJIE;\n  iframeWindow.Node.prototype.addEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    // 添加事件缓存\n    const elementListenerList = sandbox.elementEventCacheMap.get(this);\n    if (elementListenerList) {\n      if (!elementListenerList.find((listener) => listener.handler === handler)) {\n        elementListenerList.push({ type, handler, options });\n      }\n    } else sandbox.elementEventCacheMap.set(this, [{ type, handler, options }]);\n    return rawAddEventListener.call(this, type, handler, options);\n  };\n\n  iframeWindow.Node.prototype.removeEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions\n  ): void {\n    // 清除缓存\n    const elementListenerList = sandbox.elementEventCacheMap.get(this);\n    if (elementListenerList) {\n      const index = elementListenerList?.findIndex((ele) => ele.handler === handler);\n      elementListenerList.splice(index, 1);\n    }\n    if (!elementListenerList?.length) {\n      sandbox.elementEventCacheMap.delete(this);\n    }\n    return rawRemoveEventListener.call(this, type, handler, options);\n  };\n}\n\n/**\n * 恢复节点的监听事件\n */\nexport function recoverEventListeners(rootElement: Element | ChildNode, iframeWindow: Window) {\n  const sandbox = iframeWindow.__WUJIE;\n  const elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n  const ElementIterator = document.createTreeWalker(rootElement, NodeFilter.SHOW_ELEMENT, null, false);\n  let nextElement = ElementIterator.currentNode;\n  while (nextElement) {\n    const elementListenerList = sandbox.elementEventCacheMap.get(nextElement);\n    if (elementListenerList?.length) {\n      elementEventCacheMap.set(nextElement, elementListenerList);\n      elementListenerList.forEach((listener) => {\n        nextElement.addEventListener(listener.type, listener.handler, listener.options);\n      });\n    }\n    nextElement = ElementIterator.nextNode() as HTMLElement;\n  }\n  sandbox.elementEventCacheMap = elementEventCacheMap;\n}\n\n/**\n * 恢复根节点的监听事件\n */\nexport function recoverDocumentListeners(\n  oldRootElement: Element | ChildNode,\n  newRootElement: Element | ChildNode,\n  iframeWindow: Window\n) {\n  const sandbox = iframeWindow.__WUJIE;\n  const elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n  const elementListenerList = sandbox.elementEventCacheMap.get(oldRootElement);\n  if (elementListenerList?.length) {\n    elementEventCacheMap.set(newRootElement, elementListenerList);\n    elementListenerList.forEach((listener) => {\n      newRootElement.addEventListener(listener.type, listener.handler, listener.options);\n    });\n  }\n  sandbox.elementEventCacheMap = elementEventCacheMap;\n}\n\n/**\n * 修复vue绑定事件e.timeStamp < attachedTimestamp 的情况\n */\nexport function patchEventTimeStamp(targetWindow: Window, iframeWindow: Window) {\n  Object.defineProperty(targetWindow.Event.prototype, \"timeStamp\", {\n    get: () => {\n      return iframeWindow.document.createEvent(\"Event\").timeStamp;\n    },\n  });\n}\n\n/**\n * patch document effect\n * @param iframeWindow\n */\n// TODO 继续改进\nfunction patchDocumentEffect(iframeWindow: Window): void {\n  const sandbox = iframeWindow.__WUJIE;\n\n  /**\n   * 处理 addEventListener和removeEventListener\n   * 由于这个劫持导致 handler 的this发生改变，所以需要handler.bind(document)\n   * 但是这样会导致removeEventListener无法正常工作，因为handler => handler.bind(document)\n   * 这个地方保存callback = handler.bind(document) 方便removeEventListener\n   */\n  const handlerCallbackMap: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject> =\n    new WeakMap();\n  const handlerTypeMap: WeakMap<EventListenerOrEventListenerObject, Array<string>> = new WeakMap();\n  iframeWindow.Document.prototype.addEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    if (!handler) return;\n    let callback = handlerCallbackMap.get(handler);\n    const typeList = handlerTypeMap.get(handler);\n    // 设置 handlerCallbackMap\n    if (!callback) {\n      callback = typeof handler === \"function\" ? handler.bind(this) : handler;\n      handlerCallbackMap.set(handler, callback);\n    }\n    // 设置 handlerTypeMap\n    if (typeList) {\n      if (!typeList.includes(type)) typeList.push(type);\n    } else {\n      handlerTypeMap.set(handler, [type]);\n    }\n\n    // 运行插件钩子函数\n    execHooks(iframeWindow.__WUJIE.plugins, \"documentAddEventListenerHook\", iframeWindow, type, callback, options);\n    if (appDocumentAddEventListenerEvents.includes(type)) {\n      return rawAddEventListener.call(this, type, callback, options);\n    }\n    // 降级统一走 sandbox.document\n    if (sandbox.degrade) return sandbox.document.addEventListener(type, callback, options);\n    if (mainDocumentAddEventListenerEvents.includes(type))\n      return window.document.addEventListener(type, callback, options);\n    if (mainAndAppAddEventListenerEvents.includes(type)) {\n      window.document.addEventListener(type, callback, options);\n      sandbox.shadowRoot.addEventListener(type, callback, options);\n      return;\n    }\n    sandbox.shadowRoot.addEventListener(type, callback, options);\n  };\n  iframeWindow.Document.prototype.removeEventListener = function (\n    type: string,\n    handler: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    const callback: EventListenerOrEventListenerObject = handlerCallbackMap.get(handler);\n    const typeList = handlerTypeMap.get(handler);\n    if (callback) {\n      if (typeList?.includes(type)) {\n        typeList.splice(typeList.indexOf(type), 1);\n        if (!typeList.length) {\n          handlerCallbackMap.delete(handler);\n          handlerTypeMap.delete(handler);\n        }\n      }\n\n      // 运行插件钩子函数\n      execHooks(iframeWindow.__WUJIE.plugins, \"documentRemoveEventListenerHook\", iframeWindow, type, callback, options);\n      if (appDocumentAddEventListenerEvents.includes(type)) {\n        return rawRemoveEventListener.call(this, type, callback, options);\n      }\n      if (sandbox.degrade) return sandbox.document.removeEventListener(type, callback, options);\n      if (mainDocumentAddEventListenerEvents.includes(type)) {\n        return window.document.removeEventListener(type, callback, options);\n      }\n      if (mainAndAppAddEventListenerEvents.includes(type)) {\n        window.document.removeEventListener(type, callback, options);\n        sandbox.shadowRoot.removeEventListener(type, callback, options);\n        return;\n      }\n      sandbox.shadowRoot.removeEventListener(type, callback, options);\n    }\n  };\n  // 处理onEvent\n  const elementOnEvents = Object.keys(iframeWindow.HTMLElement.prototype).filter((ele) => /^on/.test(ele));\n  const documentOnEvent = Object.keys(iframeWindow.Document.prototype)\n    .filter((ele) => /^on/.test(ele))\n    .filter((ele) => !appDocumentOnEvents.includes(ele));\n  elementOnEvents\n    .filter((e) => documentOnEvent.includes(e))\n    .forEach((e) => {\n      const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, e) || {\n        enumerable: true,\n        writable: true,\n      };\n      try {\n        Object.defineProperty(iframeWindow.Document.prototype, e, {\n          enumerable: descriptor.enumerable,\n          configurable: true,\n          get: () => (sandbox.degrade ? sandbox.document[e] : sandbox.shadowRoot.firstElementChild[e]),\n          set:\n            descriptor.writable || descriptor.set\n              ? (handler) => {\n                  const val = typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler;\n                  sandbox.degrade ? (sandbox.document[e] = val) : (sandbox.shadowRoot.firstElementChild[e] = val);\n                }\n              : undefined,\n        });\n      } catch (e) {\n        warn(e.message);\n      }\n    });\n  // 处理属性get\n  const {\n    ownerProperties,\n    modifyProperties,\n    shadowProperties,\n    shadowMethods,\n    documentProperties,\n    documentMethods,\n    documentEvents,\n  } = documentProxyProperties;\n  modifyProperties.concat(shadowProperties, shadowMethods, documentProperties, documentMethods).forEach((propKey) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, propKey) || {\n      enumerable: true,\n      writable: true,\n    };\n    try {\n      Object.defineProperty(iframeWindow.Document.prototype, propKey, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => sandbox.proxyDocument[propKey],\n        set: undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // 处理document专属事件\n  // TODO 内存泄露\n  documentEvents.forEach((propKey) => {\n    const descriptor = Object.getOwnPropertyDescriptor(iframeWindow.Document.prototype, propKey) || {\n      enumerable: true,\n      writable: true,\n    };\n    try {\n      Object.defineProperty(iframeWindow.Document.prototype, propKey, {\n        enumerable: descriptor.enumerable,\n        configurable: true,\n        get: () => (sandbox.degrade ? sandbox : window).document[propKey],\n        set:\n          descriptor.writable || descriptor.set\n            ? (handler) => {\n                (sandbox.degrade ? sandbox : window).document[propKey] =\n                  typeof handler === \"function\" ? handler.bind(iframeWindow.document) : handler;\n              }\n            : undefined,\n      });\n    } catch (e) {\n      warn(e.message);\n    }\n  });\n  // process owner property\n  ownerProperties.forEach((propKey) => {\n    Object.defineProperty(iframeWindow.document, propKey, {\n      enumerable: true,\n      configurable: true,\n      get: () => sandbox.proxyDocument[propKey],\n      set: undefined,\n    });\n  });\n  // 运行插件钩子函数\n  execHooks(iframeWindow.__WUJIE.plugins, \"documentPropertyOverride\", iframeWindow);\n}\n\n/**\n * patch Node effect\n * 1、处理 getRootNode\n * 2、处理 appendChild、insertBefore，当插入的节点为 svg 时，createElement 的 patch 会被去除，需要重新 patch\n * @param iframeWindow\n */\nfunction patchNodeEffect(iframeWindow: Window): void {\n  const rawGetRootNode = iframeWindow.Node.prototype.getRootNode;\n  const rawAppendChild = iframeWindow.Node.prototype.appendChild;\n  const rawInsertRule = iframeWindow.Node.prototype.insertBefore;\n  iframeWindow.Node.prototype.getRootNode = function (options?: GetRootNodeOptions): Node {\n    const rootNode = rawGetRootNode.call(this, options);\n    if (rootNode === iframeWindow.__WUJIE.shadowRoot) return iframeWindow.document;\n    else return rootNode;\n  };\n  iframeWindow.Node.prototype.appendChild = function <T extends Node>(node: T): T {\n    const res = rawAppendChild.call(this, node);\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n  iframeWindow.Node.prototype.insertBefore = function <T extends Node>(node: T, child: Node | null): T {\n    const res = rawInsertRule.call(this, node, child);\n    patchElementEffect(node, iframeWindow);\n    return res;\n  };\n}\n\n/**\n * 修复资源元素的相对路径问题\n * @param iframeWindow\n */\nfunction patchRelativeUrlEffect(iframeWindow: Window): void {\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLImageElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLAnchorElement, \"href\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLSourceElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLLinkElement, \"href\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLScriptElement, \"src\");\n  fixElementCtrSrcOrHref(iframeWindow, iframeWindow.HTMLMediaElement, \"src\");\n}\n\n/**\n * 初始化base标签\n */\nexport function initBase(iframeWindow: Window, url: string): void {\n  const iframeDocument = iframeWindow.document;\n  const baseElement = iframeDocument.createElement(\"base\");\n  const iframeUrlElement = anchorElementGenerator(iframeWindow.location.href);\n  const appUrlElement = anchorElementGenerator(url);\n  baseElement.setAttribute(\"href\", appUrlElement.protocol + \"//\" + appUrlElement.host + iframeUrlElement.pathname);\n  iframeDocument.head.appendChild(baseElement);\n}\n\n/**\n * 初始化iframe的dom结构\n * @param iframeWindow\n * @param wujie\n * @param mainHostPath\n * @param appHostPath\n */\nfunction initIframeDom(iframeWindow: Window, wujie: WuJie, mainHostPath: string, appHostPath: string): void {\n  const iframeDocument = iframeWindow.document;\n  const newDoc = window.document.implementation.createHTMLDocument(\"\");\n  const newDocumentElement = iframeDocument.importNode(newDoc.documentElement, true);\n  iframeDocument.documentElement\n    ? iframeDocument.replaceChild(newDocumentElement, iframeDocument.documentElement)\n    : iframeDocument.appendChild(newDocumentElement);\n  iframeWindow.__WUJIE_RAW_DOCUMENT_HEAD__ = iframeDocument.head;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__ = iframeWindow.Document.prototype.querySelector;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__ = iframeWindow.Document.prototype.querySelectorAll;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__ = iframeWindow.Document.prototype.createElement;\n  iframeWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__ = iframeWindow.Document.prototype.createTextNode;\n  initBase(iframeWindow, wujie.url);\n  patchIframeHistory(iframeWindow, appHostPath, mainHostPath);\n  patchIframeEvents(iframeWindow);\n  if (wujie.degrade) recordEventListeners(iframeWindow);\n  syncIframeUrlToWindow(iframeWindow);\n\n  patchWindowEffect(iframeWindow);\n  patchDocumentEffect(iframeWindow);\n  patchNodeEffect(iframeWindow);\n  patchRelativeUrlEffect(iframeWindow);\n}\n\n/**\n * 防止运行主应用的js代码，给子应用带来很多副作用\n */\n// TODO 更加准确抓取停止时机\nfunction stopIframeLoading(iframeWindow: Window) {\n  const oldDoc = iframeWindow.document;\n  return new Promise<void>((resolve) => {\n    function loop() {\n      setTimeout(() => {\n        let newDoc;\n        try {\n          newDoc = iframeWindow.document;\n        } catch (err) {\n          newDoc = null;\n        }\n        // wait for document ready\n        if (!newDoc || newDoc == oldDoc) {\n          loop();\n        } else {\n          iframeWindow.stop ? iframeWindow.stop() : iframeWindow.document.execCommand(\"Stop\");\n          resolve();\n        }\n      }, 1);\n    }\n    loop();\n  });\n}\n\nexport function patchElementEffect(\n  element: (HTMLElement | Node | ShadowRoot) & { _hasPatch?: boolean },\n  iframeWindow: Window\n): void {\n  const proxyLocation = iframeWindow.__WUJIE.proxyLocation as Location;\n  if (element._hasPatch) return;\n  Object.defineProperties(element, {\n    baseURI: {\n      configurable: true,\n      get: () => proxyLocation.protocol + \"//\" + proxyLocation.host + proxyLocation.pathname,\n      set: undefined,\n    },\n    ownerDocument: {\n      configurable: true,\n      get: () => iframeWindow.document,\n    },\n    _hasPatch: { get: () => true },\n  });\n  execHooks(iframeWindow.__WUJIE.plugins, \"patchElementHook\", element, iframeWindow);\n}\n\n/**\n * 子应用前进后退，同步路由到主应用\n * @param iframeWindow\n */\nexport function syncIframeUrlToWindow(iframeWindow: Window): void {\n  iframeWindow.addEventListener(\"hashchange\", () => syncUrlToWindow(iframeWindow));\n  iframeWindow.addEventListener(\"popstate\", () => {\n    syncUrlToWindow(iframeWindow);\n  });\n}\n\n/**\n * iframe插入脚本\n * @param scriptResult script请求结果\n * @param iframeWindow\n * @param rawElement 原始的脚本\n */\nexport function insertScriptToIframe(\n  scriptResult: ScriptObject | ScriptObjectLoader,\n  iframeWindow: Window,\n  rawElement?: HTMLScriptElement\n) {\n  const { src, module, content, crossorigin, crossoriginType, async, attrs, callback, onload } =\n    scriptResult as ScriptObjectLoader;\n  const scriptElement = iframeWindow.document.createElement(\"script\");\n  const nextScriptElement = iframeWindow.document.createElement(\"script\");\n  const { replace, plugins, proxyLocation } = iframeWindow.__WUJIE;\n  const jsLoader = getJsLoader({ plugins, replace });\n  let code = jsLoader(content, src, getCurUrl(proxyLocation));\n  // 添加属性\n  attrs &&\n    Object.keys(attrs)\n      .filter((key) => !Object.keys(scriptResult).includes(key))\n      .forEach((key) => scriptElement.setAttribute(key, String(attrs[key])));\n\n  // 内联脚本\n  if (content) {\n    // patch location\n    if (!iframeWindow.__WUJIE.degrade && !module) {\n      code = `(function(window, self, global, location) {\n      ${code}\n}).bind(window.__WUJIE.proxy)(\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxy,\n  window.__WUJIE.proxyLocation,\n);`;\n    }\n    // 解决 webpack publicPath 为 auto 无法加载资源的问题\n    Object.defineProperty(scriptElement, \"src\", { get: () => src || \"\" });\n  } else {\n    src && scriptElement.setAttribute(\"src\", src);\n    crossorigin && scriptElement.setAttribute(\"crossorigin\", crossoriginType);\n  }\n  module && scriptElement.setAttribute(\"type\", \"module\");\n  scriptElement.textContent = code || \"\";\n  nextScriptElement.textContent =\n    \"if(window.__WUJIE.execQueue && window.__WUJIE.execQueue.length){ window.__WUJIE.execQueue.shift()()}\";\n\n  const container = rawDocumentQuerySelector.call(iframeWindow.document, \"head\");\n  const execNextScript = () => !async && container.appendChild(nextScriptElement);\n  const afterExecScript = () => {\n    onload?.();\n    execNextScript();\n  };\n\n  // 错误情况处理\n  if (/^<!DOCTYPE html/i.test(code)) {\n    error(WUJIE_TIPS_SCRIPT_ERROR_REQUESTED, scriptResult);\n    return execNextScript();\n  }\n\n  // 打标记\n  if (rawElement) {\n    setTagToScript(scriptElement, getTagFromScript(rawElement));\n  }\n  // 外联脚本执行后的处理\n  const isOutlineScript = !content && src;\n  if (isOutlineScript) {\n    scriptElement.onload = afterExecScript;\n    scriptElement.onerror = afterExecScript;\n  }\n  container.appendChild(scriptElement);\n\n  // 调用回调\n  callback?.(iframeWindow);\n  // 执行 hooks\n  execHooks(plugins, \"appendOrInsertElementHook\", scriptElement, iframeWindow, rawElement);\n  // 内联脚本执行后的处理\n  !isOutlineScript && afterExecScript();\n}\n\n/**\n * 加载iframe替换子应用\n * @param src 地址\n * @param element\n * @param degradeAttrs\n */\nexport function renderIframeReplaceApp(\n  src: string,\n  element: HTMLElement,\n  degradeAttrs: { [key: string]: any } = {}\n): void {\n  const iframe = window.document.createElement(\"iframe\");\n  const defaultStyle = \"height:100%;width:100%\";\n  setAttrsToElement(iframe, { ...degradeAttrs, src, style: [defaultStyle, degradeAttrs.style].join(\";\") });\n  renderElementToContainer(iframe, element);\n}\n\n/**\n * js沙箱\n * 创建和主应用同源的iframe，路径携带了子路由的路由信息\n * iframe必须禁止加载html，防止进入主应用的路由逻辑\n */\nexport function iframeGenerator(\n  sandbox: WuJie,\n  attrs: { [key: string]: any },\n  mainHostPath: string,\n  appHostPath: string,\n  appRoutePath: string\n): HTMLIFrameElement {\n  const iframe = window.document.createElement(\"iframe\");\n  const attrsMerge = { src: mainHostPath, style: \"display: none\", ...attrs, name: sandbox.id, [WUJIE_DATA_FLAG]: \"\" };\n  setAttrsToElement(iframe, attrsMerge);\n  window.document.body.appendChild(iframe);\n\n  const iframeWindow = iframe.contentWindow;\n  // 变量需要提前注入，在入口函数通过变量防止死循环\n  patchIframeVariable(iframeWindow, sandbox, appHostPath);\n  sandbox.iframeReady = stopIframeLoading(iframeWindow).then(() => {\n    if (!iframeWindow.__WUJIE) {\n      patchIframeVariable(iframeWindow, sandbox, appHostPath);\n    }\n    initIframeDom(iframeWindow, sandbox, mainHostPath, appHostPath);\n    /**\n     * 如果有同步优先同步，非同步从url读取\n     */\n    if (!isMatchSyncQueryById(iframeWindow.__WUJIE.id)) {\n      iframeWindow.history.replaceState(null, \"\", mainHostPath + appRoutePath);\n    }\n  });\n  return iframe;\n}\n","import { patchElementEffect, renderIframeReplaceApp } from \"./iframe\";\nimport { renderElementToContainer } from \"./shadow\";\nimport { pushUrlToWindow } from \"./sync\";\nimport { documentProxyProperties, rawDocumentQuerySelector } from \"./common\";\nimport { WUJIE_TIPS_RELOAD_DISABLED } from \"./constant\";\nimport {\n  getTargetValue,\n  anchorElementGenerator,\n  getDegradeIframe,\n  isCallable,\n  checkProxyFunction,\n  warn,\n  stopMainAppRun,\n} from \"./utils\";\n\n/**\n * location href 的set劫持操作\n */\nfunction locationHrefSet(iframe: HTMLIFrameElement, value: string, appHostPath: string): boolean {\n  const { shadowRoot, id, degrade, document, degradeAttrs } = iframe.contentWindow.__WUJIE;\n  let url = value;\n  if (!/^http/.test(url)) {\n    let hrefElement = anchorElementGenerator(url);\n    url = appHostPath + hrefElement.pathname + hrefElement.search + hrefElement.hash;\n    hrefElement = null;\n  }\n  iframe.contentWindow.__WUJIE.hrefFlag = true;\n  if (degrade) {\n    const iframeBody = rawDocumentQuerySelector.call(iframe.contentDocument, \"body\");\n    renderElementToContainer(document.documentElement, iframeBody);\n    renderIframeReplaceApp(window.decodeURIComponent(url), getDegradeIframe(id).parentElement, degradeAttrs);\n  } else renderIframeReplaceApp(url, shadowRoot.host.parentElement, degradeAttrs);\n  pushUrlToWindow(id, url);\n  return true;\n}\n\n/**\n * 非降级情况下window、document、location代理\n */\nexport function proxyGenerator(\n  iframe: HTMLIFrameElement,\n  urlElement: HTMLAnchorElement,\n  mainHostPath: string,\n  appHostPath: string\n): {\n  proxyWindow: Window;\n  proxyDocument: Object;\n  proxyLocation: Object;\n} {\n  const proxyWindow = new Proxy(iframe.contentWindow, {\n    get: (target: Window, p: PropertyKey): any => {\n      // location进行劫持\n      if (p === \"location\") {\n        return target.__WUJIE.proxyLocation;\n      }\n      // 判断自身\n      if (p === \"self\" || (p === \"window\" && Object.getOwnPropertyDescriptor(window, \"window\").get)) {\n        return target.__WUJIE.proxy;\n      }\n      // 不要绑定this\n      if (p === \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\" || p === \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__\") {\n        return target[p];\n      }\n      // https://262.ecma-international.org/8.0/#sec-proxy-object-internal-methods-and-internal-slots-get-p-receiver\n      const descriptor = Object.getOwnPropertyDescriptor(target, p);\n      if (descriptor?.configurable === false && descriptor?.writable === false) {\n        return target[p];\n      }\n      // 修正this指针指向\n      return getTargetValue(target, p);\n    },\n\n    set: (target: Window, p: PropertyKey, value: any) => {\n      checkProxyFunction(value);\n      target[p] = value;\n      return true;\n    },\n\n    has: (target: Window, p: PropertyKey) => p in target,\n  });\n\n  // proxy document\n  const proxyDocument = new Proxy(\n    {},\n    {\n      get: function (_fakeDocument, propKey) {\n        const document = window.document;\n        const { shadowRoot, proxyLocation } = iframe.contentWindow.__WUJIE;\n        // iframe初始化完成后，webcomponent还未挂在上去，此时运行了主应用代码，必须中止\n        if (!shadowRoot) stopMainAppRun();\n        const rawCreateElement = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__;\n        const rawCreateTextNode = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__;\n        // need fix\n        if (propKey === \"createElement\" || propKey === \"createTextNode\") {\n          return new Proxy(document[propKey], {\n            apply(_createElement, _ctx, args) {\n              const rawCreateMethod = propKey === \"createElement\" ? rawCreateElement : rawCreateTextNode;\n              const element = rawCreateMethod.apply(iframe.contentDocument, args);\n              patchElementEffect(element, iframe.contentWindow);\n              return element;\n            },\n          });\n        }\n        if (propKey === \"documentURI\" || propKey === \"URL\") {\n          return (proxyLocation as Location).href;\n        }\n\n        // from shadowRoot\n        if (\n          propKey === \"getElementsByTagName\" ||\n          propKey === \"getElementsByClassName\" ||\n          propKey === \"getElementsByName\"\n        ) {\n          return new Proxy(shadowRoot.querySelectorAll, {\n            apply(querySelectorAll, _ctx, args) {\n              let arg = args[0];\n              if (_ctx !== iframe.contentDocument) {\n                return _ctx[propKey].apply(_ctx, args);\n              }\n\n              if (propKey === \"getElementsByTagName\" && arg === \"script\") {\n                return iframe.contentDocument.scripts;\n              }\n              if (propKey === \"getElementsByClassName\") arg = \".\" + arg;\n              if (propKey === \"getElementsByName\") arg = `[name=\"${arg}\"]`;\n\n              // FIXME: This string must be a valid CSS selector string; if it's not, a SyntaxError exception is thrown;\n              // so we should ensure that the program can execute normally in case of exceptions.\n              // reference: https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll\n\n              let res: NodeList[] | [];\n              try {\n                res = querySelectorAll.call(shadowRoot, arg);\n              } catch (error) {\n                res = [];\n              }\n\n              return res;\n            },\n          });\n        }\n        if (propKey === \"getElementById\") {\n          return new Proxy(shadowRoot.querySelector, {\n            // case document.querySelector.call\n            apply(target, ctx, args) {\n              if (ctx !== iframe.contentDocument) {\n                return ctx[propKey]?.apply(ctx, args);\n              }\n              return (\n                target.call(shadowRoot, `[id=\"${args[0]}\"]`) ||\n                iframe.contentWindow.__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__.call(\n                  iframe.contentWindow.document,\n                  `#${args[0]}`\n                )\n              );\n            },\n          });\n        }\n        if (propKey === \"querySelector\" || propKey === \"querySelectorAll\") {\n          const rawPropMap = {\n            querySelector: \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__\",\n            querySelectorAll: \"__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__\",\n          };\n          return new Proxy(shadowRoot[propKey], {\n            apply(target, ctx, args) {\n              if (ctx !== iframe.contentDocument) {\n                return ctx[propKey]?.apply(ctx, args);\n              }\n              // 二选一，优先shadowDom，除非采用array合并，排除base，防止对router造成影响\n              return (\n                target.apply(shadowRoot, args) ||\n                (args[0] === \"base\"\n                  ? null\n                  : iframe.contentWindow[rawPropMap[propKey]].call(iframe.contentWindow.document, args[0]))\n              );\n            },\n          });\n        }\n        if (propKey === \"documentElement\" || propKey === \"scrollingElement\") return shadowRoot.firstElementChild;\n        if (propKey === \"forms\") return shadowRoot.querySelectorAll(\"form\");\n        if (propKey === \"images\") return shadowRoot.querySelectorAll(\"img\");\n        if (propKey === \"links\") return shadowRoot.querySelectorAll(\"a\");\n        const { ownerProperties, shadowProperties, shadowMethods, documentProperties, documentMethods } =\n          documentProxyProperties;\n        if (ownerProperties.concat(shadowProperties).includes(propKey.toString())) {\n          if (propKey === \"activeElement\" && shadowRoot.activeElement === null) return shadowRoot.body;\n          return shadowRoot[propKey];\n        }\n        if (shadowMethods.includes(propKey.toString())) {\n          return getTargetValue(shadowRoot, propKey) ?? getTargetValue(document, propKey);\n        }\n        // from window.document\n        if (documentProperties.includes(propKey.toString())) {\n          return document[propKey];\n        }\n        if (documentMethods.includes(propKey.toString())) {\n          return getTargetValue(document, propKey);\n        }\n      },\n    }\n  );\n\n  // proxy location\n  const proxyLocation = new Proxy(\n    {},\n    {\n      get: function (_fakeLocation, propKey) {\n        const location = iframe.contentWindow.location;\n        if (\n          propKey === \"host\" ||\n          propKey === \"hostname\" ||\n          propKey === \"protocol\" ||\n          propKey === \"port\" ||\n          propKey === \"origin\"\n        ) {\n          return urlElement[propKey];\n        }\n        if (propKey === \"href\") {\n          return location[propKey].replace(mainHostPath, appHostPath);\n        }\n        if (propKey === \"reload\") {\n          warn(WUJIE_TIPS_RELOAD_DISABLED);\n          return () => null;\n        }\n        if (propKey === \"replace\") {\n          return new Proxy(location[propKey], {\n            apply(replace, _ctx, args) {\n              return replace.call(location, args[0]?.replace(appHostPath, mainHostPath));\n            },\n          });\n        }\n        return getTargetValue(location, propKey);\n      },\n      set: function (_fakeLocation, propKey, value) {\n        // 如果是跳转链接的话重开一个iframe\n        if (propKey === \"href\") {\n          return locationHrefSet(iframe, value, appHostPath);\n        }\n        iframe.contentWindow.location[propKey] = value;\n        return true;\n      },\n      ownKeys: function () {\n        return Object.keys(iframe.contentWindow.location).filter((key) => key !== \"reload\");\n      },\n      getOwnPropertyDescriptor: function (_target, key) {\n        return { enumerable: true, configurable: true, value: this[key] };\n      },\n    }\n  );\n  return { proxyWindow, proxyDocument, proxyLocation };\n}\n\n/**\n * 降级情况下document、location代理处理\n */\nexport function localGenerator(\n  iframe: HTMLIFrameElement,\n  urlElement: HTMLAnchorElement,\n  mainHostPath: string,\n  appHostPath: string\n): {\n  proxyDocument: Object;\n  proxyLocation: Object;\n} {\n  // 代理 document\n  const proxyDocument = {};\n  const sandbox = iframe.contentWindow.__WUJIE;\n  // 特殊处理\n  Object.defineProperties(proxyDocument, {\n    createElement: {\n      get: () => {\n        return function (...args) {\n          const element = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__.apply(\n            iframe.contentDocument,\n            args\n          );\n          patchElementEffect(element, iframe.contentWindow);\n          return element;\n        };\n      },\n    },\n    createTextNode: {\n      get: () => {\n        return function (...args) {\n          const element = iframe.contentWindow.__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__.apply(\n            iframe.contentDocument,\n            args\n          );\n          patchElementEffect(element, iframe.contentWindow);\n          return element;\n        };\n      },\n    },\n    documentURI: {\n      get: () => (sandbox.proxyLocation as Location).href,\n    },\n    URL: {\n      get: () => (sandbox.proxyLocation as Location).href,\n    },\n    getElementsByTagName: {\n      get() {\n        return function (...args) {\n          const tagName = args[0];\n          if (tagName === \"script\") {\n            return iframe.contentDocument.scripts as any;\n          }\n          return sandbox.document.getElementsByTagName(tagName) as any;\n        };\n      },\n    },\n  });\n  // 普通处理\n  const {\n    modifyLocalProperties,\n    modifyProperties,\n    ownerProperties,\n    shadowProperties,\n    shadowMethods,\n    documentProperties,\n    documentMethods,\n  } = documentProxyProperties;\n  modifyProperties\n    .filter((key) => !modifyLocalProperties.includes(key))\n    .concat(ownerProperties, shadowProperties, shadowMethods, documentProperties, documentMethods)\n    .forEach((key) => {\n      Object.defineProperty(proxyDocument, key, {\n        get: () => {\n          const value = sandbox.document?.[key];\n          return isCallable(value) ? value.bind(sandbox.document) : value;\n        },\n      });\n    });\n\n  // 代理 location\n  const proxyLocation = {};\n  const location = iframe.contentWindow.location;\n  const locationKeys = Object.keys(location);\n  const constantKey = [\"host\", \"hostname\", \"port\", \"protocol\", \"port\"];\n  constantKey.forEach((key) => {\n    proxyLocation[key] = urlElement[key];\n  });\n  Object.defineProperties(proxyLocation, {\n    href: {\n      get: () => location.href.replace(mainHostPath, appHostPath),\n      set: (value) => {\n        locationHrefSet(iframe, value, appHostPath);\n      },\n    },\n    reload: {\n      get() {\n        warn(WUJIE_TIPS_RELOAD_DISABLED);\n        return () => null;\n      },\n    },\n  });\n  locationKeys\n    .filter((key) => !constantKey.concat([\"href\", \"reload\"]).includes(key))\n    .forEach((key) => {\n      Object.defineProperty(proxyLocation, key, {\n        get: () => (isCallable(location[key]) ? location[key].bind(location) : location[key]),\n      });\n    });\n  return { proxyDocument, proxyLocation };\n}\n","import { warn, error } from \"./utils\";\nimport { WUJIE_ALL_EVENT, WUJIE_TIPS_NO_SUBJECT } from \"./constant\";\n\nexport type EventObj = { [event: string]: Array<Function> };\n\n// 全部事件存储map\nexport const appEventObjMap = window.__POWERED_BY_WUJIE__\n  ? window.__WUJIE.inject.appEventObjMap\n  : new Map<String, EventObj>();\n\n// eventBus 事件中心\nexport class EventBus {\n  private id: string;\n  private eventObj: EventObj;\n\n  constructor(id: string) {\n    this.id = id;\n    this.$clear();\n    if (!appEventObjMap.get(this.id)) {\n      appEventObjMap.set(this.id, {});\n    }\n    this.eventObj = appEventObjMap.get(this.id);\n  }\n\n  // 监听事件\n  public $on(event: string, fn: Function): EventBus {\n    const cbs = this.eventObj[event];\n    if (!cbs) {\n      this.eventObj[event] = [fn];\n      return this;\n    }\n    if (!cbs.includes(fn)) cbs.push(fn);\n    return this;\n  }\n\n  /** 任何$emit都会导致监听函数触发，第一个参数为事件名，后续的参数为$emit的参数 */\n  public $onAll(fn: (event: string, ...args: Array<any>) => any): EventBus {\n    return this.$on(WUJIE_ALL_EVENT, fn);\n  }\n\n  // 一次性监听事件\n  public $once(event: string, fn: Function): void {\n    const on = function (...args: Array<any>) {\n      this.$off(event, on);\n      fn(...args);\n    }.bind(this);\n    this.$on(event, on);\n  }\n\n  // 取消监听\n  public $off(event: string, fn: Function): EventBus {\n    const cbs = this.eventObj[event];\n    if (!event || !cbs || !cbs.length) {\n      warn(`${event} ${WUJIE_TIPS_NO_SUBJECT}`);\n      return this;\n    }\n\n    let cb;\n    let i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn) {\n        cbs.splice(i, 1);\n        break;\n      }\n    }\n    return this;\n  }\n\n  // 取消监听$onAll\n  public $offAll(fn: Function): EventBus {\n    return this.$off(WUJIE_ALL_EVENT, fn);\n  }\n\n  // 发送事件\n  public $emit(event: string, ...args: Array<any>): EventBus {\n    let cbs = [];\n    let allCbs = [];\n\n    appEventObjMap.forEach((eventObj) => {\n      if (eventObj[event]) cbs = cbs.concat(eventObj[event]);\n      if (eventObj[WUJIE_ALL_EVENT]) allCbs = allCbs.concat(eventObj[WUJIE_ALL_EVENT]);\n    });\n\n    if (!event || (cbs.length === 0 && allCbs.length === 0)) {\n      warn(`${event} ${WUJIE_TIPS_NO_SUBJECT}`);\n    } else {\n      try {\n        for (let i = 0, l = cbs.length; i < l; i++) cbs[i](...args);\n        for (let i = 0, l = allCbs.length; i < l; i++) allCbs[i](event, ...args);\n      } catch (e) {\n        error(e);\n      }\n    }\n    return this;\n  }\n\n  // 清空当前所有的监听事件\n  public $clear(): EventBus {\n    const eventObj = appEventObjMap.get(this.id) ?? {};\n    const events = Object.keys(eventObj);\n    events.forEach((event) => delete eventObj[event]);\n    return this;\n  }\n}\n","import {\n  iframeGenerator,\n  recoverEventListeners,\n  recoverDocumentListeners,\n  insertScriptToIframe,\n  patchEventTimeStamp,\n} from \"./iframe\";\nimport { syncUrlToWindow, syncUrlToIframe, clearInactiveAppUrl } from \"./sync\";\nimport {\n  createWujieWebComponent,\n  clearChild,\n  getPatchStyleElements,\n  renderElementToContainer,\n  renderTemplateToShadowRoot,\n  renderTemplateToIframe,\n  initRenderIframeAndContainer,\n  removeLoading,\n} from \"./shadow\";\nimport { proxyGenerator, localGenerator } from \"./proxy\";\nimport { ScriptResultList } from \"./entry\";\nimport { getPlugins, getPresetLoaders } from \"./plugin\";\nimport { removeEventListener } from \"./effect\";\nimport {\n  SandboxCache,\n  idToSandboxCacheMap,\n  addSandboxCacheWithWujie,\n  deleteWujieById,\n  rawElementAppendChild,\n  rawDocumentQuerySelector,\n} from \"./common\";\nimport { EventBus, appEventObjMap, EventObj } from \"./event\";\nimport { isFunction, wujieSupport, appRouteParse, requestIdleCallback, getAbsolutePath, eventTrigger } from \"./utils\";\nimport { WUJIE_DATA_ATTACH_CSS_FLAG } from \"./constant\";\nimport { plugin, ScriptObjectLoader, loadErrorHandler } from \"./index\";\n\nexport type lifecycle = (appWindow: Window) => any;\ntype lifecycles = {\n  beforeLoad: lifecycle;\n  beforeMount: lifecycle;\n  afterMount: lifecycle;\n  beforeUnmount: lifecycle;\n  afterUnmount: lifecycle;\n  activated: lifecycle;\n  deactivated: lifecycle;\n  loadError: loadErrorHandler;\n};\n/**\n * 基于 Proxy和iframe 实现的沙箱\n */\nexport default class Wujie {\n  public id: string;\n  /** 激活时路由地址 */\n  public url: string;\n  /** 子应用保活 */\n  public alive: boolean;\n  /** window代理 */\n  public proxy: WindowProxy;\n  /** document代理 */\n  public proxyDocument: Object;\n  /** location代理 */\n  public proxyLocation: Object;\n  /** 事件中心 */\n  public bus: EventBus;\n  /** 容器 */\n  public el: HTMLElement;\n  /** js沙箱 */\n  public iframe: HTMLIFrameElement;\n  /** css沙箱 */\n  public shadowRoot: ShadowRoot;\n  /** 子应用的template */\n  public template: string;\n  /** 子应用代码替换钩子 */\n  public replace: (code: string) => string;\n  /** 子应用自定义fetch */\n  public fetch: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n  /** 子应用的生命周期 */\n  public lifecycles: lifecycles;\n  /** 子应用的插件 */\n  public plugins: Array<plugin>;\n  /** js沙箱ready态 */\n  public iframeReady: Promise<void>;\n  /** 子应用预加载态 */\n  public preload: Promise<void>;\n  /** 降级时渲染iframe的属性 */\n  public degradeAttrs: { [key: string]: any };\n  /** 子应用js执行队列 */\n  public execQueue: Array<Function>;\n  /** 子应用执行过标志 */\n  public execFlag: boolean;\n  /** 子应用激活标志 */\n  public activeFlag: boolean;\n  /** 子应用mount标志 */\n  public mountFlag: boolean;\n  /** 路由同步标志 */\n  public sync: boolean;\n  /** 子应用短路径替换，路由同步时生效 */\n  public prefix: { [key: string]: string };\n  /** 子应用跳转标志 */\n  public hrefFlag: boolean;\n  /** 子应用采用fiber模式执行 */\n  public fiber: boolean;\n  /** 子应用降级标志 */\n  public degrade: boolean;\n  /** 子应用降级document */\n  public document: Document;\n  /** 子应用styleSheet元素 */\n  public styleSheetElements: Array<HTMLLinkElement | HTMLStyleElement>;\n  /** 子应用head元素 */\n  public head: HTMLHeadElement;\n  /** 子应用body元素 */\n  public body: HTMLBodyElement;\n  /** 子应用dom监听事件留存，当降级时用于保存元素事件 */\n  public elementEventCacheMap: WeakMap<\n    Node,\n    Array<{ type: string; handler: EventListenerOrEventListenerObject; options: any }>\n  > = new WeakMap();\n\n  /** $wujie对象，提供给子应用的接口 */\n  public provide: {\n    bus: EventBus;\n    shadowRoot?: ShadowRoot;\n    props?: { [key: string]: any };\n    location?: Object;\n  };\n\n  /** 子应用嵌套场景，父应用传递给子应用的数据 */\n  public inject: {\n    idToSandboxMap: Map<String, SandboxCache>;\n    appEventObjMap: Map<String, EventObj>;\n    mainHostPath: string;\n  };\n\n  /** 激活子应用\n   * 1、同步路由\n   * 2、动态修改iframe的fetch\n   * 3、准备shadow\n   * 4、准备子应用注入\n   */\n  public async active(options: {\n    url: string;\n    sync?: boolean;\n    prefix?: { [key: string]: string };\n    template?: string;\n    el?: string | HTMLElement;\n    props?: { [key: string]: any };\n    alive?: boolean;\n    fetch?: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n    replace?: (code: string) => string;\n  }): Promise<void> {\n    const { sync, url, el, template, props, alive, prefix, fetch, replace } = options;\n    this.url = url;\n    this.sync = sync;\n    this.alive = alive;\n    this.hrefFlag = false;\n    this.prefix = prefix ?? this.prefix;\n    this.replace = replace ?? this.replace;\n    this.provide.props = props ?? this.provide.props;\n    this.activeFlag = true;\n    // wait iframe init\n    await this.iframeReady;\n\n    // 处理子应用自定义fetch\n    // TODO fetch检验合法性\n    const iframeWindow = this.iframe.contentWindow;\n    const iframeFetch = fetch\n      ? (input: RequestInfo, init?: RequestInit) =>\n          fetch(typeof input === \"string\" ? getAbsolutePath(input, (this.proxyLocation as Location).href) : input, init)\n      : this.fetch;\n    if (iframeFetch) {\n      iframeWindow.fetch = iframeFetch;\n      this.fetch = iframeFetch;\n    }\n\n    // 处理子应用路由同步\n    if (this.execFlag && this.alive) {\n      // 当保活模式下子应用重新激活时，只需要将子应用路径同步回主应用\n      syncUrlToWindow(iframeWindow);\n    } else {\n      // 先将url同步回iframe，然后再同步回浏览器url\n      syncUrlToIframe(iframeWindow);\n      syncUrlToWindow(iframeWindow);\n    }\n\n    // inject template\n    this.template = template ?? this.template;\n\n    /* 降级处理 */\n    if (this.degrade) {\n      const iframeBody = rawDocumentQuerySelector.call(iframeWindow.document, \"body\") as HTMLElement;\n      const { iframe, container } = initRenderIframeAndContainer(this.id, el ?? iframeBody, this.degradeAttrs);\n      this.el = container;\n      // 销毁js运行iframe容器内部dom\n      if (el) clearChild(iframeBody);\n      // 修复vue的event.timeStamp问题\n      patchEventTimeStamp(iframe.contentWindow, iframeWindow);\n      // 当销毁iframe时主动unmount子应用\n      iframe.contentWindow.onunload = () => {\n        this.unmount();\n      };\n      if (this.document) {\n        if (this.alive) {\n          iframe.contentDocument.replaceChild(this.document.documentElement, iframe.contentDocument.documentElement);\n          // 保活场景需要事件全部恢复\n          recoverEventListeners(iframe.contentDocument.documentElement, iframeWindow);\n        } else {\n          await renderTemplateToIframe(iframe.contentDocument, this.iframe.contentWindow, this.template);\n          // 非保活场景需要恢复根节点的事件，防止react16监听事件丢失\n          recoverDocumentListeners(this.document.documentElement, iframe.contentDocument.documentElement, iframeWindow);\n        }\n      } else {\n        await renderTemplateToIframe(iframe.contentDocument, this.iframe.contentWindow, this.template);\n      }\n      this.document = iframe.contentDocument;\n      return;\n    }\n\n    if (this.shadowRoot) {\n      /*\n       document.addEventListener was transfer to shadowRoot.addEventListener\n       react 16 SyntheticEvent will remember document event for avoid repeat listen\n       shadowRoot have to dispatchEvent for react 16 so can't be destroyed\n       this may lead memory leak risk\n       */\n      this.el = renderElementToContainer(this.shadowRoot.host, el);\n      if (this.alive) return;\n    } else {\n      // 预执行无容器，暂时插入iframe内部触发Web Component的connect\n      const iframeBody = rawDocumentQuerySelector.call(iframeWindow.document, \"body\") as HTMLElement;\n      this.el = renderElementToContainer(createWujieWebComponent(this.id), el ?? iframeBody);\n    }\n\n    await renderTemplateToShadowRoot(this.shadowRoot, iframeWindow, this.template);\n    this.patchCssRules();\n\n    // inject shadowRoot to app\n    this.provide.shadowRoot = this.shadowRoot;\n  }\n\n  /** 启动子应用\n   * 1、运行js\n   * 2、处理兼容样式\n   */\n  public async start(getExternalScripts: () => ScriptResultList): Promise<void> {\n    this.execFlag = true;\n    // 执行脚本\n    const scriptResultList = await getExternalScripts();\n    // 假如已经被销毁了\n    if (!this.iframe) return;\n    const iframeWindow = this.iframe.contentWindow;\n    // 标志位，执行代码前设置\n    iframeWindow.__POWERED_BY_WUJIE__ = true;\n    // 用户自定义代码前\n    const beforeScriptResultList: ScriptObjectLoader[] = getPresetLoaders(\"jsBeforeLoaders\", this.plugins);\n    // 用户自定义代码后\n    const afterScriptResultList: ScriptObjectLoader[] = getPresetLoaders(\"jsAfterLoaders\", this.plugins);\n    // 同步代码\n    const syncScriptResultList: ScriptResultList = [];\n    // async代码无需保证顺序，所以不用放入执行队列\n    const asyncScriptResultList: ScriptResultList = [];\n    // defer代码需要保证顺序并且DOMContentLoaded前完成，这里统一放置同步脚本后执行\n    const deferScriptResultList: ScriptResultList = [];\n    scriptResultList.forEach((scriptResult) => {\n      if (scriptResult.defer) deferScriptResultList.push(scriptResult);\n      else if (scriptResult.async) asyncScriptResultList.push(scriptResult);\n      else syncScriptResultList.push(scriptResult);\n    });\n\n    // 插入代码前\n    beforeScriptResultList.forEach((beforeScriptResult) => {\n      this.execQueue.push(() =>\n        this.fiber\n          ? requestIdleCallback(() => insertScriptToIframe(beforeScriptResult, iframeWindow))\n          : insertScriptToIframe(beforeScriptResult, iframeWindow)\n      );\n    });\n\n    // 同步代码\n    syncScriptResultList.concat(deferScriptResultList).forEach((scriptResult) => {\n      this.execQueue.push(() =>\n        scriptResult.contentPromise.then((content) =>\n          this.fiber\n            ? requestIdleCallback(() => insertScriptToIframe({ ...scriptResult, content }, iframeWindow))\n            : insertScriptToIframe({ ...scriptResult, content }, iframeWindow)\n        )\n      );\n    });\n\n    // 异步代码\n    asyncScriptResultList.forEach((scriptResult) => {\n      scriptResult.contentPromise.then((content) => {\n        this.fiber\n          ? requestIdleCallback(() => insertScriptToIframe({ ...scriptResult, content }, iframeWindow))\n          : insertScriptToIframe({ ...scriptResult, content }, iframeWindow);\n      });\n    });\n\n    //框架主动调用mount方法\n    this.execQueue.push(this.fiber ? () => requestIdleCallback(() => this.mount()) : () => this.mount());\n\n    //触发 DOMContentLoaded 事件\n    const domContentLoadedTrigger = () => {\n      eventTrigger(iframeWindow.document, \"DOMContentLoaded\");\n      eventTrigger(iframeWindow, \"DOMContentLoaded\");\n      this.execQueue.shift()?.();\n    };\n    this.execQueue.push(this.fiber ? () => requestIdleCallback(domContentLoadedTrigger) : domContentLoadedTrigger);\n\n    // 插入代码后\n    afterScriptResultList.forEach((afterScriptResult) => {\n      this.execQueue.push(() =>\n        this.fiber\n          ? requestIdleCallback(() => insertScriptToIframe(afterScriptResult, iframeWindow))\n          : insertScriptToIframe(afterScriptResult, iframeWindow)\n      );\n    });\n\n    //触发 loaded 事件\n    const domLoadedTrigger = () => {\n      eventTrigger(iframeWindow.document, \"readystatechange\");\n      eventTrigger(iframeWindow, \"load\");\n      this.execQueue.shift()?.();\n    };\n    this.execQueue.push(this.fiber ? () => requestIdleCallback(domLoadedTrigger) : domLoadedTrigger);\n    // 由于没有办法准确定位是哪个代码做了mount，保活、重建模式提前关闭loading\n    if (this.alive || !isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT)) removeLoading(this.el);\n    this.execQueue.shift()();\n\n    // 所有的execQueue队列执行完毕，start才算结束，保证串行的执行子应用\n    return new Promise((resolve) => {\n      this.execQueue.push(() => {\n        resolve();\n        this.execQueue.shift()?.();\n      });\n    });\n  }\n\n  /**\n   * 框架主动发起mount，如果子应用是异步渲染实例，比如将生命周__WUJIE_MOUNT放到async函数内\n   * 此时如果采用fiber模式渲染（主应用调用mount的时机也是异步不确定的），框架调用mount时可能\n   * 子应用的__WUJIE_MOUNT还没有挂载到window，所以这里封装一个mount函数，当子应用是异步渲染\n   * 实例时，子应用异步函数里面最后加上window.__WUJIE.mount()来主动调用\n   */\n  public mount(): void {\n    if (this.mountFlag) return;\n    if (isFunction(this.iframe.contentWindow.__WUJIE_MOUNT)) {\n      removeLoading(this.el);\n      this.lifecycles?.beforeMount?.(this.iframe.contentWindow);\n      this.iframe.contentWindow.__WUJIE_MOUNT();\n      this.lifecycles?.afterMount?.(this.iframe.contentWindow);\n      this.mountFlag = true;\n    }\n    if (this.alive) {\n      this.lifecycles?.activated?.(this.iframe.contentWindow);\n    }\n    this.execQueue.shift()?.();\n  }\n\n  /** 保活模式和使用proxyLocation.href跳转链接都不应该销毁shadow */\n  public unmount(): void {\n    this.activeFlag = false;\n    // 清理子应用过期的同步参数\n    clearInactiveAppUrl();\n    if (this.alive) {\n      this.lifecycles?.deactivated?.(this.iframe.contentWindow);\n    }\n    if (!this.mountFlag) return;\n    if (isFunction(this.iframe.contentWindow.__WUJIE_UNMOUNT) && !this.alive && !this.hrefFlag) {\n      this.lifecycles?.beforeUnmount?.(this.iframe.contentWindow);\n      this.iframe.contentWindow.__WUJIE_UNMOUNT();\n      this.lifecycles?.afterUnmount?.(this.iframe.contentWindow);\n      this.mountFlag = false;\n      this.bus.$clear();\n      if (!this.degrade) {\n        clearChild(this.shadowRoot);\n        // head body需要复用，每次都要清空事件\n        removeEventListener(this.head);\n        removeEventListener(this.body);\n      }\n      clearChild(this.head);\n      clearChild(this.body);\n    }\n  }\n\n  /** 销毁子应用 */\n  public destroy() {\n    this.bus.$clear();\n    this.shadowRoot = null;\n    this.proxy = null;\n    this.proxyDocument = null;\n    this.proxyLocation = null;\n    this.execQueue = null;\n    this.provide = null;\n    this.degradeAttrs = null;\n    this.styleSheetElements = null;\n    this.bus = null;\n    this.replace = null;\n    this.fetch = null;\n    this.execFlag = null;\n    this.mountFlag = null;\n    this.hrefFlag = null;\n    this.document = null;\n    this.head = null;\n    this.body = null;\n    this.elementEventCacheMap = null;\n    this.lifecycles = null;\n    this.plugins = null;\n    this.provide = null;\n    this.inject = null;\n    this.execQueue = null;\n    this.prefix = null;\n    // 清除 dom\n    if (this.el) {\n      clearChild(this.el);\n      this.el = null;\n    }\n    // 清除 iframe 沙箱\n    if (this.iframe) {\n      this.iframe.parentNode?.removeChild(this.iframe);\n    }\n    deleteWujieById(this.id);\n  }\n\n  /** 当子应用再次激活后，只运行mount函数，样式需要重新恢复 */\n  public rebuildStyleSheets(): void {\n    if (this.styleSheetElements && this.styleSheetElements.length) {\n      this.styleSheetElements.forEach((styleSheetElement) => {\n        rawElementAppendChild.call(this.degrade ? this.document.head : this.shadowRoot.head, styleSheetElement);\n      });\n    }\n    this.patchCssRules();\n  }\n\n  /**\n   * 子应用样式打补丁\n   * 1、兼容:root选择器样式到:host选择器上\n   * 2、将@font-face定义到shadowRoot外部\n   */\n  public patchCssRules(): void {\n    if (this.degrade) return;\n    if (this.shadowRoot.host.hasAttribute(WUJIE_DATA_ATTACH_CSS_FLAG)) return;\n    const [hostStyleSheetElement, fontStyleSheetElement] = getPatchStyleElements(\n      Array.from(this.iframe.contentDocument.querySelectorAll(\"style\")).map(\n        (styleSheetElement) => styleSheetElement.sheet\n      )\n    );\n    if (hostStyleSheetElement) {\n      this.shadowRoot.head.appendChild(hostStyleSheetElement);\n      this.styleSheetElements.push(hostStyleSheetElement);\n    }\n    if (fontStyleSheetElement) {\n      this.shadowRoot.host.appendChild(fontStyleSheetElement);\n    }\n    (hostStyleSheetElement || fontStyleSheetElement) &&\n      this.shadowRoot.host.setAttribute(WUJIE_DATA_ATTACH_CSS_FLAG, \"\");\n  }\n\n  /**\n   * @param id 子应用的id，唯一标识\n   * @param url 子应用的url，可以包含protocol、host、path、query、hash\n   */\n  constructor(options: {\n    name: string;\n    url: string;\n    attrs: { [key: string]: any };\n    degradeAttrs: { [key: string]: any };\n    fiber: boolean;\n    degrade;\n    plugins: Array<plugin>;\n    lifecycles: lifecycles;\n  }) {\n    // 传递inject给嵌套子应用\n    if (window.__POWERED_BY_WUJIE__) this.inject = window.__WUJIE.inject;\n    else {\n      this.inject = {\n        idToSandboxMap: idToSandboxCacheMap,\n        appEventObjMap,\n        mainHostPath: window.location.protocol + \"//\" + window.location.host,\n      };\n    }\n    const { name, url, attrs, fiber, degradeAttrs, degrade, lifecycles, plugins } = options;\n    this.id = name;\n    this.fiber = fiber;\n    this.degrade = degrade || !wujieSupport;\n    this.bus = new EventBus(this.id);\n    this.url = url;\n    this.degradeAttrs = degradeAttrs;\n    this.provide = { bus: this.bus };\n    this.styleSheetElements = [];\n    this.execQueue = [];\n    this.lifecycles = lifecycles;\n    this.plugins = getPlugins(plugins);\n\n    // 创建目标地址的解析\n    const { urlElement, appHostPath, appRoutePath } = appRouteParse(url);\n    const { mainHostPath } = this.inject;\n    // 创建iframe\n    this.iframe = iframeGenerator(this, attrs, mainHostPath, appHostPath, appRoutePath);\n\n    if (this.degrade) {\n      const { proxyDocument, proxyLocation } = localGenerator(this.iframe, urlElement, mainHostPath, appHostPath);\n      this.proxyDocument = proxyDocument;\n      this.proxyLocation = proxyLocation;\n    } else {\n      const { proxyWindow, proxyDocument, proxyLocation } = proxyGenerator(\n        this.iframe,\n        urlElement,\n        mainHostPath,\n        appHostPath\n      );\n      this.proxy = proxyWindow;\n      this.proxyDocument = proxyDocument;\n      this.proxyLocation = proxyLocation;\n    }\n    this.provide.location = this.proxyLocation;\n\n    addSandboxCacheWithWujie(this.id, this);\n  }\n}\n","import importHTML, { processCssLoader } from \"./entry\";\nimport { StyleObject, ScriptAttributes } from \"./template\";\nimport WuJie, { lifecycle } from \"./sandbox\";\nimport { defineWujieWebComponent, addLoading } from \"./shadow\";\nimport { processAppForHrefJump } from \"./sync\";\nimport { getPlugins } from \"./plugin\";\nimport {\n  wujieSupport,\n  mergeOptions,\n  isFunction,\n  requestIdleCallback,\n  isMatchSyncQueryById,\n  warn,\n  stopMainAppRun,\n} from \"./utils\";\nimport { getWujieById, getOptionsById, addSandboxCacheWithOptions } from \"./common\";\nimport { EventBus } from \"./event\";\nimport { WUJIE_TIPS_NOT_SUPPORTED } from \"./constant\";\n\nexport const bus = new EventBus(Date.now().toString());\n\nexport interface ScriptObjectLoader {\n  /** 脚本地址，内联为空 */\n  src?: string;\n  /** 脚本是否为module模块 */\n  module?: boolean;\n  /** 脚本是否为async执行 */\n  async?: boolean;\n  /** 脚本是否设置crossorigin */\n  crossorigin?: boolean;\n  /** 脚本crossorigin的类型 */\n  crossoriginType?: \"anonymous\" | \"use-credentials\" | \"\";\n  /** 脚本原始属性 */\n  attrs?: ScriptAttributes;\n  /** 内联script的代码 */\n  content?: string;\n  /** 执行回调钩子 */\n  callback?: (appWindow: Window) => any;\n  /** 子应用加载完毕事件 */\n  onload?: Function;\n}\nexport interface plugin {\n  /** 处理html的loader */\n  htmlLoader?: (code: string) => string;\n  /** js排除列表 */\n  jsExcludes?: Array<string | RegExp>;\n  /** js忽略列表 */\n  jsIgnores?: Array<string | RegExp>;\n  /** 处理js加载前的loader */\n  jsBeforeLoaders?: Array<ScriptObjectLoader>;\n  /** 处理js的loader */\n  jsLoader?: (code: string, url: string, base: string) => string;\n  /** 处理js加载后的loader */\n  jsAfterLoaders?: Array<ScriptObjectLoader>;\n  /** css排除列表 */\n  cssExcludes?: Array<string | RegExp>;\n  /** css忽略列表 */\n  cssIgnores?: Array<string | RegExp>;\n  /** 处理css加载前的loader */\n  cssBeforeLoaders?: Array<StyleObject>;\n  /** 处理css的loader */\n  cssLoader?: (code: string, url: string, base: string) => string;\n  /** 处理css加载后的loader */\n  cssAfterLoaders?: Array<StyleObject>;\n  /** 子应用 window addEventListener 钩子回调 */\n  windowAddEventListenerHook?: eventListenerHook;\n  /** 子应用 window removeEventListener 钩子回调 */\n  windowRemoveEventListenerHook?: eventListenerHook;\n  /** 子应用 document addEventListener 钩子回调 */\n  documentAddEventListenerHook?: eventListenerHook;\n  /** 子应用 document removeEventListener 钩子回调 */\n  documentRemoveEventListenerHook?: eventListenerHook;\n  /** 子应用 向body、head插入元素后执行的钩子回调 */\n  appendOrInsertElementHook?: <T extends Node>(element: T, iframeWindow: Window) => void;\n  /** 子应用劫持元素的钩子回调 */\n  patchElementHook?: <T extends Node>(element: T, iframeWindow: Window) => void;\n  /** 用户自定义覆盖子应用 window 属性 */\n  windowPropertyOverride?: (iframeWindow: Window) => void;\n  /** 用户自定义覆盖子应用 document 属性 */\n  documentPropertyOverride?: (iframeWindow: Window) => void;\n}\n\ntype eventListenerHook = (\n  iframeWindow: Window,\n  type: string,\n  handler: EventListenerOrEventListenerObject,\n  options?: boolean | AddEventListenerOptions\n) => void;\n\nexport type loadErrorHandler = (url: string, e: Error) => any;\n\ntype baseOptions = {\n  /** 唯一性用户必须保证 */\n  name: string;\n  /** 需要渲染的url */\n  url: string;\n  /** 需要渲染的html, 如果已有则无需从url请求 */\n  html?: string;\n  /** 代码替换钩子 */\n  replace?: (code: string) => string;\n  /** 自定义fetch */\n  fetch?: (input: RequestInfo, init?: RequestInit) => Promise<Response>;\n  /** 注入给子应用的属性 */\n  props?: { [key: string]: any };\n  /** 自定义运行iframe的属性 */\n  attrs?: { [key: string]: any };\n  /** 自定义降级渲染iframe的属性 */\n  degradeAttrs?: { [key: string]: any };\n  /** 子应用采用fiber模式执行 */\n  fiber?: boolean;\n  /** 子应用保活，state不会丢失 */\n  alive?: boolean;\n  /** 子应用采用降级iframe方案 */\n  degrade?: boolean;\n  /** 子应用插件 */\n  plugins?: Array<plugin>;\n  /** 子应用生命周期 */\n  beforeLoad?: lifecycle;\n  beforeMount?: lifecycle;\n  afterMount?: lifecycle;\n  beforeUnmount?: lifecycle;\n  afterUnmount?: lifecycle;\n  activated?: lifecycle;\n  deactivated?: lifecycle;\n  loadError?: loadErrorHandler;\n};\n\nexport type preOptions = baseOptions & {\n  /** 预执行 */\n  exec?: boolean;\n};\n\nexport type startOptions = baseOptions & {\n  /** 渲染的容器 */\n  el: HTMLElement | string;\n  /**\n   * 路由同步开关\n   * 如果false，子应用跳转主应用路由无变化，但是主应用的history还是会增加\n   * https://html.spec.whatwg.org/multipage/history.html#the-history-interface\n   */\n  sync?: boolean;\n  /** 子应用短路径替换，路由同步时生效 */\n  prefix?: { [key: string]: string };\n  /** 子应用加载时loading元素 */\n  loading?: HTMLElement;\n};\n\ntype optionProperty = \"url\" | \"el\";\n\n/**\n * 合并 preOptions 和 startOptions，并且将 url 和 el 变成可选\n */\nexport type cacheOptions = Omit<preOptions & startOptions, optionProperty> &\n  Partial<Pick<startOptions, optionProperty>>;\n\n/**\n * 强制中断主应用运行\n * wujie.__WUJIE 如果为true说明当前运行环境是子应用\n * window.__POWERED_BY_WUJIE__ 如果为false说明子应用还没初始化完成\n * 上述条件同时成立说明主应用代码在iframe的loading阶段混入进来了，必须中断执行\n */\nif (window.__WUJIE && !window.__POWERED_BY_WUJIE__) {\n  stopMainAppRun();\n}\n\n// 处理子应用链接跳转\nprocessAppForHrefJump();\n\n// 定义webComponent容器\ndefineWujieWebComponent();\n\n// 如果不支持则告警\nif (!wujieSupport) warn(WUJIE_TIPS_NOT_SUPPORTED);\n\n/**\n * 缓存子应用配置\n */\nexport function setupApp(options: cacheOptions): void {\n  if (options.name) addSandboxCacheWithOptions(options.name, options);\n}\n\n/**\n * 运行无界app\n */\nexport async function startApp(startOptions: startOptions): Promise<Function | void> {\n  const sandbox = getWujieById(startOptions.name);\n  const cacheOptions = getOptionsById(startOptions.name);\n  // 合并缓存配置\n  const options = mergeOptions(startOptions, cacheOptions);\n  const {\n    name,\n    url,\n    html,\n    replace,\n    fetch,\n    props,\n    attrs,\n    degradeAttrs,\n    fiber,\n    alive,\n    degrade,\n    sync,\n    prefix,\n    el,\n    loading,\n    plugins,\n    lifecycles,\n  } = options;\n  // 已经初始化过的应用，快速渲染\n  if (sandbox) {\n    sandbox.plugins = getPlugins(plugins);\n    sandbox.lifecycles = lifecycles;\n    const iframeWindow = sandbox.iframe.contentWindow;\n    if (sandbox.preload) {\n      await sandbox.preload;\n    }\n    if (alive) {\n      // 保活\n      await sandbox.active({ url, sync, prefix, el, props, alive, fetch, replace });\n      // 预加载但是没有执行的情况\n      if (!sandbox.execFlag) {\n        sandbox.lifecycles?.beforeLoad?.(sandbox.iframe.contentWindow);\n        const { getExternalScripts } = await importHTML({\n          url,\n          html,\n          opts: {\n            fetch: fetch || window.fetch,\n            plugins: sandbox.plugins,\n            loadError: sandbox.lifecycles.loadError,\n            fiber,\n          },\n        });\n        await sandbox.start(getExternalScripts);\n      }\n      sandbox.lifecycles?.activated?.(sandbox.iframe.contentWindow);\n      return sandbox.destroy;\n    } else if (isFunction(iframeWindow.__WUJIE_MOUNT)) {\n      /**\n       * 子应用切换会触发webcomponent的disconnectedCallback调用sandbox.unmount进行实例销毁\n       * 此处是防止没有销毁webcomponent时调用startApp的情况，需要手动调用unmount\n       */\n      sandbox.unmount();\n      await sandbox.active({ url, sync, prefix, el, props, alive, fetch, replace });\n      // 正常加载的情况，先注入css，最后才mount。重新激活也保持同样的时序\n      sandbox.rebuildStyleSheets();\n      // 有渲染函数\n      sandbox.lifecycles?.beforeMount?.(sandbox.iframe.contentWindow);\n      iframeWindow.__WUJIE_MOUNT();\n      sandbox.lifecycles?.afterMount?.(sandbox.iframe.contentWindow);\n      sandbox.mountFlag = true;\n      return sandbox.destroy;\n    } else {\n      // 没有渲染函数\n      sandbox.destroy();\n    }\n  }\n\n  // 设置loading\n  addLoading(el, loading);\n  const newSandbox = new WuJie({ name, url, attrs, degradeAttrs, fiber, degrade, plugins, lifecycles });\n  newSandbox.lifecycles?.beforeLoad?.(newSandbox.iframe.contentWindow);\n  const { template, getExternalScripts, getExternalStyleSheets } = await importHTML({\n    url,\n    html,\n    opts: {\n      fetch: fetch || window.fetch,\n      plugins: newSandbox.plugins,\n      loadError: newSandbox.lifecycles.loadError,\n      fiber,\n    },\n  });\n\n  const processedHtml = await processCssLoader(newSandbox, template, getExternalStyleSheets);\n  await newSandbox.active({ url, sync, prefix, template: processedHtml, el, props, alive, fetch, replace });\n  await newSandbox.start(getExternalScripts);\n  return newSandbox.destroy;\n}\n\n/**\n * 预加载无界APP\n */\nexport function preloadApp(preOptions: preOptions): void {\n  requestIdleCallback((): void | Promise<void> => {\n    /**\n     * 已经存在\n     * url查询参数中有子应用的id，大概率是刷新浏览器或者分享url，此时需要直接打开子应用，无需预加载\n     */\n    if (getWujieById(preOptions.name) || isMatchSyncQueryById(preOptions.name)) return;\n    const cacheOptions = getOptionsById(preOptions.name);\n    // 合并缓存配置\n    const options = mergeOptions({ ...preOptions }, cacheOptions);\n    const {\n      name,\n      url,\n      html,\n      props,\n      alive,\n      replace,\n      fetch,\n      exec,\n      attrs,\n      degradeAttrs,\n      fiber,\n      degrade,\n      prefix,\n      plugins,\n      lifecycles,\n    } = options;\n\n    const sandbox = new WuJie({ name, url, attrs, degradeAttrs, fiber, degrade, plugins, lifecycles });\n    if (sandbox.preload) return sandbox.preload;\n    const runPreload = async () => {\n      sandbox.lifecycles?.beforeLoad?.(sandbox.iframe.contentWindow);\n      const { template, getExternalScripts, getExternalStyleSheets } = await importHTML({\n        url,\n        html,\n        opts: {\n          fetch: fetch || window.fetch,\n          plugins: sandbox.plugins,\n          loadError: sandbox.lifecycles.loadError,\n          fiber,\n        },\n      });\n      const processedHtml = await processCssLoader(sandbox, template, getExternalStyleSheets);\n      await sandbox.active({ url, props, prefix, alive, template: processedHtml, fetch, replace });\n      if (exec) {\n        await sandbox.start(getExternalScripts);\n      } else {\n        await getExternalScripts();\n      }\n    };\n    sandbox.preload = runPreload();\n  });\n}\n\n/**\n * 销毁无界APP\n */\nexport function destroyApp(id: string): void {\n  const sandbox = getWujieById(id);\n  if (sandbox) {\n    sandbox.destroy();\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bus, preloadApp, startApp, destroyApp, setupApp } from \"wujie\";\n\nexport default class WujieReact extends React.PureComponent {\n  static propTypes = propTypes;\n  static bus = bus;\n  static setupApp = setupApp;\n  static preloadApp = preloadApp;\n  static destroyApp = destroyApp;\n\n  state = {\n    myRef: React.createRef(),\n  };\n\n  destroy = null;\n\n  startAppQueue = Promise.resolve();\n\n  startApp = async () => {\n    try {\n      const props = this.props;\n      const { current: el } = this.state.myRef;\n      this.destroy = await startApp({\n        ...props,\n        el,\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  execStartApp = () => {\n    this.startAppQueue = this.startAppQueue.then(this.startApp);\n  };\n\n  render() {\n    this.execStartApp();\n\n    const { width, height } = this.props;\n    const { myRef: ref } = this.state;\n    return <div style={{ width, height }} ref={ref} />;\n  }\n}\n\nconst propTypes = {\n    height: PropTypes.string,\n    width: PropTypes.string,\n    name: PropTypes.string,\n    loading: PropTypes.element,\n    url: PropTypes.string,\n    alive: PropTypes.bool,\n    fetch: PropTypes.func,\n    props: PropTypes.object,\n    attrs: PropTypes.object,\n    replace: PropTypes.func,\n    sync: PropTypes.bool,\n    prefix: PropTypes.object,\n    fiber: PropTypes.bool,\n    degrade: PropTypes.bool,\n    plugins: PropTypes.array,\n    beforeLoad: PropTypes.func,\n    beforeMount: PropTypes.func,\n    afterMount: PropTypes.func,\n    beforeUnmount: PropTypes.func,\n    afterUnmount: PropTypes.func,\n    activated: PropTypes.func,\n    deactivated: PropTypes.func,\n    loadError: PropTypes.func,\n  }","import { useAppSelector } from '@/stores/storeHooks'\nimport { Alert, Cascader, Form, Space } from 'antd'\nimport { useState } from 'react'\nimport WujieReact from \"wujie-react\"\n\nconst { setupApp, bus } = WujieReact\n\nexport const vue2AppEntry = process.env.REACT_APP_VUE2_CHILD_PUBLIC_PATH\nexport const viteAppEntry = process.env.REACT_APP_VITE_CHILD_PUBLIC_PATH\n\nconst apps: Record<string, any> = {\n  vue2App: {\n    name: 'vue2AppOfReact',\n    url: vue2AppEntry,\n  },\n  viteApp: {\n    name: 'viteAppOfReact',\n    url: viteAppEntry,\n  },\n}\n\nconst options = [\n  {\n    name: 'vue2App',\n    path: 'vue2App',\n    children: [\n      { name: 'vue2App-通信测试页面', path: '#/vue2App/communication-test' },\n      { name: 'vue2App-子应用跳转测试页面', path: '#/vue2App/navigate-view' },\n    ]\n  },\n  {\n    name: 'viteApp',\n    path: 'viteApp',\n    children:  [\n      { name: 'viteApp-通信测试页面', path: '#/viteApp/communication-test' },\n      { name: 'viteApp-子应用跳转测试页面', path: '#/viteApp/navigate-view' },\n    ]\n  }\n]\n\nlet router: any | undefined\n\nif (window.$wujie) {\n  router = window.$wujie.props.router\n}\n\nconst props = { router }\n\nfunction geAttrs(app: { name: string, url: string }) {\n  // 修改iframe src attr，防止github pages csp报错\n  return process.env.NODE_ENV === 'production' ? { src: app.url} : {}\n}\n\nObject.values(apps).forEach(item => {\n  setupApp({\n    name: item.name,\n    attrs: geAttrs(item)\n  })\n})\n\nexport default function MicroAppView() {\n  const user = useAppSelector(state => state.user.user)\n  const [microInfo, setMicroInfo] = useState<{name: string, url: string} | null>(null)\n\n  const handleChange = (value: any) => {\n    const [name, path] = value\n    const app = apps[name]\n    if (app) {\n      setMicroInfo(() => ({\n        name: app.name,\n        url: app.url + path\n      }))\n    }\n  }\n\n  function afterMount() {\n    bus.$emit('changeUser', { user })\n  }\n\n  return (\n    <>\n      <Space size={20} style={{ width: '100%'}} direction=\"vertical\">\n        <Alert message=\"这是React18子应用作为主应用，挂载Vue2子应用或Vite子应用\" type=\"success\" />\n        <Form>\n          <Form.Item label=\"选择要加载的子应用页面\">\n            <Cascader\n              style={{ width: '400px'}}\n              expandTrigger=\"hover\"\n              options={options}\n              fieldNames={{label: 'name', value: 'path'}}\n              onChange={handleChange}\n            />\n          </Form.Item>\n        </Form>\n        {microInfo && <WujieReact {...microInfo} props={props} afterMount={afterMount} />}\n      </Space>\n    </>\n  )\n}\n","\"use strict\";\n// This icon file is generated automatically.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LeftOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\" } }] }, \"name\": \"left\", \"theme\": \"outlined\" };\nexports.default = LeftOutlined;\n","\"use strict\";\n// This icon file is generated automatically.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RightOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z\" } }] }, \"name\": \"right\", \"theme\": \"outlined\" };\nexports.default = RightOutlined;\n","'use strict';\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  \n  var _LeftOutlined = _interopRequireDefault(require('./lib/icons/LeftOutlined'));\n  \n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n  \n  var _default = _LeftOutlined;\n  exports.default = _default;\n  module.exports = _default;","'use strict';\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  \n  var _RightOutlined = _interopRequireDefault(require('./lib/icons/RightOutlined'));\n  \n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n  \n  var _default = _RightOutlined;\n  exports.default = _default;\n  module.exports = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _LeftOutlined = _interopRequireDefault(require(\"@ant-design/icons-svg/lib/asn/LeftOutlined\"));\nvar _AntdIcon = _interopRequireDefault(require(\"../components/AntdIcon\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nvar LeftOutlined = function LeftOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n    ref: ref,\n    icon: _LeftOutlined.default\n  }));\n};\nLeftOutlined.displayName = 'LeftOutlined';\nvar _default = /*#__PURE__*/React.forwardRef(LeftOutlined);\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _RightOutlined = _interopRequireDefault(require(\"@ant-design/icons-svg/lib/asn/RightOutlined\"));\nvar _AntdIcon = _interopRequireDefault(require(\"../components/AntdIcon\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nvar RightOutlined = function RightOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(_AntdIcon.default, (0, _objectSpread2.default)((0, _objectSpread2.default)({}, props), {}, {\n    ref: ref,\n    icon: _RightOutlined.default\n  }));\n};\nRightOutlined.displayName = 'RightOutlined';\nvar _default = /*#__PURE__*/React.forwardRef(RightOutlined);\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = getDataOrAriaProps;\nfunction getDataOrAriaProps(props) {\n  return Object.keys(props).reduce(function (prev, key) {\n    if ((key.startsWith('data-') || key.startsWith('aria-') || key === 'role') && !key.startsWith('data-__')) {\n      prev[key] = props[key];\n    }\n    return prev;\n  }, {});\n}","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\")[\"default\"];\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _createSuper2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createSuper\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _ = _interopRequireDefault(require(\".\"));\nvar ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n  (0, _inherits2[\"default\"])(ErrorBoundary, _React$Component);\n  var _super = (0, _createSuper2[\"default\"])(ErrorBoundary);\n  function ErrorBoundary() {\n    var _this;\n    (0, _classCallCheck2[\"default\"])(this, ErrorBoundary);\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      error: undefined,\n      info: {\n        componentStack: ''\n      }\n    };\n    return _this;\n  }\n  (0, _createClass2[\"default\"])(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, info) {\n      this.setState({\n        error: error,\n        info: info\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        message = _this$props.message,\n        description = _this$props.description,\n        children = _this$props.children;\n      var _this$state = this.state,\n        error = _this$state.error,\n        info = _this$state.info;\n      var componentStack = info && info.componentStack ? info.componentStack : null;\n      var errorMessage = typeof message === 'undefined' ? (error || '').toString() : message;\n      var errorDescription = typeof description === 'undefined' ? componentStack : description;\n      if (error) {\n        return /*#__PURE__*/React.createElement(_[\"default\"], {\n          type: \"error\",\n          message: errorMessage,\n          description: /*#__PURE__*/React.createElement(\"pre\", null, errorDescription)\n        });\n      }\n      return children;\n    }\n  }]);\n  return ErrorBoundary;\n}(React.Component);\nvar _default = ErrorBoundary;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\")[\"default\"];\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _CheckCircleFilled = _interopRequireDefault(require(\"@ant-design/icons/CheckCircleFilled\"));\nvar _CheckCircleOutlined = _interopRequireDefault(require(\"@ant-design/icons/CheckCircleOutlined\"));\nvar _CloseCircleFilled = _interopRequireDefault(require(\"@ant-design/icons/CloseCircleFilled\"));\nvar _CloseCircleOutlined = _interopRequireDefault(require(\"@ant-design/icons/CloseCircleOutlined\"));\nvar _CloseOutlined = _interopRequireDefault(require(\"@ant-design/icons/CloseOutlined\"));\nvar _ExclamationCircleFilled = _interopRequireDefault(require(\"@ant-design/icons/ExclamationCircleFilled\"));\nvar _ExclamationCircleOutlined = _interopRequireDefault(require(\"@ant-design/icons/ExclamationCircleOutlined\"));\nvar _InfoCircleFilled = _interopRequireDefault(require(\"@ant-design/icons/InfoCircleFilled\"));\nvar _InfoCircleOutlined = _interopRequireDefault(require(\"@ant-design/icons/InfoCircleOutlined\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _rcMotion = _interopRequireDefault(require(\"rc-motion\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _configProvider = require(\"../config-provider\");\nvar _getDataOrAriaProps = _interopRequireDefault(require(\"../_util/getDataOrAriaProps\"));\nvar _reactNode = require(\"../_util/reactNode\");\nvar _ErrorBoundary = _interopRequireDefault(require(\"./ErrorBoundary\"));\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar iconMapFilled = {\n  success: _CheckCircleFilled[\"default\"],\n  info: _InfoCircleFilled[\"default\"],\n  error: _CloseCircleFilled[\"default\"],\n  warning: _ExclamationCircleFilled[\"default\"]\n};\nvar iconMapOutlined = {\n  success: _CheckCircleOutlined[\"default\"],\n  info: _InfoCircleOutlined[\"default\"],\n  error: _CloseCircleOutlined[\"default\"],\n  warning: _ExclamationCircleOutlined[\"default\"]\n};\nvar IconNode = function IconNode(props) {\n  var description = props.description,\n    icon = props.icon,\n    prefixCls = props.prefixCls,\n    type = props.type;\n  var iconType = (description ? iconMapOutlined : iconMapFilled)[type] || null;\n  if (icon) {\n    return (0, _reactNode.replaceElement)(icon, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-icon\")\n    }, icon), function () {\n      return {\n        className: (0, _classnames[\"default\"])(\"\".concat(prefixCls, \"-icon\"), (0, _defineProperty2[\"default\"])({}, icon.props.className, icon.props.className))\n      };\n    });\n  }\n  return /*#__PURE__*/React.createElement(iconType, {\n    className: \"\".concat(prefixCls, \"-icon\")\n  });\n};\nvar CloseIcon = function CloseIcon(props) {\n  var isClosable = props.isClosable,\n    closeText = props.closeText,\n    prefixCls = props.prefixCls,\n    closeIcon = props.closeIcon,\n    handleClose = props.handleClose;\n  return isClosable ? /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleClose,\n    className: \"\".concat(prefixCls, \"-close-icon\"),\n    tabIndex: 0\n  }, closeText ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-close-text\")\n  }, closeText) : closeIcon) : null;\n};\nvar Alert = function Alert(_a) {\n  var _classNames2;\n  var description = _a.description,\n    customizePrefixCls = _a.prefixCls,\n    message = _a.message,\n    banner = _a.banner,\n    _a$className = _a.className,\n    className = _a$className === void 0 ? '' : _a$className,\n    style = _a.style,\n    onMouseEnter = _a.onMouseEnter,\n    onMouseLeave = _a.onMouseLeave,\n    onClick = _a.onClick,\n    afterClose = _a.afterClose,\n    showIcon = _a.showIcon,\n    closable = _a.closable,\n    closeText = _a.closeText,\n    _a$closeIcon = _a.closeIcon,\n    closeIcon = _a$closeIcon === void 0 ? /*#__PURE__*/React.createElement(_CloseOutlined[\"default\"], null) : _a$closeIcon,\n    action = _a.action,\n    props = __rest(_a, [\"description\", \"prefixCls\", \"message\", \"banner\", \"className\", \"style\", \"onMouseEnter\", \"onMouseLeave\", \"onClick\", \"afterClose\", \"showIcon\", \"closable\", \"closeText\", \"closeIcon\", \"action\"]);\n  var _React$useState = React.useState(false),\n    _React$useState2 = (0, _slicedToArray2[\"default\"])(_React$useState, 2),\n    closed = _React$useState2[0],\n    setClosed = _React$useState2[1];\n  var ref = React.useRef();\n  var _React$useContext = React.useContext(_configProvider.ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var prefixCls = getPrefixCls('alert', customizePrefixCls);\n  var handleClose = function handleClose(e) {\n    var _a;\n    setClosed(true);\n    (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props, e);\n  };\n  var getType = function getType() {\n    var type = props.type;\n    if (type !== undefined) {\n      return type;\n    }\n    // banner 模式默认为警告\n    return banner ? 'warning' : 'info';\n  };\n  // closeable when closeText is assigned\n  var isClosable = closeText ? true : closable;\n  var type = getType();\n  // banner 模式默认有 Icon\n  var isShowIcon = banner && showIcon === undefined ? true : showIcon;\n  var alertCls = (0, _classnames[\"default\"])(prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames2 = {}, (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-with-description\"), !!description), (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-no-icon\"), !isShowIcon), (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-banner\"), !!banner), (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames2), className);\n  var dataOrAriaProps = (0, _getDataOrAriaProps[\"default\"])(props);\n  return /*#__PURE__*/React.createElement(_rcMotion[\"default\"], {\n    visible: !closed,\n    motionName: \"\".concat(prefixCls, \"-motion\"),\n    motionAppear: false,\n    motionEnter: false,\n    onLeaveStart: function onLeaveStart(node) {\n      return {\n        maxHeight: node.offsetHeight\n      };\n    },\n    onLeaveEnd: afterClose\n  }, function (_ref) {\n    var motionClassName = _ref.className,\n      motionStyle = _ref.style;\n    return /*#__PURE__*/React.createElement(\"div\", (0, _extends2[\"default\"])({\n      ref: ref,\n      \"data-show\": !closed,\n      className: (0, _classnames[\"default\"])(alertCls, motionClassName),\n      style: (0, _extends2[\"default\"])((0, _extends2[\"default\"])({}, style), motionStyle),\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      role: \"alert\"\n    }, dataOrAriaProps), isShowIcon ? /*#__PURE__*/React.createElement(IconNode, {\n      description: description,\n      icon: props.icon,\n      prefixCls: prefixCls,\n      type: type\n    }) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-content\")\n    }, message ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message\")\n    }, message) : null, description ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-description\")\n    }, description) : null), action ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-action\")\n    }, action) : null, /*#__PURE__*/React.createElement(CloseIcon, {\n      isClosable: !!isClosable,\n      closeText: closeText,\n      prefixCls: prefixCls,\n      closeIcon: closeIcon,\n      handleClose: handleClose\n    }));\n  });\n};\nAlert.ErrorBoundary = _ErrorBoundary[\"default\"];\nvar _default = Alert;\nexports[\"default\"] = _default;","\"use strict\";\n\nrequire(\"../../style/default.less\");\nrequire(\"./index.less\");","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\")[\"default\"];\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _LeftOutlined = _interopRequireDefault(require(\"@ant-design/icons/LeftOutlined\"));\nvar _LoadingOutlined = _interopRequireDefault(require(\"@ant-design/icons/LoadingOutlined\"));\nvar _RightOutlined = _interopRequireDefault(require(\"@ant-design/icons/RightOutlined\"));\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _rcCascader = _interopRequireDefault(require(\"rc-cascader\"));\nvar _omit = _interopRequireDefault(require(\"rc-util/lib/omit\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _configProvider = require(\"../config-provider\");\nvar _defaultRenderEmpty = _interopRequireDefault(require(\"../config-provider/defaultRenderEmpty\"));\nvar _DisabledContext = _interopRequireDefault(require(\"../config-provider/DisabledContext\"));\nvar _SizeContext = _interopRequireDefault(require(\"../config-provider/SizeContext\"));\nvar _Compact = require(\"../space/Compact\");\nvar _context = require(\"../form/context\");\nvar _iconUtil = _interopRequireDefault(require(\"../select/utils/iconUtil\"));\nvar _motion = require(\"../_util/motion\");\nvar _statusUtils = require(\"../_util/statusUtils\");\nvar _warning = _interopRequireDefault(require(\"../_util/warning\"));\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar SHOW_CHILD = _rcCascader[\"default\"].SHOW_CHILD,\n  SHOW_PARENT = _rcCascader[\"default\"].SHOW_PARENT;\nfunction highlightKeyword(str, lowerKeyword, prefixCls) {\n  var cells = str.toLowerCase().split(lowerKeyword).reduce(function (list, cur, index) {\n    return index === 0 ? [cur] : [].concat((0, _toConsumableArray2[\"default\"])(list), [lowerKeyword, cur]);\n  }, []);\n  var fillCells = [];\n  var start = 0;\n  cells.forEach(function (cell, index) {\n    var end = start + cell.length;\n    var originWorld = str.slice(start, end);\n    start = end;\n    if (index % 2 === 1) {\n      originWorld =\n      /*#__PURE__*/\n      // eslint-disable-next-line react/no-array-index-key\n      React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-menu-item-keyword\"),\n        key: \"seperator-\".concat(index)\n      }, originWorld);\n    }\n    fillCells.push(originWorld);\n  });\n  return fillCells;\n}\nvar defaultSearchRender = function defaultSearchRender(inputValue, path, prefixCls, fieldNames) {\n  var optionList = [];\n  // We do lower here to save perf\n  var lower = inputValue.toLowerCase();\n  path.forEach(function (node, index) {\n    if (index !== 0) {\n      optionList.push(' / ');\n    }\n    var label = node[fieldNames.label];\n    var type = (0, _typeof2[\"default\"])(label);\n    if (type === 'string' || type === 'number') {\n      label = highlightKeyword(String(label), lower, prefixCls);\n    }\n    optionList.push(label);\n  });\n  return optionList;\n};\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _classNames2;\n  var customizePrefixCls = props.prefixCls,\n    customizeSize = props.size,\n    customDisabled = props.disabled,\n    className = props.className,\n    multiple = props.multiple,\n    _props$bordered = props.bordered,\n    bordered = _props$bordered === void 0 ? true : _props$bordered,\n    transitionName = props.transitionName,\n    _props$choiceTransiti = props.choiceTransitionName,\n    choiceTransitionName = _props$choiceTransiti === void 0 ? '' : _props$choiceTransiti,\n    popupClassName = props.popupClassName,\n    dropdownClassName = props.dropdownClassName,\n    expandIcon = props.expandIcon,\n    placement = props.placement,\n    showSearch = props.showSearch,\n    _props$allowClear = props.allowClear,\n    allowClear = _props$allowClear === void 0 ? true : _props$allowClear,\n    notFoundContent = props.notFoundContent,\n    direction = props.direction,\n    getPopupContainer = props.getPopupContainer,\n    customStatus = props.status,\n    showArrow = props.showArrow,\n    rest = __rest(props, [\"prefixCls\", \"size\", \"disabled\", \"className\", \"multiple\", \"bordered\", \"transitionName\", \"choiceTransitionName\", \"popupClassName\", \"dropdownClassName\", \"expandIcon\", \"placement\", \"showSearch\", \"allowClear\", \"notFoundContent\", \"direction\", \"getPopupContainer\", \"status\", \"showArrow\"]);\n  var restProps = (0, _omit[\"default\"])(rest, ['suffixIcon']);\n  var _useContext = (0, React.useContext)(_configProvider.ConfigContext),\n    getContextPopupContainer = _useContext.getPopupContainer,\n    getPrefixCls = _useContext.getPrefixCls,\n    renderEmpty = _useContext.renderEmpty,\n    rootDirection = _useContext.direction;\n  var mergedDirection = direction || rootDirection;\n  var isRtl = mergedDirection === 'rtl';\n  // =================== Form =====================\n  var _useContext2 = (0, React.useContext)(_context.FormItemInputContext),\n    contextStatus = _useContext2.status,\n    hasFeedback = _useContext2.hasFeedback,\n    isFormItemInput = _useContext2.isFormItemInput,\n    feedbackIcon = _useContext2.feedbackIcon;\n  var mergedStatus = (0, _statusUtils.getMergedStatus)(contextStatus, customStatus);\n  // =================== Warning =====================\n  process.env.NODE_ENV !== \"production\" ? (0, _warning[\"default\"])(!dropdownClassName, 'Cascader', '`dropdownClassName` is deprecated which will be removed in next major version. Please use `popupClassName` instead.') : void 0;\n  // =================== No Found ====================\n  var mergedNotFoundContent = notFoundContent || (renderEmpty || _defaultRenderEmpty[\"default\"])('Cascader');\n  // ==================== Prefix =====================\n  var rootPrefixCls = getPrefixCls();\n  var prefixCls = getPrefixCls('select', customizePrefixCls);\n  var cascaderPrefixCls = getPrefixCls('cascader', customizePrefixCls);\n  var _useCompactItemContex = (0, _Compact.useCompactItemContext)(prefixCls, direction),\n    compactSize = _useCompactItemContex.compactSize,\n    compactItemClassnames = _useCompactItemContex.compactItemClassnames;\n  // =================== Dropdown ====================\n  var mergedDropdownClassName = (0, _classnames[\"default\"])(popupClassName || dropdownClassName, \"\".concat(cascaderPrefixCls, \"-dropdown\"), (0, _defineProperty2[\"default\"])({}, \"\".concat(cascaderPrefixCls, \"-dropdown-rtl\"), mergedDirection === 'rtl'));\n  // ==================== Search =====================\n  var mergedShowSearch = React.useMemo(function () {\n    if (!showSearch) {\n      return showSearch;\n    }\n    var searchConfig = {\n      render: defaultSearchRender\n    };\n    if ((0, _typeof2[\"default\"])(showSearch) === 'object') {\n      searchConfig = (0, _extends2[\"default\"])((0, _extends2[\"default\"])({}, searchConfig), showSearch);\n    }\n    return searchConfig;\n  }, [showSearch]);\n  // ===================== Size ======================\n  var size = React.useContext(_SizeContext[\"default\"]);\n  var mergedSize = compactSize || customizeSize || size;\n  // ===================== Disabled =====================\n  var disabled = React.useContext(_DisabledContext[\"default\"]);\n  var mergedDisabled = customDisabled !== null && customDisabled !== void 0 ? customDisabled : disabled;\n  // ===================== Icon ======================\n  var mergedExpandIcon = expandIcon;\n  if (!expandIcon) {\n    mergedExpandIcon = isRtl ? /*#__PURE__*/React.createElement(_LeftOutlined[\"default\"], null) : /*#__PURE__*/React.createElement(_RightOutlined[\"default\"], null);\n  }\n  var loadingIcon = /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-menu-item-loading-icon\")\n  }, /*#__PURE__*/React.createElement(_LoadingOutlined[\"default\"], {\n    spin: true\n  }));\n  // =================== Multiple ====================\n  var checkable = React.useMemo(function () {\n    return multiple ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(cascaderPrefixCls, \"-checkbox-inner\")\n    }) : false;\n  }, [multiple]);\n  // ===================== Icons =====================\n  var mergedShowArrow = showArrow !== undefined ? showArrow : props.loading || !multiple;\n  var _getIcons = (0, _iconUtil[\"default\"])((0, _extends2[\"default\"])((0, _extends2[\"default\"])({}, props), {\n      hasFeedback: hasFeedback,\n      feedbackIcon: feedbackIcon,\n      showArrow: mergedShowArrow,\n      multiple: multiple,\n      prefixCls: prefixCls\n    })),\n    suffixIcon = _getIcons.suffixIcon,\n    removeIcon = _getIcons.removeIcon,\n    clearIcon = _getIcons.clearIcon;\n  // ===================== Placement =====================\n  var getPlacement = function getPlacement() {\n    if (placement !== undefined) {\n      return placement;\n    }\n    return direction === 'rtl' ? 'bottomRight' : 'bottomLeft';\n  };\n  // ==================== Render =====================\n  return /*#__PURE__*/React.createElement(_rcCascader[\"default\"], (0, _extends2[\"default\"])({\n    prefixCls: prefixCls,\n    className: (0, _classnames[\"default\"])(!customizePrefixCls && cascaderPrefixCls, (_classNames2 = {}, (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-lg\"), mergedSize === 'large'), (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-sm\"), mergedSize === 'small'), (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-rtl\"), isRtl), (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-borderless\"), !bordered), (0, _defineProperty2[\"default\"])(_classNames2, \"\".concat(prefixCls, \"-in-form-item\"), isFormItemInput), _classNames2), (0, _statusUtils.getStatusClassNames)(prefixCls, mergedStatus, hasFeedback), compactItemClassnames, className),\n    disabled: mergedDisabled\n  }, restProps, {\n    direction: mergedDirection,\n    placement: getPlacement(),\n    notFoundContent: mergedNotFoundContent,\n    allowClear: allowClear,\n    showSearch: mergedShowSearch,\n    expandIcon: mergedExpandIcon,\n    inputIcon: suffixIcon,\n    removeIcon: removeIcon,\n    clearIcon: clearIcon,\n    loadingIcon: loadingIcon,\n    checkable: checkable,\n    dropdownClassName: mergedDropdownClassName,\n    dropdownPrefixCls: customizePrefixCls || cascaderPrefixCls,\n    choiceTransitionName: (0, _motion.getTransitionName)(rootPrefixCls, '', choiceTransitionName),\n    transitionName: (0, _motion.getTransitionName)(rootPrefixCls, (0, _motion.getTransitionDirection)(placement), transitionName),\n    getPopupContainer: getPopupContainer || getContextPopupContainer,\n    ref: ref,\n    showArrow: hasFeedback || showArrow\n  }));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Cascader.displayName = 'Cascader';\n}\nCascader.SHOW_PARENT = SHOW_PARENT;\nCascader.SHOW_CHILD = SHOW_CHILD;\nvar _default = Cascader;\nexports[\"default\"] = _default;","\"use strict\";\n\nrequire(\"../../style/default.less\");\nrequire(\"./index.less\");\nrequire(\"../../empty/style\");\nrequire(\"../../select/style\");","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","import warning from \"rc-util/es/warning\";\nfunction removeFromCheckedKeys(halfCheckedKeys, checkedKeys) {\n  var filteredKeys = new Set();\n  halfCheckedKeys.forEach(function (key) {\n    if (!checkedKeys.has(key)) {\n      filteredKeys.add(key);\n    }\n  });\n  return filteredKeys;\n}\nexport function isCheckDisabled(node) {\n  var _ref = node || {},\n    disabled = _ref.disabled,\n    disableCheckbox = _ref.disableCheckbox,\n    checkable = _ref.checkable;\n  return !!(disabled || disableCheckbox) || checkable === false;\n}\n// Fill miss keys\nfunction fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set();\n  // Add checked keys top to bottom\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n        node = entity.node,\n        _entity$children = entity.children,\n        children = _entity$children === void 0 ? [] : _entity$children;\n      if (checkedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.add(childEntity.key);\n        });\n      }\n    });\n  }\n  // Add checked keys from bottom to top\n  var visitedKeys = new Set();\n  for (var _level = maxLevel; _level >= 0; _level -= 1) {\n    var _entities = levelEntities.get(_level) || new Set();\n    _entities.forEach(function (entity) {\n      var parent = entity.parent,\n        node = entity.node;\n      // Skip if no need to check\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      }\n      // Skip if parent is disabled\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref2) {\n        var key = _ref2.key;\n        var checked = checkedKeys.has(key);\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n      if (allChecked) {\n        checkedKeys.add(parent.key);\n      }\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n      visitedKeys.add(parent.key);\n    });\n  }\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n}\n// Remove useless key\nfunction cleanConductCheck(keys, halfKeys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set(halfKeys);\n  // Remove checked keys from top to bottom\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n        node = entity.node,\n        _entity$children2 = entity.children,\n        children = _entity$children2 === void 0 ? [] : _entity$children2;\n      if (!checkedKeys.has(key) && !halfCheckedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.delete(childEntity.key);\n        });\n      }\n    });\n  }\n  // Remove checked keys form bottom to top\n  halfCheckedKeys = new Set();\n  var visitedKeys = new Set();\n  for (var _level2 = maxLevel; _level2 >= 0; _level2 -= 1) {\n    var _entities2 = levelEntities.get(_level2) || new Set();\n    _entities2.forEach(function (entity) {\n      var parent = entity.parent,\n        node = entity.node;\n      // Skip if no need to check\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      }\n      // Skip if parent is disabled\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref3) {\n        var key = _ref3.key;\n        var checked = checkedKeys.has(key);\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n      if (!allChecked) {\n        checkedKeys.delete(parent.key);\n      }\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n      visitedKeys.add(parent.key);\n    });\n  }\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n}\n/**\n * Conduct with keys.\n * @param keyList current key list\n * @param keyEntities key - dataEntity map\n * @param mode `fill` to fill missing key, `clean` to remove useless key\n */\nexport function conductCheck(keyList, checked, keyEntities, getCheckDisabled) {\n  var warningMissKeys = [];\n  var syntheticGetCheckDisabled;\n  if (getCheckDisabled) {\n    syntheticGetCheckDisabled = getCheckDisabled;\n  } else {\n    syntheticGetCheckDisabled = isCheckDisabled;\n  }\n  // We only handle exist keys\n  var keys = new Set(keyList.filter(function (key) {\n    var hasEntity = !!keyEntities[key];\n    if (!hasEntity) {\n      warningMissKeys.push(key);\n    }\n    return hasEntity;\n  }));\n  var levelEntities = new Map();\n  var maxLevel = 0;\n  // Convert entities by level for calculation\n  Object.keys(keyEntities).forEach(function (key) {\n    var entity = keyEntities[key];\n    var level = entity.level;\n    var levelSet = levelEntities.get(level);\n    if (!levelSet) {\n      levelSet = new Set();\n      levelEntities.set(level, levelSet);\n    }\n    levelSet.add(entity);\n    maxLevel = Math.max(maxLevel, level);\n  });\n  warning(!warningMissKeys.length, \"Tree missing follow keys: \".concat(warningMissKeys.slice(0, 100).map(function (key) {\n    return \"'\".concat(key, \"'\");\n  }).join(', ')));\n  var result;\n  if (checked === true) {\n    result = fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  } else {\n    result = cleanConductCheck(keys, checked.halfCheckedKeys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  }\n  return result;\n}","import * as React from 'react';\nvar CascaderContext = /*#__PURE__*/React.createContext(null);\nexport default CascaderContext;","export var VALUE_SPLIT = '__RC_CASCADER_SPLIT__';\nexport var SHOW_PARENT = 'SHOW_PARENT';\nexport var SHOW_CHILD = 'SHOW_CHILD';\nexport function toPathKey(value) {\n  return value.join(VALUE_SPLIT);\n}\nexport function toPathKeys(value) {\n  return value.map(toPathKey);\n}\nexport function toPathValueStr(pathKey) {\n  return pathKey.split(VALUE_SPLIT);\n}\nexport function fillFieldNames(fieldNames) {\n  var _ref = fieldNames || {},\n    label = _ref.label,\n    value = _ref.value,\n    children = _ref.children;\n  var val = value || 'value';\n  return {\n    label: label || 'label',\n    value: val,\n    key: val,\n    children: children || 'children'\n  };\n}\nexport function isLeaf(option, fieldNames) {\n  var _option$isLeaf, _option$fieldNames$ch;\n  return (_option$isLeaf = option.isLeaf) !== null && _option$isLeaf !== void 0 ? _option$isLeaf : !((_option$fieldNames$ch = option[fieldNames.children]) === null || _option$fieldNames$ch === void 0 ? void 0 : _option$fieldNames$ch.length);\n}\nexport function scrollIntoParentView(element) {\n  var parent = element.parentElement;\n  if (!parent) {\n    return;\n  }\n  var elementToParent = element.offsetTop - parent.offsetTop; // offsetParent may not be parent.\n  if (elementToParent - parent.scrollTop < 0) {\n    parent.scrollTo({\n      top: elementToParent\n    });\n  } else if (elementToParent + element.offsetHeight - parent.scrollTop > parent.offsetHeight) {\n    parent.scrollTo({\n      top: elementToParent + element.offsetHeight - parent.offsetHeight\n    });\n  }\n}","import { SHOW_CHILD } from './commonUtil';\nexport function formatStrategyValues(pathKeys, getKeyPathEntities, showCheckedStrategy) {\n  var valueSet = new Set(pathKeys);\n  var keyPathEntities = getKeyPathEntities();\n  return pathKeys.filter(function (key) {\n    var entity = keyPathEntities[key];\n    var parent = entity ? entity.parent : null;\n    var children = entity ? entity.children : null;\n    return showCheckedStrategy === SHOW_CHILD ? !(children && children.some(function (child) {\n      return child.key && valueSet.has(child.key);\n    })) : !(parent && !parent.node.disabled && valueSet.has(parent.key));\n  });\n}\nexport function toPathOptions(valueCells, options, fieldNames) {\n  var stringMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var currentList = options;\n  var valueOptions = [];\n  var _loop = function _loop() {\n    var _currentList, _currentList2, _foundOption$fieldNam;\n    var valueCell = valueCells[i];\n    var foundIndex = (_currentList = currentList) === null || _currentList === void 0 ? void 0 : _currentList.findIndex(function (option) {\n      var val = option[fieldNames.value];\n      return stringMode ? String(val) === String(valueCell) : val === valueCell;\n    });\n    var foundOption = foundIndex !== -1 ? (_currentList2 = currentList) === null || _currentList2 === void 0 ? void 0 : _currentList2[foundIndex] : null;\n    valueOptions.push({\n      value: (_foundOption$fieldNam = foundOption === null || foundOption === void 0 ? void 0 : foundOption[fieldNames.value]) !== null && _foundOption$fieldNam !== void 0 ? _foundOption$fieldNam : valueCell,\n      index: foundIndex,\n      option: foundOption\n    });\n    currentList = foundOption === null || foundOption === void 0 ? void 0 : foundOption[fieldNames.children];\n  };\n  for (var i = 0; i < valueCells.length; i += 1) {\n    _loop();\n  }\n  return valueOptions;\n}","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { toPathOptions } from '../utils/treeUtil';\nimport * as React from 'react';\nimport { toPathKey } from '../utils/commonUtil';\nexport default (function (rawValues, options, fieldNames, multiple, displayRender) {\n  return React.useMemo(function () {\n    var mergedDisplayRender = displayRender ||\n    // Default displayRender\n    function (labels) {\n      var mergedLabels = multiple ? labels.slice(-1) : labels;\n      var SPLIT = ' / ';\n      if (mergedLabels.every(function (label) {\n        return ['string', 'number'].includes(_typeof(label));\n      })) {\n        return mergedLabels.join(SPLIT);\n      }\n      // If exist non-string value, use ReactNode instead\n      return mergedLabels.reduce(function (list, label, index) {\n        var keyedLabel = /*#__PURE__*/React.isValidElement(label) ? /*#__PURE__*/React.cloneElement(label, {\n          key: index\n        }) : label;\n        if (index === 0) {\n          return [keyedLabel];\n        }\n        return [].concat(_toConsumableArray(list), [SPLIT, keyedLabel]);\n      }, []);\n    };\n    return rawValues.map(function (valueCells) {\n      var _valueOptions, _valueOptions$option;\n      var valueOptions = toPathOptions(valueCells, options, fieldNames);\n      var label = mergedDisplayRender(valueOptions.map(function (_ref) {\n        var _option$fieldNames$la;\n        var option = _ref.option,\n          value = _ref.value;\n        return (_option$fieldNames$la = option === null || option === void 0 ? void 0 : option[fieldNames.label]) !== null && _option$fieldNames$la !== void 0 ? _option$fieldNames$la : value;\n      }), valueOptions.map(function (_ref2) {\n        var option = _ref2.option;\n        return option;\n      }));\n      var value = toPathKey(valueCells);\n      return {\n        label: label,\n        value: value,\n        key: value,\n        valueCells: valueCells,\n        disabled: (_valueOptions = valueOptions[valueOptions.length - 1]) === null || _valueOptions === void 0 ? void 0 : (_valueOptions$option = _valueOptions.option) === null || _valueOptions$option === void 0 ? void 0 : _valueOptions$option.disabled\n      };\n    });\n  }, [rawValues, options, fieldNames, displayRender, multiple]);\n});","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"children\"];\nimport toArray from \"rc-util/es/Children/toArray\";\nimport omit from \"rc-util/es/omit\";\nimport warning from \"rc-util/es/warning\";\nexport function getPosition(level, index) {\n  return \"\".concat(level, \"-\").concat(index);\n}\nexport function isTreeNode(node) {\n  return node && node.type && node.type.isTreeNode;\n}\nexport function getKey(key, pos) {\n  if (key !== null && key !== undefined) {\n    return key;\n  }\n  return pos;\n}\nexport function fillFieldNames(fieldNames) {\n  var _ref = fieldNames || {},\n    title = _ref.title,\n    _title = _ref._title,\n    key = _ref.key,\n    children = _ref.children;\n  var mergedTitle = title || 'title';\n  return {\n    title: mergedTitle,\n    _title: _title || [mergedTitle],\n    key: key || 'key',\n    children: children || 'children'\n  };\n}\n/**\n * Warning if TreeNode do not provides key\n */\nexport function warningWithoutKey(treeData, fieldNames) {\n  var keys = new Map();\n  function dig(list) {\n    var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    (list || []).forEach(function (treeNode) {\n      var key = treeNode[fieldNames.key];\n      var children = treeNode[fieldNames.children];\n      warning(key !== null && key !== undefined, \"Tree node must have a certain key: [\".concat(path).concat(key, \"]\"));\n      var recordKey = String(key);\n      warning(!keys.has(recordKey) || key === null || key === undefined, \"Same 'key' exist in the Tree: \".concat(recordKey));\n      keys.set(recordKey, true);\n      dig(children, \"\".concat(path).concat(recordKey, \" > \"));\n    });\n  }\n  dig(treeData);\n}\n/**\n * Convert `children` of Tree into `treeData` structure.\n */\nexport function convertTreeToData(rootNodes) {\n  function dig(node) {\n    var treeNodes = toArray(node);\n    return treeNodes.map(function (treeNode) {\n      // Filter invalidate node\n      if (!isTreeNode(treeNode)) {\n        warning(!treeNode, 'Tree/TreeNode can only accept TreeNode as children.');\n        return null;\n      }\n      var key = treeNode.key;\n      var _treeNode$props = treeNode.props,\n        children = _treeNode$props.children,\n        rest = _objectWithoutProperties(_treeNode$props, _excluded);\n      var dataNode = _objectSpread({\n        key: key\n      }, rest);\n      var parsedChildren = dig(children);\n      if (parsedChildren.length) {\n        dataNode.children = parsedChildren;\n      }\n      return dataNode;\n    }).filter(function (dataNode) {\n      return dataNode;\n    });\n  }\n  return dig(rootNodes);\n}\n/**\n * Flat nest tree data into flatten list. This is used for virtual list render.\n * @param treeNodeList Origin data node list\n * @param expandedKeys\n * need expanded keys, provides `true` means all expanded (used in `rc-tree-select`).\n */\nexport function flattenTreeData(treeNodeList, expandedKeys, fieldNames) {\n  var _fillFieldNames = fillFieldNames(fieldNames),\n    fieldTitles = _fillFieldNames._title,\n    fieldKey = _fillFieldNames.key,\n    fieldChildren = _fillFieldNames.children;\n  var expandedKeySet = new Set(expandedKeys === true ? [] : expandedKeys);\n  var flattenList = [];\n  function dig(list) {\n    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return list.map(function (treeNode, index) {\n      var pos = getPosition(parent ? parent.pos : '0', index);\n      var mergedKey = getKey(treeNode[fieldKey], pos);\n      // Pick matched title in field title list\n      var mergedTitle;\n      for (var i = 0; i < fieldTitles.length; i += 1) {\n        var fieldTitle = fieldTitles[i];\n        if (treeNode[fieldTitle] !== undefined) {\n          mergedTitle = treeNode[fieldTitle];\n          break;\n        }\n      }\n      // Add FlattenDataNode into list\n      var flattenNode = _objectSpread(_objectSpread({}, omit(treeNode, [].concat(_toConsumableArray(fieldTitles), [fieldKey, fieldChildren]))), {}, {\n        title: mergedTitle,\n        key: mergedKey,\n        parent: parent,\n        pos: pos,\n        children: null,\n        data: treeNode,\n        isStart: [].concat(_toConsumableArray(parent ? parent.isStart : []), [index === 0]),\n        isEnd: [].concat(_toConsumableArray(parent ? parent.isEnd : []), [index === list.length - 1])\n      });\n      flattenList.push(flattenNode);\n      // Loop treeNode children\n      if (expandedKeys === true || expandedKeySet.has(mergedKey)) {\n        flattenNode.children = dig(treeNode[fieldChildren] || [], flattenNode);\n      } else {\n        flattenNode.children = [];\n      }\n      return flattenNode;\n    });\n  }\n  dig(treeNodeList);\n  return flattenList;\n}\n/**\n * Traverse all the data by `treeData`.\n * Please not use it out of the `rc-tree` since we may refactor this code.\n */\nexport function traverseDataNodes(dataNodes, callback,\n// To avoid too many params, let use config instead of origin param\nconfig) {\n  var mergedConfig = {};\n  if (_typeof(config) === 'object') {\n    mergedConfig = config;\n  } else {\n    mergedConfig = {\n      externalGetKey: config\n    };\n  }\n  mergedConfig = mergedConfig || {};\n  // Init config\n  var _mergedConfig = mergedConfig,\n    childrenPropName = _mergedConfig.childrenPropName,\n    externalGetKey = _mergedConfig.externalGetKey,\n    fieldNames = _mergedConfig.fieldNames;\n  var _fillFieldNames2 = fillFieldNames(fieldNames),\n    fieldKey = _fillFieldNames2.key,\n    fieldChildren = _fillFieldNames2.children;\n  var mergeChildrenPropName = childrenPropName || fieldChildren;\n  // Get keys\n  var syntheticGetKey;\n  if (externalGetKey) {\n    if (typeof externalGetKey === 'string') {\n      syntheticGetKey = function syntheticGetKey(node) {\n        return node[externalGetKey];\n      };\n    } else if (typeof externalGetKey === 'function') {\n      syntheticGetKey = function syntheticGetKey(node) {\n        return externalGetKey(node);\n      };\n    }\n  } else {\n    syntheticGetKey = function syntheticGetKey(node, pos) {\n      return getKey(node[fieldKey], pos);\n    };\n  }\n  // Process\n  function processNode(node, index, parent, pathNodes) {\n    var children = node ? node[mergeChildrenPropName] : dataNodes;\n    var pos = node ? getPosition(parent.pos, index) : '0';\n    var connectNodes = node ? [].concat(_toConsumableArray(pathNodes), [node]) : [];\n    // Process node if is not root\n    if (node) {\n      var key = syntheticGetKey(node, pos);\n      var data = {\n        node: node,\n        index: index,\n        pos: pos,\n        key: key,\n        parentPos: parent.node ? parent.pos : null,\n        level: parent.level + 1,\n        nodes: connectNodes\n      };\n      callback(data);\n    }\n    // Process children node\n    if (children) {\n      children.forEach(function (subNode, subIndex) {\n        processNode(subNode, subIndex, {\n          node: node,\n          pos: pos,\n          level: parent ? parent.level + 1 : -1\n        }, connectNodes);\n      });\n    }\n  }\n  processNode(null);\n}\n/**\n * Convert `treeData` into entity records.\n */\nexport function convertDataToEntities(dataNodes) {\n  var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n    initWrapper = _ref2.initWrapper,\n    processEntity = _ref2.processEntity,\n    onProcessFinished = _ref2.onProcessFinished,\n    externalGetKey = _ref2.externalGetKey,\n    childrenPropName = _ref2.childrenPropName,\n    fieldNames = _ref2.fieldNames;\n  var /** @deprecated Use `config.externalGetKey` instead */\n  legacyExternalGetKey = arguments.length > 2 ? arguments[2] : undefined;\n  // Init config\n  var mergedExternalGetKey = externalGetKey || legacyExternalGetKey;\n  var posEntities = {};\n  var keyEntities = {};\n  var wrapper = {\n    posEntities: posEntities,\n    keyEntities: keyEntities\n  };\n  if (initWrapper) {\n    wrapper = initWrapper(wrapper) || wrapper;\n  }\n  traverseDataNodes(dataNodes, function (item) {\n    var node = item.node,\n      index = item.index,\n      pos = item.pos,\n      key = item.key,\n      parentPos = item.parentPos,\n      level = item.level,\n      nodes = item.nodes;\n    var entity = {\n      node: node,\n      nodes: nodes,\n      index: index,\n      key: key,\n      pos: pos,\n      level: level\n    };\n    var mergedKey = getKey(key, pos);\n    posEntities[pos] = entity;\n    keyEntities[mergedKey] = entity;\n    // Fill children\n    entity.parent = posEntities[parentPos];\n    if (entity.parent) {\n      entity.parent.children = entity.parent.children || [];\n      entity.parent.children.push(entity);\n    }\n    if (processEntity) {\n      processEntity(entity, wrapper);\n    }\n  }, {\n    externalGetKey: mergedExternalGetKey,\n    childrenPropName: childrenPropName,\n    fieldNames: fieldNames\n  });\n  if (onProcessFinished) {\n    onProcessFinished(wrapper);\n  }\n  return wrapper;\n}\n/**\n * Get TreeNode props with Tree props.\n */\nexport function getTreeNodeProps(key, _ref3) {\n  var expandedKeys = _ref3.expandedKeys,\n    selectedKeys = _ref3.selectedKeys,\n    loadedKeys = _ref3.loadedKeys,\n    loadingKeys = _ref3.loadingKeys,\n    checkedKeys = _ref3.checkedKeys,\n    halfCheckedKeys = _ref3.halfCheckedKeys,\n    dragOverNodeKey = _ref3.dragOverNodeKey,\n    dropPosition = _ref3.dropPosition,\n    keyEntities = _ref3.keyEntities;\n  var entity = keyEntities[key];\n  var treeNodeProps = {\n    eventKey: key,\n    expanded: expandedKeys.indexOf(key) !== -1,\n    selected: selectedKeys.indexOf(key) !== -1,\n    loaded: loadedKeys.indexOf(key) !== -1,\n    loading: loadingKeys.indexOf(key) !== -1,\n    checked: checkedKeys.indexOf(key) !== -1,\n    halfChecked: halfCheckedKeys.indexOf(key) !== -1,\n    pos: String(entity ? entity.pos : ''),\n    // [Legacy] Drag props\n    // Since the interaction of drag is changed, the semantic of the props are\n    // not accuracy, I think it should be finally removed\n    dragOver: dragOverNodeKey === key && dropPosition === 0,\n    dragOverGapTop: dragOverNodeKey === key && dropPosition === -1,\n    dragOverGapBottom: dragOverNodeKey === key && dropPosition === 1\n  };\n  return treeNodeProps;\n}\nexport function convertNodePropsToEventData(props) {\n  var data = props.data,\n    expanded = props.expanded,\n    selected = props.selected,\n    checked = props.checked,\n    loaded = props.loaded,\n    loading = props.loading,\n    halfChecked = props.halfChecked,\n    dragOver = props.dragOver,\n    dragOverGapTop = props.dragOverGapTop,\n    dragOverGapBottom = props.dragOverGapBottom,\n    pos = props.pos,\n    active = props.active,\n    eventKey = props.eventKey;\n  var eventData = _objectSpread(_objectSpread({}, data), {}, {\n    expanded: expanded,\n    selected: selected,\n    checked: checked,\n    loaded: loaded,\n    loading: loading,\n    halfChecked: halfChecked,\n    dragOver: dragOver,\n    dragOverGapTop: dragOverGapTop,\n    dragOverGapBottom: dragOverGapBottom,\n    pos: pos,\n    active: active,\n    key: eventKey\n  });\n  if (!('props' in eventData)) {\n    Object.defineProperty(eventData, 'props', {\n      get: function get() {\n        warning(false, 'Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`.');\n        return props;\n      }\n    });\n  }\n  return eventData;\n}","import * as React from 'react';\n/**\n * Same as `React.useCallback` but always return a memoized function\n * but redirect to real function.\n */\nexport default function useRefFunc(callback) {\n  var funcRef = React.useRef();\n  funcRef.current = callback;\n  var cacheFn = React.useCallback(function () {\n    return funcRef.current.apply(funcRef, arguments);\n  }, []);\n  return cacheFn;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nexport var SEARCH_MARK = '__rc_cascader_search_mark__';\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\nvar defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\nexport default (function (search, options, fieldNames, prefixCls, config, changeOnSelect) {\n  var _config$filter = config.filter,\n    filter = _config$filter === void 0 ? defaultFilter : _config$filter,\n    _config$render = config.render,\n    render = _config$render === void 0 ? defaultRender : _config$render,\n    _config$limit = config.limit,\n    limit = _config$limit === void 0 ? 50 : _config$limit,\n    sort = config.sort;\n  return React.useMemo(function () {\n    var filteredOptions = [];\n    if (!search) {\n      return [];\n    }\n    function dig(list, pathOptions) {\n      list.forEach(function (option) {\n        // Perf saving when `sort` is disabled and `limit` is provided\n        if (!sort && limit > 0 && filteredOptions.length >= limit) {\n          return;\n        }\n        var connectedPathOptions = [].concat(_toConsumableArray(pathOptions), [option]);\n        var children = option[fieldNames.children];\n        // If current option is filterable\n        if (\n        // If is leaf option\n        !children || children.length === 0 ||\n        // If is changeOnSelect\n        changeOnSelect) {\n          if (filter(search, connectedPathOptions, {\n            label: fieldNames.label\n          })) {\n            var _objectSpread2;\n            filteredOptions.push(_objectSpread(_objectSpread({}, option), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, fieldNames.label, render(search, connectedPathOptions, prefixCls, fieldNames)), _defineProperty(_objectSpread2, SEARCH_MARK, connectedPathOptions), _defineProperty(_objectSpread2, fieldNames.children, undefined), _objectSpread2)));\n          }\n        }\n        if (children) {\n          dig(option[fieldNames.children], connectedPathOptions);\n        }\n      });\n    }\n    dig(options, []);\n    // Do sort\n    if (sort) {\n      filteredOptions.sort(function (a, b) {\n        return sort(a[SEARCH_MARK], b[SEARCH_MARK], search, fieldNames);\n      });\n    }\n    return limit > 0 ? filteredOptions.slice(0, limit) : filteredOptions;\n  }, [search, options, fieldNames, prefixCls, render, changeOnSelect, filter, sort, limit]);\n});","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport CascaderContext from '../context';\nexport default function Checkbox(_ref) {\n  var _classNames;\n  var prefixCls = _ref.prefixCls,\n    checked = _ref.checked,\n    halfChecked = _ref.halfChecked,\n    disabled = _ref.disabled,\n    onClick = _ref.onClick;\n  var _React$useContext = React.useContext(CascaderContext),\n    checkable = _React$useContext.checkable;\n  var customCheckbox = typeof checkable !== 'boolean' ? checkable : null;\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: classNames(\"\".concat(prefixCls), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-checked\"), checked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-indeterminate\"), !checked && halfChecked), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames)),\n    onClick: onClick\n  }, customCheckbox);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { isLeaf, toPathKey } from '../utils/commonUtil';\nimport CascaderContext from '../context';\nimport Checkbox from './Checkbox';\nimport { SEARCH_MARK } from '../hooks/useSearchOptions';\nexport var FIX_LABEL = '__cascader_fix_label__';\nexport default function Column(_ref) {\n  var prefixCls = _ref.prefixCls,\n    multiple = _ref.multiple,\n    options = _ref.options,\n    activeValue = _ref.activeValue,\n    prevValuePath = _ref.prevValuePath,\n    onToggleOpen = _ref.onToggleOpen,\n    onSelect = _ref.onSelect,\n    onActive = _ref.onActive,\n    checkedSet = _ref.checkedSet,\n    halfCheckedSet = _ref.halfCheckedSet,\n    loadingKeys = _ref.loadingKeys,\n    isSelectable = _ref.isSelectable;\n  var menuPrefixCls = \"\".concat(prefixCls, \"-menu\");\n  var menuItemPrefixCls = \"\".concat(prefixCls, \"-menu-item\");\n  var _React$useContext = React.useContext(CascaderContext),\n    fieldNames = _React$useContext.fieldNames,\n    changeOnSelect = _React$useContext.changeOnSelect,\n    expandTrigger = _React$useContext.expandTrigger,\n    expandIcon = _React$useContext.expandIcon,\n    loadingIcon = _React$useContext.loadingIcon,\n    dropdownMenuColumnStyle = _React$useContext.dropdownMenuColumnStyle;\n  var hoverOpen = expandTrigger === 'hover';\n  // ============================ Option ============================\n  var optionInfoList = React.useMemo(function () {\n    return options.map(function (option) {\n      var _option$FIX_LABEL;\n      var disabled = option.disabled;\n      var searchOptions = option[SEARCH_MARK];\n      var label = (_option$FIX_LABEL = option[FIX_LABEL]) !== null && _option$FIX_LABEL !== void 0 ? _option$FIX_LABEL : option[fieldNames.label];\n      var value = option[fieldNames.value];\n      var isMergedLeaf = isLeaf(option, fieldNames);\n      // Get real value of option. Search option is different way.\n      var fullPath = searchOptions ? searchOptions.map(function (opt) {\n        return opt[fieldNames.value];\n      }) : [].concat(_toConsumableArray(prevValuePath), [value]);\n      var fullPathKey = toPathKey(fullPath);\n      var isLoading = loadingKeys.includes(fullPathKey);\n      // >>>>> checked\n      var checked = checkedSet.has(fullPathKey);\n      // >>>>> halfChecked\n      var halfChecked = halfCheckedSet.has(fullPathKey);\n      return {\n        disabled: disabled,\n        label: label,\n        value: value,\n        isLeaf: isMergedLeaf,\n        isLoading: isLoading,\n        checked: checked,\n        halfChecked: halfChecked,\n        option: option,\n        fullPath: fullPath,\n        fullPathKey: fullPathKey\n      };\n    });\n  }, [options, checkedSet, fieldNames, halfCheckedSet, loadingKeys, prevValuePath]);\n  // ============================ Render ============================\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: menuPrefixCls,\n    role: \"menu\"\n  }, optionInfoList.map(function (_ref2) {\n    var _classNames;\n    var disabled = _ref2.disabled,\n      label = _ref2.label,\n      value = _ref2.value,\n      isMergedLeaf = _ref2.isLeaf,\n      isLoading = _ref2.isLoading,\n      checked = _ref2.checked,\n      halfChecked = _ref2.halfChecked,\n      option = _ref2.option,\n      fullPath = _ref2.fullPath,\n      fullPathKey = _ref2.fullPathKey;\n    // >>>>> Open\n    var triggerOpenPath = function triggerOpenPath() {\n      if (!disabled) {\n        var nextValueCells = _toConsumableArray(fullPath);\n        if (hoverOpen && isMergedLeaf) {\n          nextValueCells.pop();\n        }\n        onActive(nextValueCells);\n      }\n    };\n    // >>>>> Selection\n    var triggerSelect = function triggerSelect() {\n      if (isSelectable(option)) {\n        onSelect(fullPath, isMergedLeaf);\n      }\n    };\n    // >>>>> Title\n    var title;\n    if (typeof option.title === 'string') {\n      title = option.title;\n    } else if (typeof label === 'string') {\n      title = label;\n    }\n    // >>>>> Render\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: fullPathKey,\n      className: classNames(menuItemPrefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(menuItemPrefixCls, \"-expand\"), !isMergedLeaf), _defineProperty(_classNames, \"\".concat(menuItemPrefixCls, \"-active\"), activeValue === value), _defineProperty(_classNames, \"\".concat(menuItemPrefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(menuItemPrefixCls, \"-loading\"), isLoading), _classNames)),\n      style: dropdownMenuColumnStyle,\n      role: \"menuitemcheckbox\",\n      title: title,\n      \"aria-checked\": checked,\n      \"data-path-key\": fullPathKey,\n      onClick: function onClick() {\n        triggerOpenPath();\n        if (!multiple || isMergedLeaf) {\n          triggerSelect();\n        }\n      },\n      onDoubleClick: function onDoubleClick() {\n        if (changeOnSelect) {\n          onToggleOpen(false);\n        }\n      },\n      onMouseEnter: function onMouseEnter() {\n        if (hoverOpen) {\n          triggerOpenPath();\n        }\n      },\n      onMouseDown: function onMouseDown(e) {\n        // Prevent selector from blurring\n        e.preventDefault();\n      }\n    }, multiple && /*#__PURE__*/React.createElement(Checkbox, {\n      prefixCls: \"\".concat(prefixCls, \"-checkbox\"),\n      checked: checked,\n      halfChecked: halfChecked,\n      disabled: disabled,\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        triggerSelect();\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(menuItemPrefixCls, \"-content\")\n    }, label), !isLoading && expandIcon && !isMergedLeaf && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(menuItemPrefixCls, \"-expand-icon\")\n    }, expandIcon), isLoading && loadingIcon && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(menuItemPrefixCls, \"-loading-icon\")\n    }, loadingIcon));\n  }));\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport CascaderContext from '../context';\nimport { useBaseProps } from 'rc-select';\n/**\n * Control the active open options path.\n */\nexport default (function () {\n  var _useBaseProps = useBaseProps(),\n    multiple = _useBaseProps.multiple,\n    open = _useBaseProps.open;\n  var _React$useContext = React.useContext(CascaderContext),\n    values = _React$useContext.values;\n  // Record current dropdown active options\n  // This also control the open status\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    activeValueCells = _React$useState2[0],\n    setActiveValueCells = _React$useState2[1];\n  React.useEffect(function () {\n    if (open && !multiple) {\n      var firstValueCells = values[0];\n      setActiveValueCells(firstValueCells || []);\n    }\n  }, /* eslint-disable react-hooks/exhaustive-deps */\n  [open]);\n  return [activeValueCells, setActiveValueCells];\n});","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useBaseProps } from 'rc-select';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport { SEARCH_MARK } from '../hooks/useSearchOptions';\nexport default (function (ref, options, fieldNames, activeValueCells, setActiveValueCells, onKeyBoardSelect) {\n  var _useBaseProps = useBaseProps(),\n    direction = _useBaseProps.direction,\n    searchValue = _useBaseProps.searchValue,\n    toggleOpen = _useBaseProps.toggleOpen,\n    open = _useBaseProps.open;\n  var rtl = direction === 'rtl';\n  var _React$useMemo = React.useMemo(function () {\n      var activeIndex = -1;\n      var currentOptions = options;\n      var mergedActiveIndexes = [];\n      var mergedActiveValueCells = [];\n      var len = activeValueCells.length;\n      // Fill validate active value cells and index\n      var _loop = function _loop(i) {\n        // Mark the active index for current options\n        var nextActiveIndex = currentOptions.findIndex(function (option) {\n          return option[fieldNames.value] === activeValueCells[i];\n        });\n        if (nextActiveIndex === -1) {\n          return \"break\";\n        }\n        activeIndex = nextActiveIndex;\n        mergedActiveIndexes.push(activeIndex);\n        mergedActiveValueCells.push(activeValueCells[i]);\n        currentOptions = currentOptions[activeIndex][fieldNames.children];\n      };\n      for (var i = 0; i < len && currentOptions; i += 1) {\n        var _ret = _loop(i);\n        if (_ret === \"break\") break;\n      }\n      // Fill last active options\n      var activeOptions = options;\n      for (var _i = 0; _i < mergedActiveIndexes.length - 1; _i += 1) {\n        activeOptions = activeOptions[mergedActiveIndexes[_i]][fieldNames.children];\n      }\n      return [mergedActiveValueCells, activeIndex, activeOptions];\n    }, [activeValueCells, fieldNames, options]),\n    _React$useMemo2 = _slicedToArray(_React$useMemo, 3),\n    validActiveValueCells = _React$useMemo2[0],\n    lastActiveIndex = _React$useMemo2[1],\n    lastActiveOptions = _React$useMemo2[2];\n  // Update active value cells and scroll to target element\n  var internalSetActiveValueCells = function internalSetActiveValueCells(next) {\n    setActiveValueCells(next);\n  };\n  // Same options offset\n  var offsetActiveOption = function offsetActiveOption(offset) {\n    var len = lastActiveOptions.length;\n    var currentIndex = lastActiveIndex;\n    if (currentIndex === -1 && offset < 0) {\n      currentIndex = len;\n    }\n    for (var i = 0; i < len; i += 1) {\n      currentIndex = (currentIndex + offset + len) % len;\n      var option = lastActiveOptions[currentIndex];\n      if (option && !option.disabled) {\n        var value = option[fieldNames.value];\n        var nextActiveCells = validActiveValueCells.slice(0, -1).concat(value);\n        internalSetActiveValueCells(nextActiveCells);\n        return;\n      }\n    }\n  };\n  // Different options offset\n  var prevColumn = function prevColumn() {\n    if (validActiveValueCells.length > 1) {\n      var nextActiveCells = validActiveValueCells.slice(0, -1);\n      internalSetActiveValueCells(nextActiveCells);\n    } else {\n      toggleOpen(false);\n    }\n  };\n  var nextColumn = function nextColumn() {\n    var _lastActiveOptions$la;\n    var nextOptions = ((_lastActiveOptions$la = lastActiveOptions[lastActiveIndex]) === null || _lastActiveOptions$la === void 0 ? void 0 : _lastActiveOptions$la[fieldNames.children]) || [];\n    var nextOption = nextOptions.find(function (option) {\n      return !option.disabled;\n    });\n    if (nextOption) {\n      var nextActiveCells = [].concat(_toConsumableArray(validActiveValueCells), [nextOption[fieldNames.value]]);\n      internalSetActiveValueCells(nextActiveCells);\n    }\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      // scrollTo: treeRef.current?.scrollTo,\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which;\n        switch (which) {\n          // >>> Arrow keys\n          case KeyCode.UP:\n          case KeyCode.DOWN:\n            {\n              var offset = 0;\n              if (which === KeyCode.UP) {\n                offset = -1;\n              } else if (which === KeyCode.DOWN) {\n                offset = 1;\n              }\n              if (offset !== 0) {\n                offsetActiveOption(offset);\n              }\n              break;\n            }\n          case KeyCode.LEFT:\n            {\n              if (searchValue) {\n                break;\n              }\n              if (rtl) {\n                nextColumn();\n              } else {\n                prevColumn();\n              }\n              break;\n            }\n          case KeyCode.RIGHT:\n            {\n              if (searchValue) {\n                break;\n              }\n              if (rtl) {\n                prevColumn();\n              } else {\n                nextColumn();\n              }\n              break;\n            }\n          case KeyCode.BACKSPACE:\n            {\n              if (!searchValue) {\n                prevColumn();\n              }\n              break;\n            }\n          // >>> Select\n          case KeyCode.ENTER:\n            {\n              if (validActiveValueCells.length) {\n                var option = lastActiveOptions[lastActiveIndex];\n                // Search option should revert back of origin options\n                var originOptions = (option === null || option === void 0 ? void 0 : option[SEARCH_MARK]) || [];\n                if (originOptions.length) {\n                  onKeyBoardSelect(originOptions.map(function (opt) {\n                    return opt[fieldNames.value];\n                  }), originOptions[originOptions.length - 1]);\n                } else {\n                  onKeyBoardSelect(validActiveValueCells, lastActiveOptions[lastActiveIndex]);\n                }\n              }\n              break;\n            }\n          // >>> Close\n          case KeyCode.ESC:\n            {\n              toggleOpen(false);\n              if (open) {\n                event.stopPropagation();\n              }\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {}\n    };\n  });\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n/* eslint-disable default-case */\nimport classNames from 'classnames';\nimport { useBaseProps } from 'rc-select';\nimport * as React from 'react';\nimport CascaderContext from '../context';\nimport { isLeaf, scrollIntoParentView, toPathKey, toPathKeys, toPathValueStr } from '../utils/commonUtil';\nimport { toPathOptions } from '../utils/treeUtil';\nimport Column, { FIX_LABEL } from './Column';\nimport useActive from './useActive';\nimport useKeyboard from './useKeyboard';\nvar RefOptionList = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _optionColumns$, _optionColumns$$optio, _ref3, _classNames;\n  var _useBaseProps = useBaseProps(),\n    prefixCls = _useBaseProps.prefixCls,\n    multiple = _useBaseProps.multiple,\n    searchValue = _useBaseProps.searchValue,\n    toggleOpen = _useBaseProps.toggleOpen,\n    notFoundContent = _useBaseProps.notFoundContent,\n    direction = _useBaseProps.direction;\n  var containerRef = React.useRef();\n  var rtl = direction === 'rtl';\n  var _React$useContext = React.useContext(CascaderContext),\n    options = _React$useContext.options,\n    values = _React$useContext.values,\n    halfValues = _React$useContext.halfValues,\n    fieldNames = _React$useContext.fieldNames,\n    changeOnSelect = _React$useContext.changeOnSelect,\n    onSelect = _React$useContext.onSelect,\n    searchOptions = _React$useContext.searchOptions,\n    dropdownPrefixCls = _React$useContext.dropdownPrefixCls,\n    loadData = _React$useContext.loadData,\n    expandTrigger = _React$useContext.expandTrigger;\n  var mergedPrefixCls = dropdownPrefixCls || prefixCls;\n  // ========================= loadData =========================\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    loadingKeys = _React$useState2[0],\n    setLoadingKeys = _React$useState2[1];\n  var internalLoadData = function internalLoadData(valueCells) {\n    // Do not load when search\n    if (!loadData || searchValue) {\n      return;\n    }\n    var optionList = toPathOptions(valueCells, options, fieldNames);\n    var rawOptions = optionList.map(function (_ref) {\n      var option = _ref.option;\n      return option;\n    });\n    var lastOption = rawOptions[rawOptions.length - 1];\n    if (lastOption && !isLeaf(lastOption, fieldNames)) {\n      var pathKey = toPathKey(valueCells);\n      setLoadingKeys(function (keys) {\n        return [].concat(_toConsumableArray(keys), [pathKey]);\n      });\n      loadData(rawOptions);\n    }\n  };\n  // zombieJ: This is bad. We should make this same as `rc-tree` to use Promise instead.\n  React.useEffect(function () {\n    if (loadingKeys.length) {\n      loadingKeys.forEach(function (loadingKey) {\n        var valueStrCells = toPathValueStr(loadingKey);\n        var optionList = toPathOptions(valueStrCells, options, fieldNames, true).map(function (_ref2) {\n          var option = _ref2.option;\n          return option;\n        });\n        var lastOption = optionList[optionList.length - 1];\n        if (!lastOption || lastOption[fieldNames.children] || isLeaf(lastOption, fieldNames)) {\n          setLoadingKeys(function (keys) {\n            return keys.filter(function (key) {\n              return key !== loadingKey;\n            });\n          });\n        }\n      });\n    }\n  }, [options, loadingKeys, fieldNames]);\n  // ========================== Values ==========================\n  var checkedSet = React.useMemo(function () {\n    return new Set(toPathKeys(values));\n  }, [values]);\n  var halfCheckedSet = React.useMemo(function () {\n    return new Set(toPathKeys(halfValues));\n  }, [halfValues]);\n  // ====================== Accessibility =======================\n  var _useActive = useActive(),\n    _useActive2 = _slicedToArray(_useActive, 2),\n    activeValueCells = _useActive2[0],\n    setActiveValueCells = _useActive2[1];\n  // =========================== Path ===========================\n  var onPathOpen = function onPathOpen(nextValueCells) {\n    setActiveValueCells(nextValueCells);\n    // Trigger loadData\n    internalLoadData(nextValueCells);\n  };\n  var isSelectable = function isSelectable(option) {\n    var disabled = option.disabled;\n    var isMergedLeaf = isLeaf(option, fieldNames);\n    return !disabled && (isMergedLeaf || changeOnSelect || multiple);\n  };\n  var onPathSelect = function onPathSelect(valuePath, leaf) {\n    var fromKeyboard = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    onSelect(valuePath);\n    if (!multiple && (leaf || changeOnSelect && (expandTrigger === 'hover' || fromKeyboard))) {\n      toggleOpen(false);\n    }\n  };\n  // ========================== Option ==========================\n  var mergedOptions = React.useMemo(function () {\n    if (searchValue) {\n      return searchOptions;\n    }\n    return options;\n  }, [searchValue, searchOptions, options]);\n  // ========================== Column ==========================\n  var optionColumns = React.useMemo(function () {\n    var optionList = [{\n      options: mergedOptions\n    }];\n    var currentList = mergedOptions;\n    var _loop = function _loop() {\n      var activeValueCell = activeValueCells[i];\n      var currentOption = currentList.find(function (option) {\n        return option[fieldNames.value] === activeValueCell;\n      });\n      var subOptions = currentOption === null || currentOption === void 0 ? void 0 : currentOption[fieldNames.children];\n      if (!(subOptions === null || subOptions === void 0 ? void 0 : subOptions.length)) {\n        return \"break\";\n      }\n      currentList = subOptions;\n      optionList.push({\n        options: subOptions\n      });\n    };\n    for (var i = 0; i < activeValueCells.length; i += 1) {\n      var _ret = _loop();\n      if (_ret === \"break\") break;\n    }\n    return optionList;\n  }, [mergedOptions, activeValueCells, fieldNames]);\n  // ========================= Keyboard =========================\n  var onKeyboardSelect = function onKeyboardSelect(selectValueCells, option) {\n    if (isSelectable(option)) {\n      onPathSelect(selectValueCells, isLeaf(option, fieldNames), true);\n    }\n  };\n  useKeyboard(ref, mergedOptions, fieldNames, activeValueCells, onPathOpen, onKeyboardSelect);\n  // >>>>> Active Scroll\n  React.useEffect(function () {\n    for (var i = 0; i < activeValueCells.length; i += 1) {\n      var _containerRef$current;\n      var cellPath = activeValueCells.slice(0, i + 1);\n      var cellKeyPath = toPathKey(cellPath);\n      var ele = (_containerRef$current = containerRef.current) === null || _containerRef$current === void 0 ? void 0 : _containerRef$current.querySelector(\"li[data-path-key=\\\"\".concat(cellKeyPath.replace(/\\\\{0,2}\"/g, '\\\\\"'), \"\\\"]\"));\n      if (ele) {\n        scrollIntoParentView(ele);\n      }\n    }\n  }, [activeValueCells]);\n  // ========================== Render ==========================\n  // >>>>> Empty\n  var isEmpty = !((_optionColumns$ = optionColumns[0]) === null || _optionColumns$ === void 0 ? void 0 : (_optionColumns$$optio = _optionColumns$.options) === null || _optionColumns$$optio === void 0 ? void 0 : _optionColumns$$optio.length);\n  var emptyList = [(_ref3 = {}, _defineProperty(_ref3, fieldNames.value, '__EMPTY__'), _defineProperty(_ref3, FIX_LABEL, notFoundContent), _defineProperty(_ref3, \"disabled\", true), _ref3)];\n  var columnProps = _objectSpread(_objectSpread({}, props), {}, {\n    multiple: !isEmpty && multiple,\n    onSelect: onPathSelect,\n    onActive: onPathOpen,\n    onToggleOpen: toggleOpen,\n    checkedSet: checkedSet,\n    halfCheckedSet: halfCheckedSet,\n    loadingKeys: loadingKeys,\n    isSelectable: isSelectable\n  });\n  // >>>>> Columns\n  var mergedOptionColumns = isEmpty ? [{\n    options: emptyList\n  }] : optionColumns;\n  var columnNodes = mergedOptionColumns.map(function (col, index) {\n    var prevValuePath = activeValueCells.slice(0, index);\n    var activeValue = activeValueCells[index];\n    return /*#__PURE__*/React.createElement(Column, _extends({\n      key: index\n    }, columnProps, {\n      prefixCls: mergedPrefixCls,\n      options: col.options,\n      prevValuePath: prevValuePath,\n      activeValue: activeValue\n    }));\n  });\n  // >>>>> Render\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(\"\".concat(mergedPrefixCls, \"-menus\"), (_classNames = {}, _defineProperty(_classNames, \"\".concat(mergedPrefixCls, \"-menu-empty\"), isEmpty), _defineProperty(_classNames, \"\".concat(mergedPrefixCls, \"-rtl\"), rtl), _classNames)),\n    ref: containerRef\n  }, columnNodes);\n});\nexport default RefOptionList;","import warning from \"rc-util/es/warning\";\nfunction warningProps(props) {\n  var onPopupVisibleChange = props.onPopupVisibleChange,\n    popupVisible = props.popupVisible,\n    popupClassName = props.popupClassName,\n    popupPlacement = props.popupPlacement;\n  warning(!onPopupVisibleChange, '`onPopupVisibleChange` is deprecated. Please use `onDropdownVisibleChange` instead.');\n  warning(popupVisible === undefined, '`popupVisible` is deprecated. Please use `open` instead.');\n  warning(popupClassName === undefined, '`popupClassName` is deprecated. Please use `dropdownClassName` instead.');\n  warning(popupPlacement === undefined, '`popupPlacement` is deprecated. Please use `placement` instead.');\n}\n// value in Cascader options should not be null\nexport function warningNullOptions(options, fieldNames) {\n  if (options) {\n    var recursiveOptions = function recursiveOptions(optionsList) {\n      for (var i = 0; i < optionsList.length; i++) {\n        var option = optionsList[i];\n        if (option[fieldNames === null || fieldNames === void 0 ? void 0 : fieldNames.value] === null) {\n          warning(false, '`value` in Cascader options should not be `null`.');\n          return true;\n        }\n        if (Array.isArray(option[fieldNames === null || fieldNames === void 0 ? void 0 : fieldNames.children]) && recursiveOptions(option[fieldNames === null || fieldNames === void 0 ? void 0 : fieldNames.children])) {\n          return true;\n        }\n      }\n    };\n    recursiveOptions(options);\n  }\n}\nexport default warningProps;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"id\", \"prefixCls\", \"fieldNames\", \"defaultValue\", \"value\", \"changeOnSelect\", \"onChange\", \"displayRender\", \"checkable\", \"searchValue\", \"onSearch\", \"showSearch\", \"expandTrigger\", \"options\", \"dropdownPrefixCls\", \"loadData\", \"popupVisible\", \"open\", \"popupClassName\", \"dropdownClassName\", \"dropdownMenuColumnStyle\", \"popupPlacement\", \"placement\", \"onDropdownVisibleChange\", \"onPopupVisibleChange\", \"expandIcon\", \"loadingIcon\", \"children\", \"dropdownMatchSelectWidth\", \"showCheckedStrategy\"];\nimport { BaseSelect } from 'rc-select';\nimport useId from \"rc-select/es/hooks/useId\";\nimport { conductCheck } from \"rc-tree/es/utils/conductUtil\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport * as React from 'react';\nimport CascaderContext from './context';\nimport useDisplayValues from './hooks/useDisplayValues';\nimport useEntities from './hooks/useEntities';\nimport useMissingValues from './hooks/useMissingValues';\nimport useRefFunc from './hooks/useRefFunc';\nimport useSearchConfig from './hooks/useSearchConfig';\nimport useSearchOptions from './hooks/useSearchOptions';\nimport OptionList from './OptionList';\nimport { fillFieldNames, SHOW_CHILD, SHOW_PARENT, toPathKey, toPathKeys } from './utils/commonUtil';\nimport { formatStrategyValues, toPathOptions } from './utils/treeUtil';\nimport warningProps, { warningNullOptions } from './utils/warningPropsUtil';\nfunction isMultipleValue(value) {\n  return Array.isArray(value) && Array.isArray(value[0]);\n}\nfunction toRawValues(value) {\n  if (!value) {\n    return [];\n  }\n  if (isMultipleValue(value)) {\n    return value;\n  }\n  return (value.length === 0 ? [] : [value]).map(function (val) {\n    return Array.isArray(val) ? val : [val];\n  });\n}\nvar Cascader = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var id = props.id,\n    _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-cascader' : _props$prefixCls,\n    fieldNames = props.fieldNames,\n    defaultValue = props.defaultValue,\n    value = props.value,\n    changeOnSelect = props.changeOnSelect,\n    onChange = props.onChange,\n    displayRender = props.displayRender,\n    checkable = props.checkable,\n    searchValue = props.searchValue,\n    onSearch = props.onSearch,\n    showSearch = props.showSearch,\n    expandTrigger = props.expandTrigger,\n    options = props.options,\n    dropdownPrefixCls = props.dropdownPrefixCls,\n    loadData = props.loadData,\n    popupVisible = props.popupVisible,\n    open = props.open,\n    popupClassName = props.popupClassName,\n    dropdownClassName = props.dropdownClassName,\n    dropdownMenuColumnStyle = props.dropdownMenuColumnStyle,\n    popupPlacement = props.popupPlacement,\n    placement = props.placement,\n    onDropdownVisibleChange = props.onDropdownVisibleChange,\n    onPopupVisibleChange = props.onPopupVisibleChange,\n    _props$expandIcon = props.expandIcon,\n    expandIcon = _props$expandIcon === void 0 ? '>' : _props$expandIcon,\n    loadingIcon = props.loadingIcon,\n    children = props.children,\n    _props$dropdownMatchS = props.dropdownMatchSelectWidth,\n    dropdownMatchSelectWidth = _props$dropdownMatchS === void 0 ? false : _props$dropdownMatchS,\n    _props$showCheckedStr = props.showCheckedStrategy,\n    showCheckedStrategy = _props$showCheckedStr === void 0 ? SHOW_PARENT : _props$showCheckedStr,\n    restProps = _objectWithoutProperties(props, _excluded);\n  var mergedId = useId(id);\n  var multiple = !!checkable;\n  // =========================== Values ===========================\n  var _useMergedState = useMergedState(defaultValue, {\n      value: value,\n      postState: toRawValues\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    rawValues = _useMergedState2[0],\n    setRawValues = _useMergedState2[1];\n  // ========================= FieldNames =========================\n  var mergedFieldNames = React.useMemo(function () {\n    return fillFieldNames(fieldNames);\n  }, /* eslint-disable react-hooks/exhaustive-deps */\n  [JSON.stringify(fieldNames)]);\n  // =========================== Option ===========================\n  var mergedOptions = React.useMemo(function () {\n    return options || [];\n  }, [options]);\n  // Only used in multiple mode, this fn will not call in single mode\n  var getPathKeyEntities = useEntities(mergedOptions, mergedFieldNames);\n  /** Convert path key back to value format */\n  var getValueByKeyPath = React.useCallback(function (pathKeys) {\n    var keyPathEntities = getPathKeyEntities();\n    return pathKeys.map(function (pathKey) {\n      var nodes = keyPathEntities[pathKey].nodes;\n      return nodes.map(function (node) {\n        return node[mergedFieldNames.value];\n      });\n    });\n  }, [getPathKeyEntities, mergedFieldNames]);\n  // =========================== Search ===========================\n  var _useMergedState3 = useMergedState('', {\n      value: searchValue,\n      postState: function postState(search) {\n        return search || '';\n      }\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    mergedSearchValue = _useMergedState4[0],\n    setSearchValue = _useMergedState4[1];\n  var onInternalSearch = function onInternalSearch(searchText, info) {\n    setSearchValue(searchText);\n    if (info.source !== 'blur' && onSearch) {\n      onSearch(searchText);\n    }\n  };\n  var _useSearchConfig = useSearchConfig(showSearch),\n    _useSearchConfig2 = _slicedToArray(_useSearchConfig, 2),\n    mergedShowSearch = _useSearchConfig2[0],\n    searchConfig = _useSearchConfig2[1];\n  var searchOptions = useSearchOptions(mergedSearchValue, mergedOptions, mergedFieldNames, dropdownPrefixCls || prefixCls, searchConfig, changeOnSelect);\n  // =========================== Values ===========================\n  var getMissingValues = useMissingValues(mergedOptions, mergedFieldNames);\n  // Fill `rawValues` with checked conduction values\n  var _React$useMemo = React.useMemo(function () {\n      var _getMissingValues = getMissingValues(rawValues),\n        _getMissingValues2 = _slicedToArray(_getMissingValues, 2),\n        existValues = _getMissingValues2[0],\n        missingValues = _getMissingValues2[1];\n      if (!multiple || !rawValues.length) {\n        return [existValues, [], missingValues];\n      }\n      var keyPathValues = toPathKeys(existValues);\n      var keyPathEntities = getPathKeyEntities();\n      var _conductCheck = conductCheck(keyPathValues, true, keyPathEntities),\n        checkedKeys = _conductCheck.checkedKeys,\n        halfCheckedKeys = _conductCheck.halfCheckedKeys;\n      // Convert key back to value cells\n      return [getValueByKeyPath(checkedKeys), getValueByKeyPath(halfCheckedKeys), missingValues];\n    }, [multiple, rawValues, getPathKeyEntities, getValueByKeyPath, getMissingValues]),\n    _React$useMemo2 = _slicedToArray(_React$useMemo, 3),\n    checkedValues = _React$useMemo2[0],\n    halfCheckedValues = _React$useMemo2[1],\n    missingCheckedValues = _React$useMemo2[2];\n  var deDuplicatedValues = React.useMemo(function () {\n    var checkedKeys = toPathKeys(checkedValues);\n    var deduplicateKeys = formatStrategyValues(checkedKeys, getPathKeyEntities, showCheckedStrategy);\n    return [].concat(_toConsumableArray(missingCheckedValues), _toConsumableArray(getValueByKeyPath(deduplicateKeys)));\n  }, [checkedValues, getPathKeyEntities, getValueByKeyPath, missingCheckedValues, showCheckedStrategy]);\n  var displayValues = useDisplayValues(deDuplicatedValues, mergedOptions, mergedFieldNames, multiple, displayRender);\n  // =========================== Change ===========================\n  var triggerChange = useRefFunc(function (nextValues) {\n    setRawValues(nextValues);\n    // Save perf if no need trigger event\n    if (onChange) {\n      var nextRawValues = toRawValues(nextValues);\n      var valueOptions = nextRawValues.map(function (valueCells) {\n        return toPathOptions(valueCells, mergedOptions, mergedFieldNames).map(function (valueOpt) {\n          return valueOpt.option;\n        });\n      });\n      var triggerValues = multiple ? nextRawValues : nextRawValues[0];\n      var triggerOptions = multiple ? valueOptions : valueOptions[0];\n      onChange(triggerValues, triggerOptions);\n    }\n  });\n  // =========================== Select ===========================\n  var onInternalSelect = useRefFunc(function (valuePath) {\n    setSearchValue('');\n    if (!multiple) {\n      triggerChange(valuePath);\n    } else {\n      // Prepare conduct required info\n      var pathKey = toPathKey(valuePath);\n      var checkedPathKeys = toPathKeys(checkedValues);\n      var halfCheckedPathKeys = toPathKeys(halfCheckedValues);\n      var existInChecked = checkedPathKeys.includes(pathKey);\n      var existInMissing = missingCheckedValues.some(function (valueCells) {\n        return toPathKey(valueCells) === pathKey;\n      });\n      // Do update\n      var nextCheckedValues = checkedValues;\n      var nextMissingValues = missingCheckedValues;\n      if (existInMissing && !existInChecked) {\n        // Missing value only do filter\n        nextMissingValues = missingCheckedValues.filter(function (valueCells) {\n          return toPathKey(valueCells) !== pathKey;\n        });\n      } else {\n        // Update checked key first\n        var nextRawCheckedKeys = existInChecked ? checkedPathKeys.filter(function (key) {\n          return key !== pathKey;\n        }) : [].concat(_toConsumableArray(checkedPathKeys), [pathKey]);\n        var pathKeyEntities = getPathKeyEntities();\n        // Conduction by selected or not\n        var checkedKeys;\n        if (existInChecked) {\n          var _conductCheck2 = conductCheck(nextRawCheckedKeys, {\n            checked: false,\n            halfCheckedKeys: halfCheckedPathKeys\n          }, pathKeyEntities);\n          checkedKeys = _conductCheck2.checkedKeys;\n        } else {\n          var _conductCheck3 = conductCheck(nextRawCheckedKeys, true, pathKeyEntities);\n          checkedKeys = _conductCheck3.checkedKeys;\n        }\n        // Roll up to parent level keys\n        var deDuplicatedKeys = formatStrategyValues(checkedKeys, getPathKeyEntities, showCheckedStrategy);\n        nextCheckedValues = getValueByKeyPath(deDuplicatedKeys);\n      }\n      triggerChange([].concat(_toConsumableArray(nextMissingValues), _toConsumableArray(nextCheckedValues)));\n    }\n  });\n  // Display Value change logic\n  var onDisplayValuesChange = function onDisplayValuesChange(_, info) {\n    if (info.type === 'clear') {\n      triggerChange([]);\n      return;\n    }\n    // Cascader do not support `add` type. Only support `remove`\n    var valueCells = info.values[0].valueCells;\n    onInternalSelect(valueCells);\n  };\n  // ============================ Open ============================\n  var mergedOpen = open !== undefined ? open : popupVisible;\n  var mergedDropdownClassName = dropdownClassName || popupClassName;\n  var mergedPlacement = placement || popupPlacement;\n  var onInternalDropdownVisibleChange = function onInternalDropdownVisibleChange(nextVisible) {\n    onDropdownVisibleChange === null || onDropdownVisibleChange === void 0 ? void 0 : onDropdownVisibleChange(nextVisible);\n    onPopupVisibleChange === null || onPopupVisibleChange === void 0 ? void 0 : onPopupVisibleChange(nextVisible);\n  };\n  // ========================== Warning ===========================\n  if (process.env.NODE_ENV !== 'production') {\n    warningProps(props);\n    warningNullOptions(mergedOptions, mergedFieldNames);\n  }\n  // ========================== Context ===========================\n  var cascaderContext = React.useMemo(function () {\n    return {\n      options: mergedOptions,\n      fieldNames: mergedFieldNames,\n      values: checkedValues,\n      halfValues: halfCheckedValues,\n      changeOnSelect: changeOnSelect,\n      onSelect: onInternalSelect,\n      checkable: checkable,\n      searchOptions: searchOptions,\n      dropdownPrefixCls: dropdownPrefixCls,\n      loadData: loadData,\n      expandTrigger: expandTrigger,\n      expandIcon: expandIcon,\n      loadingIcon: loadingIcon,\n      dropdownMenuColumnStyle: dropdownMenuColumnStyle\n    };\n  }, [mergedOptions, mergedFieldNames, checkedValues, halfCheckedValues, changeOnSelect, onInternalSelect, checkable, searchOptions, dropdownPrefixCls, loadData, expandTrigger, expandIcon, loadingIcon, dropdownMenuColumnStyle]);\n  // ==============================================================\n  // ==                          Render                          ==\n  // ==============================================================\n  var emptyOptions = !(mergedSearchValue ? searchOptions : mergedOptions).length;\n  var dropdownStyle =\n  // Search to match width\n  mergedSearchValue && searchConfig.matchInputWidth ||\n  // Empty keep the width\n  emptyOptions ? {} : {\n    minWidth: 'auto'\n  };\n  return /*#__PURE__*/React.createElement(CascaderContext.Provider, {\n    value: cascaderContext\n  }, /*#__PURE__*/React.createElement(BaseSelect, _extends({}, restProps, {\n    // MISC\n    ref: ref,\n    id: mergedId,\n    prefixCls: prefixCls,\n    dropdownMatchSelectWidth: dropdownMatchSelectWidth,\n    dropdownStyle: dropdownStyle\n    // Value\n    ,\n    displayValues: displayValues,\n    onDisplayValuesChange: onDisplayValuesChange,\n    mode: multiple ? 'multiple' : undefined\n    // Search\n    ,\n    searchValue: mergedSearchValue,\n    onSearch: onInternalSearch,\n    showSearch: mergedShowSearch\n    // Options\n    ,\n    OptionList: OptionList,\n    emptyOptions: emptyOptions\n    // Open\n    ,\n    open: mergedOpen,\n    dropdownClassName: mergedDropdownClassName,\n    placement: mergedPlacement,\n    onDropdownVisibleChange: onInternalDropdownVisibleChange\n    // Children\n    ,\n    getRawInputElement: function getRawInputElement() {\n      return children;\n    }\n  })));\n});\nif (process.env.NODE_ENV !== 'production') {\n  Cascader.displayName = 'Cascader';\n}\nCascader.SHOW_PARENT = SHOW_PARENT;\nCascader.SHOW_CHILD = SHOW_CHILD;\nexport default Cascader;","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { convertDataToEntities } from \"rc-tree/es/utils/treeUtil\";\nimport { VALUE_SPLIT } from '../utils/commonUtil';\n/** Lazy parse options data into conduct-able info to avoid perf issue in single mode */\nexport default (function (options, fieldNames) {\n  var cacheRef = React.useRef({\n    options: null,\n    info: null\n  });\n  var getEntities = React.useCallback(function () {\n    if (cacheRef.current.options !== options) {\n      cacheRef.current.options = options;\n      cacheRef.current.info = convertDataToEntities(options, {\n        fieldNames: fieldNames,\n        initWrapper: function initWrapper(wrapper) {\n          return _objectSpread(_objectSpread({}, wrapper), {}, {\n            pathKeyEntities: {}\n          });\n        },\n        processEntity: function processEntity(entity, wrapper) {\n          var pathKey = entity.nodes.map(function (node) {\n            return node[fieldNames.value];\n          }).join(VALUE_SPLIT);\n          wrapper.pathKeyEntities[pathKey] = entity;\n          // Overwrite origin key.\n          // this is very hack but we need let conduct logic work with connect path\n          entity.key = pathKey;\n        }\n      });\n    }\n    return cacheRef.current.info.pathKeyEntities;\n  }, [fieldNames, options]);\n  return getEntities;\n});","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\n// Convert `showSearch` to unique config\nexport default function useSearchConfig(showSearch) {\n  return React.useMemo(function () {\n    if (!showSearch) {\n      return [false, {}];\n    }\n    var searchConfig = {\n      matchInputWidth: true,\n      limit: 50\n    };\n    if (showSearch && _typeof(showSearch) === 'object') {\n      searchConfig = _objectSpread(_objectSpread({}, searchConfig), showSearch);\n    }\n    if (searchConfig.limit <= 0) {\n      delete searchConfig.limit;\n      if (process.env.NODE_ENV !== 'production') {\n        warning(false, \"'limit' of showSearch should be positive number or false.\");\n      }\n    }\n    return [true, searchConfig];\n  }, [showSearch]);\n}","import * as React from 'react';\nimport { toPathOptions } from '../utils/treeUtil';\nexport default (function (options, fieldNames) {\n  return React.useCallback(function (rawValues) {\n    var missingValues = [];\n    var existsValues = [];\n    rawValues.forEach(function (valueCell) {\n      var pathOptions = toPathOptions(valueCell, options, fieldNames);\n      if (pathOptions.every(function (opt) {\n        return opt.option;\n      })) {\n        existsValues.push(valueCell);\n      } else {\n        missingValues.push(valueCell);\n      }\n    });\n    return [existsValues, missingValues];\n  }, [options, fieldNames]);\n});","import Cascader from './Cascader';\nexport default Cascader;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n"],"names":["useAppDispatch","useDispatch","useAppSelector","useSelector","WUJIE_APP_ID","WUJIE_SCRIPT_ID","WUJIE_DATA_FLAG","CONTAINER_POSITION_DATA_FLAG","CONTAINER_OVERFLOW_DATA_FLAG","LOADING_DATA_FLAG","WUJIE_DATA_ATTACH_CSS_FLAG","WUJIE_ALL_EVENT","WUJIE_SHADE_STYLE","WUJIE_LOADING_STYLE","WUJIE_LOADING_SVG","WUJIE_TIPS_NO_URL","WUJIE_TIPS_RELOAD_DISABLED","WUJIE_TIPS_STOP_APP","WUJIE_TIPS_STOP_APP_DETAIL","WUJIE_TIPS_NO_SUBJECT","WUJIE_TIPS_SCRIPT_ERROR_REQUESTED","WUJIE_TIPS_CSS_ERROR_REQUESTED","WUJIE_TIPS_HTML_ERROR_REQUESTED","WUJIE_TIPS_REPEAT_RENDER","WUJIE_TIPS_NO_SCRIPT","isFunction","value","wujieSupport","window","Proxy","CustomElementRegistry","naughtySafari","document","all","callableFnCacheMap","WeakMap","isCallable","fn","has","callable","set","boundedMap","isBoundedFunction","get","bounded","name","indexOf","hasOwnProperty","fnRegexCheckCacheMap","isConstructable","hasPrototypeMethods","prototype","constructor","Object","getOwnPropertyNames","length","constructable","fnString","toString","test","setFnCacheMap","getTargetValue","target","p","boundValue","Function","bind","call","_key","defineProperty","enumerable","writable","getDegradeIframe","id","querySelector","concat","setAttrsToElement","element","attrs","keys","forEach","setAttribute","appRouteParse","url","error","Error","urlElement","anchorElementGenerator","appHostPath","protocol","host","appRoutePath","pathname","search","hash","startsWith","createElement","href","getAnchorElementQueryMap","anchorElement","queryList","replace","split","queryMap","query","_query$split","_query$split2","_slicedToArray","key","isMatchSyncQueryById","location","includes","fixElementCtrSrcOrHref","iframeWindow","elementCtr","attr","rawElementSetAttribute","Element","targetValue","getAbsolutePath","this","baseURI","rawAnchorElementHrefDescriptor","getOwnPropertyDescriptor","configurable","_get","_set","getCurUrl","proxyLocation","base","URL","_unused","requestIdleCallback","cb","setTimeout","getContainer","container","warn","msg","data","_console","console","_console2","getInlineCode","match","start","end","lastIndexOf","substring","defaultGetPublicPath","entry","_typeof","_URL","origin","paths","pop","join","e","compose","fnList","code","_len","arguments","args","Array","_key2","reduce","newCode","apply","nextTick","Promise","resolve","then","execHooks","plugins","hookName","_len2","_key3","map","plugin","filter","hook","isScriptElement","_element$tagName","tagName","toUpperCase","count","setTagToScript","tag","scriptTag","String","getTagFromScript","getAttribute","mergeOptions","options","cacheOptions","el","html","exec","undefined","fetch","props","sync","prefix","loading","degradeAttrs","fiber","alive","degrade","lifecycles","beforeLoad","beforeMount","afterMount","beforeUnmount","afterUnmount","activated","deactivated","loadError","eventTrigger","eventName","detail","event","CustomEvent","createEvent","initCustomEvent","dispatchEvent","stopMainAppRun","ALL_SCRIPT_REGEX","SCRIPT_TAG_REGEX","SCRIPT_SRC_REGEX","SCRIPT_TYPE_REGEX","SCRIPT_ENTRY_REGEX","SCRIPT_ASYNC_REGEX","DEFER_ASYNC_REGEX","SCRIPT_NO_MODULE_REGEX","SCRIPT_MODULE_REGEX","LINK_TAG_REGEX","LINK_PRELOAD_OR_PREFETCH_REGEX","LINK_HREF_REGEX","LINK_AS_FONT","STYLE_TAG_REGEX","STYLE_TYPE_REGEX","STYLE_HREF_REGEX","HTML_COMMENT_REGEX","LINK_IGNORE_REGEX","STYLE_IGNORE_REGEX","SCRIPT_IGNORE_REGEX","CROSS_ORIGIN_REGEX","hasProtocol","getEntirePath","path","parseTagAttributes","TagOuterHTML","matches","attributeMatches","attributesString","attributesPattern","attributesObject","attributeName","attributeValue","genLinkReplaceSymbol","linkHref","getInlineStyleReplaceSymbol","index","genScriptReplaceSymbol","scriptSrc","inlineScriptReplaceSymbol","genIgnoreAssetReplaceSymbol","genModuleScriptReplaceSymbol","moduleSupport","processTpl","tpl","postProcessTemplate","scripts","styles","tplResult","template","styleHref","styleIgnore","newHref","push","src","_match$match","content","type","scriptIgnore","isModuleScript","isCrossOriginScript","crossOriginType","moduleScriptIgnore","matchedScriptTypeMatch","matchedScriptType","matchedScriptEntry","matchedScriptSrcMatch","matchedScriptSrc","SyntaxError","isAsyncScript","isDeferScript","async","defer","module","crossorigin","crossoriginType","every","line","trim","getCssLoader","_ref","cssLoader","getPresetLoaders","loaderType","res","loaders","preLoaders","curLoaders","reverse","getEffectLoaders","isMatchUrl","effectLoaders","some","loader","defaultPlugin","baseUrl","_m","pre","post","cssBeforeLoaders","getPlugins","isArray","_toConsumableArray","styleCache","scriptCache","embedHTMLCache","defaultFetch","defaultGetTemplate","processCssLoader","_x","_x2","_x3","_processCssLoader","_callee","sandbox","getExternalStyleSheets","curUrl","composeCssLoader","processedCssList","embedHTML","_regeneratorRuntime","_context","prev","next","_ref2","ignore","contentPromise","getEmbedHTML","sent","abrupt","stop","_callee2","styleResultList","_context2","styleResult","isInlineCode","fetchAssets","cache","cssFlag","response","status","text","_getExternalStyleSheets","_getExternalScripts","script","reject","_objectSpread","importHTML","params","_opts$fetch","_opts$fiber","opts","htmlLoader","jsExcludes","cssExcludes","jsIgnores","cssIgnores","getPublicPath","getHtmlParseResult","assetPublicPath","_processTpl","getExternalScripts","style","idToSandboxCacheMap","__POWERED_BY_WUJIE__","__WUJIE","inject","idToSandboxMap","Map","getWujieById","_idToSandboxCacheMap$","wujie","getOptionsById","_idToSandboxCacheMap$2","documentProxyProperties","modifyLocalProperties","modifyProperties","shadowProperties","shadowMethods","documentProperties","documentMethods","documentEvents","ownerProperties","appDocumentAddEventListenerEvents","appDocumentOnEvents","mainDocumentAddEventListenerEvents","mainAndAppAddEventListenerEvents","appWindowAddEventListenerEvents","appWindowOnEvent","relativeElementTagAttrMap","IMG","A","SOURCE","windowProxyProperties","windowRegWhiteList","rawElementAppendChild","HTMLElement","appendChild","rawElementRemoveChild","removeChild","rawElementContains","contains","rawHeadInsertBefore","HTMLHeadElement","insertBefore","rawBodyInsertBefore","HTMLBodyElement","rawAddEventListener","Node","addEventListener","rawRemoveEventListener","removeEventListener","rawWindowAddEventListener","rawWindowRemoveEventListener","rawAppendChild","rawDocumentQuerySelector","__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR__","Document","manualInvokeElementEvent","elementGetter","customEvent","patchedEvent","defineProperties","srcElement","handleStylesheetElementPatch","stylesheetElement","innerHTML","_patcher","clearTimeout","_getPatchStyleElement","getPatchStyleElements","sheet","_getPatchStyleElement2","hostStyleSheetElement","fontStyleSheetElement","shadowRoot","head","dynamicScriptExecStack","rewriteAppendOrInsertChild","newChild","refChild","_this5","rawDOMAppendOrInsertBefore","wujieId","styleSheetElements","iframe","patchElementEffect","contentWindow","iframeDocument","contentDocument","rel","endsWith","_res","rawAttrs","outerHTML","_stylesheetElement","comment","createComment","_res2","_stylesheetElement$sh","_hasPatchStyle","innerHTMLDesc","innerTextDesc","textContentDesc","RawInsertRule","insertRule","patchSheetInsertRule","_this","innerText","_this2","textContent","_this3","node","_this4","nodeType","TEXT_NODE","ownerDocument","createTextNode","rule","patchStylesheetElement","_ref3","_type","crossOrigin","execScript","scriptResult","insertScriptToIframe","onload","_sandbox$execQueue","execQueue","execQueueLength","shift","_sandbox$execQueue2","_comment","_res3","findScriptElementFromIframe","rawElement","wujieTag","targetScript","__WUJIE_RAW_DOCUMENT_HEAD__","rewriteContains","other","patchEventListener","listenerMap","_cacheListeners","listener","listeners","typeListeners","splice","entries","_ref4","_ref5","patchRenderEffect","render","body","child","_findScriptElementFro2","cssSelectorMap","createWujieWebComponent","contentElement","classList","add","renderElementToContainer","selectorOrElement","clearChild","initRenderIframeAndContainer","parent","defaultStyle","_defineProperty","createIframeContainer","open","write","close","processCssLoaderForTemplate","cssAfterLoaders","contentList","styleElement","firstChild","renderTemplateToHtml","execFlag","headElement","bodyElement","cloneNode","parentNode","replaceChild","replaceHeadAndBody","ElementIterator","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextElement","currentNode","relativeAttr","nextNode","_head","_body","renderTemplateToShadowRoot","_x4","_x5","_renderTemplateToShadowRoot","processedHtml","shade","renderTemplateToIframe","_x6","_x7","_x8","_renderTemplateToIframe","_callee3","renderDocument","_context3","documentElement","root","addLoading","containerStyles","getComputedStyle","position","overflow","setProperty","loadingContainer","removeLoading","positionFlag","overflowFlag","removeProperty","removeAttribute","rootStyleSheets","rootCssRules","fontCssRules","rootStyleReg","i","_rootStyleSheets$i$cs","_rootStyleSheets$i","cssRules","j","cssRuleText","cssText","CSSRule","FONT_FACE_RULE","rootStyleSheetElement","syncUrlToWindow","_iframeWindow$__WUJIE","winUrlElement","validShortPath","shortPath","longPath","encodeURIComponent","newQuery","history","replaceState","syncUrlToIframe","_iframeWindow$locatio","_iframeWindow$__WUJIE2","idUrl","_syncUrl$match","syncUrl","decodeURIComponent","getSyncUrl","mainHostPath","patchIframeVariable","__WUJIE_PUBLIC_PATH__","$wujie","provide","__WUJIE_RAW_WINDOW__","updateBase","baseElement","recoverEventListeners","rootElement","elementEventCacheMap","elementListenerList","handler","recoverDocumentListeners","oldRootElement","newRootElement","patchEventTimeStamp","targetWindow","Event","timeStamp","initIframeDom","newDoc","implementation","createHTMLDocument","newDocumentElement","importNode","__WUJIE_RAW_DOCUMENT_QUERY_SELECTOR_ALL__","querySelectorAll","__WUJIE_RAW_DOCUMENT_CREATE_ELEMENT__","__WUJIE_RAW_DOCUMENT_CREATE_TEXT_NODE__","iframeUrlElement","appUrlElement","initBase","rawHistoryPushState","pushState","rawHistoryReplaceState","title","mainUrl","ignoreFlag","patchIframeHistory","patchIframeEvents","find","findIndex","ele","recordEventListeners","syncIframeUrlToWindow","processWindowProperty","message","reg","descriptor","patchWindowEffect","handlerCallbackMap","handlerTypeMap","callback","typeList","elementOnEvents","documentOnEvent","firstElementChild","val","propKey","proxyDocument","patchDocumentEffect","rawGetRootNode","getRootNode","rawInsertRule","rootNode","patchNodeEffect","HTMLImageElement","HTMLAnchorElement","HTMLSourceElement","HTMLLinkElement","HTMLScriptElement","HTMLMediaElement","patchRelativeUrlEffect","_hasPatch","scriptElement","nextScriptElement","jsLoader","getJsLoader","execNextScript","afterExecScript","isOutlineScript","onerror","renderIframeReplaceApp","iframeGenerator","iframeReady","oldDoc","loop","err","execCommand","stopIframeLoading","locationHrefSet","_iframe$contentWindow","hrefElement","hrefFlag","iframeBody","parentElement","pushUrlToWindow","proxyGenerator","proxyWindow","proxy","checkProxyFunction","_fakeDocument","_iframe$contentWindow2","rawCreateElement","rawCreateTextNode","_createElement","_ctx","arg","ctx","_ctx$propKey","rawPropMap","_ctx$propKey2","_getTargetValue","activeElement","_fakeLocation","_args$","ownKeys","_target","appEventObjMap","EventBus","_classCallCheck","$clear","eventObj","_createClass","cbs","$on","on","$off","allCbs","l","_cbs","_i","_l","_allCbs","_appEventObjMap$get","Wujie","bus","_appRouteParse","_localGenerator","documentURI","getElementsByTagName","_sandbox$document","locationKeys","constantKey","reload","localGenerator","_proxyGenerator","_proxyDocument","_proxyLocation","wujieCache","addSandboxCacheWithWujie","iframeFetch","_initRenderIframeAndC","_iframeBody","activeFlag","input","init","onunload","unmount","patchCssRules","scriptResultList","beforeScriptResultList","afterScriptResultList","syncScriptResultList","asyncScriptResultList","deferScriptResultList","domContentLoadedTrigger","domLoadedTrigger","beforeScriptResult","mount","_this2$execQueue$shif","afterScriptResult","_this2$execQueue$shif2","__WUJIE_UNMOUNT","_this2$execQueue$shif3","_this$execQueue$shift","mountFlag","_this$lifecycles","_this$lifecycles$befo","_this$lifecycles2","_this$lifecycles2$aft","_this$lifecycles3","_this$lifecycles3$act","__WUJIE_MOUNT","_this$lifecycles4","_this$lifecycles4$dea","_this$lifecycles5","_this$lifecycles5$bef","_this$lifecycles6","_this$lifecycles6$aft","clearInactiveAppUrl","_this$iframe$parentNo","deleteWujieById","styleSheetElement","hasAttribute","from","Date","now","startApp","_startApp","startOptions","_newSandbox$lifecycle","_newSandbox$lifecycle2","_iframeWindow","_sandbox$lifecycles3","_sandbox$lifecycles3$","_sandbox$lifecycles2","_sandbox$lifecycles2$","_yield$importHTML2","_sandbox$lifecycles4","_sandbox$lifecycles4$","_sandbox$lifecycles5","_sandbox$lifecycles5$","newSandbox","_yield$importHTML3","preload","active","destroy","rebuildStyleSheets","WuJie","customElements","WujieApp","_HTMLElement","_inherits","_super","_createSuper","attachShadow","mode","_wrapNativeSuper","define","defineWujieWebComponent","WujieReact","myRef","React","wrap","state","current","t0","log","startAppQueue","execStartApp","_this$props","width","height","ref","propTypes","addSandboxCacheWithOptions","preOptions","runPreload","_asyncToGenerator","_sandbox$lifecycles","_sandbox$lifecycles$b","_yield$importHTML","router","PropTypes","setupApp","vue2AppEntry","process","viteAppEntry","apps","vue2App","viteApp","children","MicroAppView","user","_useState","useState","_useState2","microInfo","setMicroInfo","_jsx","_Fragment","_jsxs","_Space","size","direction","_Alert","_Form","Item","label","_Cascader","expandTrigger","fieldNames","onChange","_value","app","$emit","values","item","exports","obj","_default","require","__esModule","_interopRequireDefault","_objectSpread2","nodeInterop","default","_getRequireWildcardCache","newObj","hasPropertyDescriptor","desc","_interopRequireWildcard","_LeftOutlined","_AntdIcon","cacheBabelInterop","cacheNodeInterop","LeftOutlined","icon","displayName","forwardRef","_RightOutlined","RightOutlined","_classCallCheck2","_createClass2","_inherits2","_createSuper2","_","ErrorBoundary","_React$Component","info","componentStack","setState","description","_this$state","errorMessage","errorDescription","Component","_extends2","_slicedToArray2","_defineProperty2","_CheckCircleFilled","_CheckCircleOutlined","_CloseCircleFilled","_CloseCircleOutlined","_CloseOutlined","_ExclamationCircleFilled","_ExclamationCircleOutlined","_InfoCircleFilled","_InfoCircleOutlined","_classnames","_rcMotion","_configProvider","_getDataOrAriaProps","_reactNode","_ErrorBoundary","__rest","s","t","getOwnPropertySymbols","propertyIsEnumerable","iconMapFilled","success","warning","iconMapOutlined","IconNode","prefixCls","iconType","replaceElement","className","CloseIcon","isClosable","closeText","closeIcon","handleClose","onClick","tabIndex","Alert","_a","_classNames2","customizePrefixCls","banner","_a$className","onMouseEnter","onMouseLeave","afterClose","showIcon","closable","_a$closeIcon","action","_React$useState","_React$useState2","closed","setClosed","useRef","_React$useContext","useContext","ConfigContext","getPrefixCls","onClose","getType","isShowIcon","alertCls","dataOrAriaProps","visible","motionName","motionAppear","motionEnter","onLeaveStart","maxHeight","offsetHeight","onLeaveEnd","motionClassName","motionStyle","role","_typeof2","_toConsumableArray2","_LoadingOutlined","_rcCascader","_omit","_defaultRenderEmpty","_DisabledContext","_SizeContext","_Compact","_iconUtil","_motion","_statusUtils","SHOW_CHILD","SHOW_PARENT","defaultSearchRender","inputValue","optionList","lower","toLowerCase","str","lowerKeyword","cells","list","cur","fillCells","cell","originWorld","slice","highlightKeyword","Cascader","customizeSize","customDisabled","disabled","multiple","_props$bordered","bordered","transitionName","_props$choiceTransiti","choiceTransitionName","popupClassName","dropdownClassName","expandIcon","placement","showSearch","_props$allowClear","allowClear","notFoundContent","getPopupContainer","customStatus","showArrow","rest","restProps","_useContext","getContextPopupContainer","renderEmpty","rootDirection","mergedDirection","isRtl","_useContext2","FormItemInputContext","contextStatus","hasFeedback","isFormItemInput","feedbackIcon","mergedStatus","getMergedStatus","mergedNotFoundContent","rootPrefixCls","cascaderPrefixCls","_useCompactItemContex","useCompactItemContext","compactSize","compactItemClassnames","mergedDropdownClassName","mergedShowSearch","useMemo","searchConfig","mergedSize","mergedDisabled","mergedExpandIcon","loadingIcon","spin","checkable","mergedShowArrow","_getIcons","suffixIcon","removeIcon","clearIcon","getStatusClassNames","inputIcon","dropdownPrefixCls","getTransitionName","getTransitionDirection","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","propFullName","secret","getShim","isRequired","ReactPropTypes","array","bigint","bool","func","number","object","string","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","removeFromCheckedKeys","halfCheckedKeys","checkedKeys","filteredKeys","Set","isCheckDisabled","disableCheckbox","conductCheck","keyList","checked","keyEntities","getCheckDisabled","syntheticGetCheckDisabled","warningMissKeys","result","hasEntity","levelEntities","maxLevel","entity","level","levelSet","Math","max","_entity$children","childEntity","visitedKeys","_level","allChecked","partialChecked","fillConductCheck","halfKeys","_entity$children2","delete","_level2","cleanConductCheck","VALUE_SPLIT","toPathKey","toPathKeys","isLeaf","option","_option$isLeaf","_option$fieldNames$ch","scrollIntoParentView","elementToParent","offsetTop","scrollTop","scrollTo","top","formatStrategyValues","pathKeys","getKeyPathEntities","showCheckedStrategy","valueSet","keyPathEntities","toPathOptions","valueCells","stringMode","currentList","valueOptions","_loop","_currentList","_currentList2","_foundOption$fieldNam","valueCell","foundIndex","foundOption","getPosition","getKey","pos","fillFieldNames","mergedTitle","_title","convertDataToEntities","dataNodes","initWrapper","processEntity","onProcessFinished","externalGetKey","childrenPropName","mergedExternalGetKey","posEntities","wrapper","config","syntheticGetKey","_mergedConfig","_fillFieldNames2","fieldKey","fieldChildren","mergeChildrenPropName","processNode","pathNodes","connectNodes","parentPos","nodes","subNode","subIndex","traverseDataNodes","mergedKey","useRefFunc","funcRef","cacheFn","SEARCH_MARK","defaultFilter","opt","defaultRender","Checkbox","_classNames","halfChecked","CascaderContext","customCheckbox","classNames","FIX_LABEL","Column","activeValue","prevValuePath","onToggleOpen","onSelect","onActive","checkedSet","halfCheckedSet","loadingKeys","isSelectable","menuPrefixCls","menuItemPrefixCls","changeOnSelect","dropdownMenuColumnStyle","hoverOpen","optionInfoList","_option$FIX_LABEL","searchOptions","isMergedLeaf","fullPath","fullPathKey","isLoading","triggerOpenPath","nextValueCells","triggerSelect","onDoubleClick","onMouseDown","preventDefault","stopPropagation","activeValueCells","setActiveValueCells","onKeyBoardSelect","_useBaseProps","useBaseProps","searchValue","toggleOpen","rtl","_React$useMemo","activeIndex","currentOptions","mergedActiveIndexes","mergedActiveValueCells","len","nextActiveIndex","activeOptions","_React$useMemo2","validActiveValueCells","lastActiveIndex","lastActiveOptions","internalSetActiveValueCells","prevColumn","nextActiveCells","nextColumn","_lastActiveOptions$la","nextOption","onKeyDown","which","KeyCode","UP","DOWN","offset","currentIndex","offsetActiveOption","LEFT","RIGHT","BACKSPACE","ENTER","originOptions","ESC","onKeyUp","RefOptionList","_optionColumns$","_optionColumns$$optio","containerRef","halfValues","loadData","mergedPrefixCls","setLoadingKeys","loadingKey","lastOption","_useActive","firstValueCells","useActive","_useActive2","onPathOpen","rawOptions","pathKey","internalLoadData","onPathSelect","valuePath","leaf","fromKeyboard","mergedOptions","optionColumns","activeValueCell","currentOption","subOptions","useKeyboard","selectValueCells","_containerRef$current","cellKeyPath","isEmpty","emptyList","columnProps","columnNodes","col","_extends","_excluded","toRawValues","isMultipleValue","_props$prefixCls","defaultValue","displayRender","onSearch","popupVisible","popupPlacement","onDropdownVisibleChange","onPopupVisibleChange","_props$expandIcon","_props$dropdownMatchS","dropdownMatchSelectWidth","_props$showCheckedStr","_objectWithoutProperties","mergedId","useId","_useMergedState","useMergedState","postState","_useMergedState2","rawValues","setRawValues","mergedFieldNames","JSON","stringify","getPathKeyEntities","cacheRef","pathKeyEntities","useEntities","getValueByKeyPath","_useMergedState3","_useMergedState4","mergedSearchValue","setSearchValue","_useSearchConfig","matchInputWidth","limit","useSearchConfig","_useSearchConfig2","_config$filter","_config$render","_config$limit","sort","filteredOptions","dig","pathOptions","connectedPathOptions","a","b","useSearchOptions","getMissingValues","missingValues","existsValues","useMissingValues","_getMissingValues","_getMissingValues2","existValues","_conductCheck","checkedValues","halfCheckedValues","missingCheckedValues","displayValues","mergedDisplayRender","labels","mergedLabels","keyedLabel","_valueOptions","_valueOptions$option","_option$fieldNames$la","useDisplayValues","deduplicateKeys","triggerChange","nextValues","nextRawValues","valueOpt","triggerValues","triggerOptions","onInternalSelect","checkedPathKeys","halfCheckedPathKeys","existInChecked","existInMissing","nextCheckedValues","nextMissingValues","nextRawCheckedKeys","deDuplicatedKeys","mergedOpen","mergedPlacement","cascaderContext","emptyOptions","dropdownStyle","minWidth","Provider","BaseSelect","onDisplayValuesChange","searchText","source","OptionList","nextVisible","getRawInputElement","runtime","regeneratorRuntime","accidentalStrictMode","globalThis"],"sourceRoot":""}