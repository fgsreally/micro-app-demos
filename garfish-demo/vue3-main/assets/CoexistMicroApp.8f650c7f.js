import{w as X,t as Y,d as U,u as Z,r as i,g as O,c as ee,_ as y,a as l,C as ne,i as te,b as ae,e as oe,v as se,f as $,T as le,P as w,h as ue,I as ce,j as ie,E as re,k as pe,l as de,m as fe,n as me,s as z,o as ve,p as _e,q as N,x as ye,G as R,y as Ce,z as ge,A as he,B as C,D as g,F as u,H as E,J as G,K as xe}from"./index.a9a05675.js";import{B as Ae,_ as we}from"./index.7b830f7f.js";import{_ as Ee,a as Ie}from"./index.7f688376.js";import{c as ke}from"./index.758945ae.js";import"./index.b44d961a.js";var be={success:ue,info:ce,error:ie,warning:re},Fe={success:pe,info:de,error:fe,warning:me},Be=Y("success","info","warning","error"),Ve=function(){return{type:w.oneOf(Be),closable:{type:Boolean,default:void 0},closeText:w.any,message:w.any,description:w.any,afterClose:Function,showIcon:{type:Boolean,default:void 0},prefixCls:String,banner:{type:Boolean,default:void 0},icon:w.any,closeIcon:w.any,onClose:Function}},De=U({compatConfig:{MODE:3},name:"AAlert",inheritAttrs:!1,props:Ve(),setup:function(o,v){var r=v.slots,h=v.emit,f=v.attrs,x=v.expose,A=Z("alert",o),M=A.prefixCls,B=A.direction,m=i(!1),I=i(!1),k=i(),V=function(e){e.preventDefault();var t=k.value;t.style.height="".concat(t.offsetHeight,"px"),t.style.height="".concat(t.offsetHeight,"px"),m.value=!0,h("close",e)},b=function(){var e;m.value=!1,I.value=!0,(e=o.afterClose)===null||e===void 0||e.call(o)};x({animationEnd:b});var s=i({});return function(){var n,e,t=o.banner,p=o.closeIcon,D=p===void 0?(n=r.closeIcon)===null||n===void 0?void 0:n.call(r):p,c=o.closable,d=o.type,_=o.showIcon,F=O(r,o,"closeText"),P=O(r,o,"description"),L=O(r,o,"message"),T=O(r,o,"icon");_=t&&_===void 0?!0:_,d=t&&d===void 0?"warning":d||"info";var q=(P?Fe:be)[d]||null;F&&(c=!0);var a=M.value,J=ee(a,(e={},y(e,"".concat(a,"-").concat(d),!0),y(e,"".concat(a,"-closing"),m.value),y(e,"".concat(a,"-with-description"),!!P),y(e,"".concat(a,"-no-icon"),!_),y(e,"".concat(a,"-banner"),!!t),y(e,"".concat(a,"-closable"),c),y(e,"".concat(a,"-rtl"),B.value==="rtl"),e)),K=c?l("button",{type:"button",onClick:V,class:"".concat(a,"-close-icon"),tabindex:0},[F?l("span",{class:"".concat(a,"-close-text")},[F]):D===void 0?l(ne,null,null):D]):null,Q=T&&(te(T)?ke(T,{class:"".concat(a,"-icon")}):l("span",{class:"".concat(a,"-icon")},[T]))||l(q,{class:"".concat(a,"-icon")},null),W=ae("".concat(a,"-motion"),{appear:!1,css:!0,onAfterLeave:b,onBeforeLeave:function(S){S.style.maxHeight="".concat(S.offsetHeight,"px")},onLeave:function(S){S.style.maxHeight="0px"}});return I.value?null:l(le,W,{default:function(){return[oe(l("div",$($({role:"alert"},f),{},{style:[f.style,s.value],class:[f.class,J],"data-show":!m.value,ref:k}),[_?Q:null,l("div",{class:"".concat(a,"-content")},[L?l("div",{class:"".concat(a,"-message")},[L]):null,P?l("div",{class:"".concat(a,"-description")},[P]):null]),K]),[[se,!m.value]])]}})}}});const Pe=X(De);const Te={name:"CoexistMicroApp"},Se=U({...Te,setup(H){const o=i(null),v=i(null),r=i(null),h=i(!0),f=i(!0),x=i(!0),{apps:A}=z(ve()),{user:M}=z(_e()),B=N(()=>{const t=A.value.find(p=>p.name==="vue2App");return{...t,name:t.name+"Coexist"}}),m=N(()=>{const t=A.value.find(p=>p.name==="reactApp");return{...t,name:t.name+"Coexist"}}),I=N(()=>{const t=A.value.find(p=>p.name==="viteApp");return{...t,name:t.name+"Coexist"}});function k(){h.value=!h.value}function V(){f.value=!f.value}function b(){x.value=!x.value}let s=null,n=null,e=null;return ye(async()=>{[s,n,e]=await Promise.all([R.loadApp(B.value.name,{domGetter:()=>o.value,entry:B.value.entry,basename:"/coexist-micro-app",props:{path:"/communication-test"}}),R.loadApp(m.value.name,{domGetter:()=>v.value,entry:m.value.entry,basename:"/coexist-micro-app",props:{path:"/communication-test"}}),R.loadApp(I.value.name,{domGetter:()=>r.value,entry:I.value.entry,basename:"/coexist-micro-app",sandbox:!1,props:{path:"/communication-test"}})]),await await Promise.all([s==null?void 0:s.mount(),n==null?void 0:n.mount(),e==null?void 0:e.mount()]),window.Garfish.channel.emit("userInfo",Ce(M.value))}),ge(()=>{h.value?s&&!s.mounted&&s.mount():s&&s.mounted&&s.unmount(),f.value?n&&!n.mounted&&n.mount():n&&n.mounted&&n.unmount(),x.value?e&&!e.mounted&&e.mount():e&&e.mounted&&e.unmount()}),he(()=>{s&&s.mounted&&s.unmount(),n&&n.mounted&&n.unmount()}),(t,p)=>{const D=Pe,c=Ae,d=Ee,_=Ie,F=we;return C(),g(F,{direction:"vertical",size:40,class:"box"},{default:u(()=>[l(D,{message:"\u5DE6\u4E0A\u5E94\u7528\u4E3AVue2\u5B50\u5E94\u7528\uFF0C\u53F3\u4E0A\u5E94\u7528\u4E3AReact18\u5B50\u5E94\u7528\uFF0C\u5DE6\u4E0B\u5E94\u7528\u4E3AVite\u5B50\u5E94\u7528\u3002",type:"success"}),l(_,{gutter:20},{default:u(()=>[l(d,{span:12},{default:u(()=>[h.value?(C(),g(c,{key:0,type:"primary",danger:"",onClick:k},{default:u(()=>[E(" \u5378\u8F7DVue2\u5E94\u7528 ")]),_:1})):(C(),g(c,{key:1,type:"primary",onClick:k},{default:u(()=>[E(" \u52A0\u8F7DVue2\u5E94\u7528 ")]),_:1})),G("div",{ref_key:"one",ref:o},null,512)]),_:1}),l(d,{span:12},{default:u(()=>[f.value?(C(),g(c,{key:0,type:"primary",danger:"",onClick:V},{default:u(()=>[E(" \u5378\u8F7DReact18\u5E94\u7528 ")]),_:1})):(C(),g(c,{key:1,type:"primary",onClick:V},{default:u(()=>[E(" \u52A0\u8F7DReact18\u5E94\u7528 ")]),_:1})),G("div",{ref_key:"two",ref:v},null,512)]),_:1}),l(d,{span:12},{default:u(()=>[x.value?(C(),g(c,{key:0,type:"primary",danger:"",onClick:b},{default:u(()=>[E(" \u5378\u8F7DVite\u5E94\u7528 ")]),_:1})):(C(),g(c,{key:1,type:"primary",onClick:b},{default:u(()=>[E(" \u52A0\u8F7DVite\u5E94\u7528 ")]),_:1})),G("div",{ref_key:"three",ref:r},null,512)]),_:1})]),_:1})]),_:1})}}});const He=xe(Se,[["__scopeId","data-v-51f0df40"]]);export{He as default};
